import{a as Ct,b as qo,c as Wo,d as yt,e as Ko}from"./chunk-PTG5764I.js";import{a as Oi}from"./chunk-JOCO776Y.js";import{c as Ho,e as jo,f as Yo,k as Qo,l as Go,m as Xo}from"./chunk-VQB6UCMW.js";import{$ as m,Aa as f,Ab as Re,Bb as ze,C as Oo,Da as K,E as Po,Ea as qt,Fa as Wt,Ga as Ht,H as ut,I as mt,Ia as g,Ja as k,Ka as ee,La as Oe,Ma as Y,N as A,Na as Q,O as gt,Oa as G,Q as ge,Qa as Ge,R as v,S as b,Sa as ne,Ta as Vo,Ua as Bo,W as le,Xa as Lo,Ya as No,Z as j,_ as To,a as Ee,aa as I,b as So,bb as Do,c as N,d as ka,da as ko,db as Ae,e as wi,ea as Io,f as ae,fb as fe,ia as T,ib as Si,ja as bn,jb as vt,k as Eo,ka as w,la as ft,ma as Mi,na as Ao,pa as U,pb as Uo,qb as bt,ra as _t,sa as xt,ta as d,ua as p,ub as Ce,va as y,w as Ft,wa as Ro,wb as Cn,x as vn,xa as zo,ya as R,yb as Fo,za as M,zb as Ei}from"./chunk-7HZ4FB2J.js";var Zo=N((mp,Jo)=>{"use strict";Jo.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var Xe=N(it=>{"use strict";var yn,Ia=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];it.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};it.getSymbolTotalCodewords=function(t){return Ia[t]};it.getBCHDigit=function(o){let t=0;for(;o!==0;)t++,o>>>=1;return t};it.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');yn=t};it.isKanjiModeEnabled=function(){return typeof yn<"u"};it.toSJIS=function(t){return yn(t)}});var Pi=N(ye=>{"use strict";ye.L={bit:1};ye.M={bit:0};ye.Q={bit:3};ye.H={bit:2};function Aa(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return ye.L;case"m":case"medium":return ye.M;case"q":case"quartile":return ye.Q;case"h":case"high":return ye.H;default:throw new Error("Unknown EC Level: "+o)}}ye.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};ye.from=function(t,i){if(ye.isValid(t))return t;try{return Aa(t)}catch{return i}}});var tr=N((_p,er)=>{"use strict";function $o(){this.buffer=[],this.length=0}$o.prototype={get:function(o){let t=Math.floor(o/8);return(this.buffer[t]>>>7-o%8&1)===1},put:function(o,t){for(let i=0;i<t;i++)this.putBit((o>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),o&&(this.buffer[t]|=128>>>this.length%8),this.length++}};er.exports=$o});var nr=N((xp,ir)=>{"use strict";function jt(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}jt.prototype.set=function(o,t,i,e){let n=o*this.size+t;this.data[n]=i,e&&(this.reservedBit[n]=!0)};jt.prototype.get=function(o,t){return this.data[o*this.size+t]};jt.prototype.xor=function(o,t,i){this.data[o*this.size+t]^=i};jt.prototype.isReserved=function(o,t){return this.reservedBit[o*this.size+t]};ir.exports=jt});var or=N(Ti=>{"use strict";var Ra=Xe().getSymbolSize;Ti.getRowColCoords=function(t){if(t===1)return[];let i=Math.floor(t/7)+2,e=Ra(t),n=e===145?26:Math.ceil((e-13)/(2*i-2))*2,r=[e-7];for(let s=1;s<i-1;s++)r[s]=r[s-1]-n;return r.push(6),r.reverse()};Ti.getPositions=function(t){let i=[],e=Ti.getRowColCoords(t),n=e.length;for(let r=0;r<n;r++)for(let s=0;s<n;s++)r===0&&s===0||r===0&&s===n-1||r===n-1&&s===0||i.push([e[r],e[s]]);return i}});var ar=N(sr=>{"use strict";var za=Xe().getSymbolSize,rr=7;sr.getPositions=function(t){let i=za(t);return[[0,0],[i-rr,0],[0,i-rr]]}});var cr=N(F=>{"use strict";F.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var nt={N1:3,N2:3,N3:40,N4:10};F.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};F.from=function(t){return F.isValid(t)?parseInt(t,10):void 0};F.getPenaltyN1=function(t){let i=t.size,e=0,n=0,r=0,s=null,c=null;for(let h=0;h<i;h++){n=r=0,s=c=null;for(let x=0;x<i;x++){let S=t.get(h,x);S===s?n++:(n>=5&&(e+=nt.N1+(n-5)),s=S,n=1),S=t.get(x,h),S===c?r++:(r>=5&&(e+=nt.N1+(r-5)),c=S,r=1)}n>=5&&(e+=nt.N1+(n-5)),r>=5&&(e+=nt.N1+(r-5))}return e};F.getPenaltyN2=function(t){let i=t.size,e=0;for(let n=0;n<i-1;n++)for(let r=0;r<i-1;r++){let s=t.get(n,r)+t.get(n,r+1)+t.get(n+1,r)+t.get(n+1,r+1);(s===4||s===0)&&e++}return e*nt.N2};F.getPenaltyN3=function(t){let i=t.size,e=0,n=0,r=0;for(let s=0;s<i;s++){n=r=0;for(let c=0;c<i;c++)n=n<<1&2047|t.get(s,c),c>=10&&(n===1488||n===93)&&e++,r=r<<1&2047|t.get(c,s),c>=10&&(r===1488||r===93)&&e++}return e*nt.N3};F.getPenaltyN4=function(t){let i=0,e=t.data.length;for(let r=0;r<e;r++)i+=t.data[r];return Math.abs(Math.ceil(i*100/e/5)-10)*nt.N4};function Va(o,t,i){switch(o){case F.Patterns.PATTERN000:return(t+i)%2===0;case F.Patterns.PATTERN001:return t%2===0;case F.Patterns.PATTERN010:return i%3===0;case F.Patterns.PATTERN011:return(t+i)%3===0;case F.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2===0;case F.Patterns.PATTERN101:return t*i%2+t*i%3===0;case F.Patterns.PATTERN110:return(t*i%2+t*i%3)%2===0;case F.Patterns.PATTERN111:return(t*i%3+(t+i)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}F.applyMask=function(t,i){let e=i.size;for(let n=0;n<e;n++)for(let r=0;r<e;r++)i.isReserved(r,n)||i.xor(r,n,Va(t,r,n))};F.getBestMask=function(t,i){let e=Object.keys(F.Patterns).length,n=0,r=1/0;for(let s=0;s<e;s++){i(s),F.applyMask(s,t);let c=F.getPenaltyN1(t)+F.getPenaltyN2(t)+F.getPenaltyN3(t)+F.getPenaltyN4(t);F.applyMask(s,t),c<r&&(r=c,n=s)}return n}});var Mn=N(wn=>{"use strict";var Ke=Pi(),ki=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ii=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];wn.getBlocksCount=function(t,i){switch(i){case Ke.L:return ki[(t-1)*4+0];case Ke.M:return ki[(t-1)*4+1];case Ke.Q:return ki[(t-1)*4+2];case Ke.H:return ki[(t-1)*4+3];default:return}};wn.getTotalCodewordsCount=function(t,i){switch(i){case Ke.L:return Ii[(t-1)*4+0];case Ke.M:return Ii[(t-1)*4+1];case Ke.Q:return Ii[(t-1)*4+2];case Ke.H:return Ii[(t-1)*4+3];default:return}}});var lr=N(Ri=>{"use strict";var Yt=new Uint8Array(512),Ai=new Uint8Array(256);(function(){let t=1;for(let i=0;i<255;i++)Yt[i]=t,Ai[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)Yt[i]=Yt[i-255]})();Ri.log=function(t){if(t<1)throw new Error("log("+t+")");return Ai[t]};Ri.exp=function(t){return Yt[t]};Ri.mul=function(t,i){return t===0||i===0?0:Yt[Ai[t]+Ai[i]]}});var dr=N(Qt=>{"use strict";var Sn=lr();Qt.mul=function(t,i){let e=new Uint8Array(t.length+i.length-1);for(let n=0;n<t.length;n++)for(let r=0;r<i.length;r++)e[n+r]^=Sn.mul(t[n],i[r]);return e};Qt.mod=function(t,i){let e=new Uint8Array(t);for(;e.length-i.length>=0;){let n=e[0];for(let s=0;s<i.length;s++)e[s]^=Sn.mul(i[s],n);let r=0;for(;r<e.length&&e[r]===0;)r++;e=e.slice(r)}return e};Qt.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let e=0;e<t;e++)i=Qt.mul(i,new Uint8Array([1,Sn.exp(e)]));return i}});var ur=N((Sp,hr)=>{"use strict";var pr=dr();function En(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}En.prototype.initialize=function(t){this.degree=t,this.genPoly=pr.generateECPolynomial(this.degree)};En.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let i=new Uint8Array(t.length+this.degree);i.set(t);let e=pr.mod(i,this.genPoly),n=this.degree-e.length;if(n>0){let r=new Uint8Array(this.degree);return r.set(e,n),r}return e};hr.exports=En});var On=N(mr=>{"use strict";mr.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var Pn=N(De=>{"use strict";var gr="[0-9]+",Ba="[A-Z $%*+\\-./:]+",Gt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Gt=Gt.replace(/u/g,"\\u");var La="(?:(?![A-Z0-9 $%*+\\-./:]|"+Gt+`)(?:.|[\r
]))+`;De.KANJI=new RegExp(Gt,"g");De.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");De.BYTE=new RegExp(La,"g");De.NUMERIC=new RegExp(gr,"g");De.ALPHANUMERIC=new RegExp(Ba,"g");var Na=new RegExp("^"+Gt+"$"),Da=new RegExp("^"+gr+"$"),Ua=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");De.testKanji=function(t){return Na.test(t)};De.testNumeric=function(t){return Da.test(t)};De.testAlphanumeric=function(t){return Ua.test(t)}});var Je=N(te=>{"use strict";var Fa=On(),Tn=Pn();te.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};te.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};te.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};te.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};te.MIXED={bit:-1};te.getCharCountIndicator=function(t,i){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!Fa.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?t.ccBits[0]:i<27?t.ccBits[1]:t.ccBits[2]};te.getBestModeForData=function(t){return Tn.testNumeric(t)?te.NUMERIC:Tn.testAlphanumeric(t)?te.ALPHANUMERIC:Tn.testKanji(t)?te.KANJI:te.BYTE};te.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};te.isValid=function(t){return t&&t.bit&&t.ccBits};function qa(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return te.NUMERIC;case"alphanumeric":return te.ALPHANUMERIC;case"kanji":return te.KANJI;case"byte":return te.BYTE;default:throw new Error("Unknown mode: "+o)}}te.from=function(t,i){if(te.isValid(t))return t;try{return qa(t)}catch{return i}}});var br=N(ot=>{"use strict";var zi=Xe(),Wa=Mn(),fr=Pi(),Ze=Je(),kn=On(),xr=7973,_r=zi.getBCHDigit(xr);function Ha(o,t,i){for(let e=1;e<=40;e++)if(t<=ot.getCapacity(e,i,o))return e}function vr(o,t){return Ze.getCharCountIndicator(o,t)+4}function ja(o,t){let i=0;return o.forEach(function(e){let n=vr(e.mode,t);i+=n+e.getBitsLength()}),i}function Ya(o,t){for(let i=1;i<=40;i++)if(ja(o,i)<=ot.getCapacity(i,t,Ze.MIXED))return i}ot.from=function(t,i){return kn.isValid(t)?parseInt(t,10):i};ot.getCapacity=function(t,i,e){if(!kn.isValid(t))throw new Error("Invalid QR Code version");typeof e>"u"&&(e=Ze.BYTE);let n=zi.getSymbolTotalCodewords(t),r=Wa.getTotalCodewordsCount(t,i),s=(n-r)*8;if(e===Ze.MIXED)return s;let c=s-vr(e,t);switch(e){case Ze.NUMERIC:return Math.floor(c/10*3);case Ze.ALPHANUMERIC:return Math.floor(c/11*2);case Ze.KANJI:return Math.floor(c/13);case Ze.BYTE:default:return Math.floor(c/8)}};ot.getBestVersionForData=function(t,i){let e,n=fr.from(i,fr.M);if(Array.isArray(t)){if(t.length>1)return Ya(t,n);if(t.length===0)return 1;e=t[0]}else e=t;return Ha(e.mode,e.getLength(),n)};ot.getEncodedBits=function(t){if(!kn.isValid(t)||t<7)throw new Error("Invalid QR Code version");let i=t<<12;for(;zi.getBCHDigit(i)-_r>=0;)i^=xr<<zi.getBCHDigit(i)-_r;return t<<12|i}});var Mr=N(wr=>{"use strict";var In=Xe(),yr=1335,Qa=21522,Cr=In.getBCHDigit(yr);wr.getEncodedBits=function(t,i){let e=t.bit<<3|i,n=e<<10;for(;In.getBCHDigit(n)-Cr>=0;)n^=yr<<In.getBCHDigit(n)-Cr;return(e<<10|n)^Qa}});var Er=N((Ip,Sr)=>{"use strict";var Ga=Je();function wt(o){this.mode=Ga.NUMERIC,this.data=o.toString()}wt.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};wt.prototype.getLength=function(){return this.data.length};wt.prototype.getBitsLength=function(){return wt.getBitsLength(this.data.length)};wt.prototype.write=function(t){let i,e,n;for(i=0;i+3<=this.data.length;i+=3)e=this.data.substr(i,3),n=parseInt(e,10),t.put(n,10);let r=this.data.length-i;r>0&&(e=this.data.substr(i),n=parseInt(e,10),t.put(n,r*3+1))};Sr.exports=wt});var Pr=N((Ap,Or)=>{"use strict";var Xa=Je(),An=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Mt(o){this.mode=Xa.ALPHANUMERIC,this.data=o}Mt.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Mt.prototype.getLength=function(){return this.data.length};Mt.prototype.getBitsLength=function(){return Mt.getBitsLength(this.data.length)};Mt.prototype.write=function(t){let i;for(i=0;i+2<=this.data.length;i+=2){let e=An.indexOf(this.data[i])*45;e+=An.indexOf(this.data[i+1]),t.put(e,11)}this.data.length%2&&t.put(An.indexOf(this.data[i]),6)};Or.exports=Mt});var kr=N((Rp,Tr)=>{"use strict";Tr.exports=function(t){for(var i=[],e=t.length,n=0;n<e;n++){var r=t.charCodeAt(n);if(r>=55296&&r<=56319&&e>n+1){var s=t.charCodeAt(n+1);s>=56320&&s<=57343&&(r=(r-55296)*1024+s-56320+65536,n+=1)}if(r<128){i.push(r);continue}if(r<2048){i.push(r>>6|192),i.push(r&63|128);continue}if(r<55296||r>=57344&&r<65536){i.push(r>>12|224),i.push(r>>6&63|128),i.push(r&63|128);continue}if(r>=65536&&r<=1114111){i.push(r>>18|240),i.push(r>>12&63|128),i.push(r>>6&63|128),i.push(r&63|128);continue}i.push(239,191,189)}return new Uint8Array(i).buffer}});var Ar=N((zp,Ir)=>{"use strict";var Ka=kr(),Ja=Je();function St(o){this.mode=Ja.BYTE,typeof o=="string"&&(o=Ka(o)),this.data=new Uint8Array(o)}St.getBitsLength=function(t){return t*8};St.prototype.getLength=function(){return this.data.length};St.prototype.getBitsLength=function(){return St.getBitsLength(this.data.length)};St.prototype.write=function(o){for(let t=0,i=this.data.length;t<i;t++)o.put(this.data[t],8)};Ir.exports=St});var zr=N((Vp,Rr)=>{"use strict";var Za=Je(),$a=Xe();function Et(o){this.mode=Za.KANJI,this.data=o}Et.getBitsLength=function(t){return t*13};Et.prototype.getLength=function(){return this.data.length};Et.prototype.getBitsLength=function(){return Et.getBitsLength(this.data.length)};Et.prototype.write=function(o){let t;for(t=0;t<this.data.length;t++){let i=$a.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),o.put(i,13)}};Rr.exports=Et});var Vr=N((Bp,Rn)=>{"use strict";var Xt={single_source_shortest_paths:function(o,t,i){var e={},n={};n[t]=0;var r=Xt.PriorityQueue.make();r.push(t,0);for(var s,c,h,x,S,O,E,B,L;!r.empty();){s=r.pop(),c=s.value,x=s.cost,S=o[c]||{};for(h in S)S.hasOwnProperty(h)&&(O=S[h],E=x+O,B=n[h],L=typeof n[h]>"u",(L||B>E)&&(n[h]=E,r.push(h,E),e[h]=c))}if(typeof i<"u"&&typeof n[i]>"u"){var J=["Could not find a path from ",t," to ",i,"."].join("");throw new Error(J)}return e},extract_shortest_path_from_predecessor_list:function(o,t){for(var i=[],e=t,n;e;)i.push(e),n=o[e],e=o[e];return i.reverse(),i},find_path:function(o,t,i){var e=Xt.single_source_shortest_paths(o,t,i);return Xt.extract_shortest_path_from_predecessor_list(e,i)},PriorityQueue:{make:function(o){var t=Xt.PriorityQueue,i={},e;o=o||{};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i.queue=[],i.sorter=o.sorter||t.default_sorter,i},default_sorter:function(o,t){return o.cost-t.cost},push:function(o,t){var i={value:o,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof Rn<"u"&&(Rn.exports=Xt)});var Wr=N(Ot=>{"use strict";var D=Je(),Nr=Er(),Dr=Pr(),Ur=Ar(),Fr=zr(),Kt=Pn(),Vi=Xe(),ec=Vr();function Br(o){return unescape(encodeURIComponent(o)).length}function Jt(o,t,i){let e=[],n;for(;(n=o.exec(i))!==null;)e.push({data:n[0],index:n.index,mode:t,length:n[0].length});return e}function qr(o){let t=Jt(Kt.NUMERIC,D.NUMERIC,o),i=Jt(Kt.ALPHANUMERIC,D.ALPHANUMERIC,o),e,n;return Vi.isKanjiModeEnabled()?(e=Jt(Kt.BYTE,D.BYTE,o),n=Jt(Kt.KANJI,D.KANJI,o)):(e=Jt(Kt.BYTE_KANJI,D.BYTE,o),n=[]),t.concat(i,e,n).sort(function(s,c){return s.index-c.index}).map(function(s){return{data:s.data,mode:s.mode,length:s.length}})}function zn(o,t){switch(t){case D.NUMERIC:return Nr.getBitsLength(o);case D.ALPHANUMERIC:return Dr.getBitsLength(o);case D.KANJI:return Fr.getBitsLength(o);case D.BYTE:return Ur.getBitsLength(o)}}function tc(o){return o.reduce(function(t,i){let e=t.length-1>=0?t[t.length-1]:null;return e&&e.mode===i.mode?(t[t.length-1].data+=i.data,t):(t.push(i),t)},[])}function ic(o){let t=[];for(let i=0;i<o.length;i++){let e=o[i];switch(e.mode){case D.NUMERIC:t.push([e,{data:e.data,mode:D.ALPHANUMERIC,length:e.length},{data:e.data,mode:D.BYTE,length:e.length}]);break;case D.ALPHANUMERIC:t.push([e,{data:e.data,mode:D.BYTE,length:e.length}]);break;case D.KANJI:t.push([e,{data:e.data,mode:D.BYTE,length:Br(e.data)}]);break;case D.BYTE:t.push([{data:e.data,mode:D.BYTE,length:Br(e.data)}])}}return t}function nc(o,t){let i={},e={start:{}},n=["start"];for(let r=0;r<o.length;r++){let s=o[r],c=[];for(let h=0;h<s.length;h++){let x=s[h],S=""+r+h;c.push(S),i[S]={node:x,lastCount:0},e[S]={};for(let O=0;O<n.length;O++){let E=n[O];i[E]&&i[E].node.mode===x.mode?(e[E][S]=zn(i[E].lastCount+x.length,x.mode)-zn(i[E].lastCount,x.mode),i[E].lastCount+=x.length):(i[E]&&(i[E].lastCount=x.length),e[E][S]=zn(x.length,x.mode)+4+D.getCharCountIndicator(x.mode,t))}}n=c}for(let r=0;r<n.length;r++)e[n[r]].end=0;return{map:e,table:i}}function Lr(o,t){let i,e=D.getBestModeForData(o);if(i=D.from(t,e),i!==D.BYTE&&i.bit<e.bit)throw new Error('"'+o+'" cannot be encoded with mode '+D.toString(i)+`.
 Suggested mode is: `+D.toString(e));switch(i===D.KANJI&&!Vi.isKanjiModeEnabled()&&(i=D.BYTE),i){case D.NUMERIC:return new Nr(o);case D.ALPHANUMERIC:return new Dr(o);case D.KANJI:return new Fr(o);case D.BYTE:return new Ur(o)}}Ot.fromArray=function(t){return t.reduce(function(i,e){return typeof e=="string"?i.push(Lr(e,null)):e.data&&i.push(Lr(e.data,e.mode)),i},[])};Ot.fromString=function(t,i){let e=qr(t,Vi.isKanjiModeEnabled()),n=ic(e),r=nc(n,i),s=ec.find_path(r.map,"start","end"),c=[];for(let h=1;h<s.length-1;h++)c.push(r.table[s[h]].node);return Ot.fromArray(tc(c))};Ot.rawSplit=function(t){return Ot.fromArray(qr(t,Vi.isKanjiModeEnabled()))}});var jr=N(Hr=>{"use strict";var Li=Xe(),Vn=Pi(),oc=tr(),rc=nr(),sc=or(),ac=ar(),Nn=cr(),Dn=Mn(),cc=ur(),Bi=br(),lc=Mr(),dc=Je(),Bn=Wr();function pc(o,t){let i=o.size,e=ac.getPositions(t);for(let n=0;n<e.length;n++){let r=e[n][0],s=e[n][1];for(let c=-1;c<=7;c++)if(!(r+c<=-1||i<=r+c))for(let h=-1;h<=7;h++)s+h<=-1||i<=s+h||(c>=0&&c<=6&&(h===0||h===6)||h>=0&&h<=6&&(c===0||c===6)||c>=2&&c<=4&&h>=2&&h<=4?o.set(r+c,s+h,!0,!0):o.set(r+c,s+h,!1,!0))}}function hc(o){let t=o.size;for(let i=8;i<t-8;i++){let e=i%2===0;o.set(i,6,e,!0),o.set(6,i,e,!0)}}function uc(o,t){let i=sc.getPositions(t);for(let e=0;e<i.length;e++){let n=i[e][0],r=i[e][1];for(let s=-2;s<=2;s++)for(let c=-2;c<=2;c++)s===-2||s===2||c===-2||c===2||s===0&&c===0?o.set(n+s,r+c,!0,!0):o.set(n+s,r+c,!1,!0)}}function mc(o,t){let i=o.size,e=Bi.getEncodedBits(t),n,r,s;for(let c=0;c<18;c++)n=Math.floor(c/3),r=c%3+i-8-3,s=(e>>c&1)===1,o.set(n,r,s,!0),o.set(r,n,s,!0)}function Ln(o,t,i){let e=o.size,n=lc.getEncodedBits(t,i),r,s;for(r=0;r<15;r++)s=(n>>r&1)===1,r<6?o.set(r,8,s,!0):r<8?o.set(r+1,8,s,!0):o.set(e-15+r,8,s,!0),r<8?o.set(8,e-r-1,s,!0):r<9?o.set(8,15-r-1+1,s,!0):o.set(8,15-r-1,s,!0);o.set(e-8,8,1,!0)}function gc(o,t){let i=o.size,e=-1,n=i-1,r=7,s=0;for(let c=i-1;c>0;c-=2)for(c===6&&c--;;){for(let h=0;h<2;h++)if(!o.isReserved(n,c-h)){let x=!1;s<t.length&&(x=(t[s]>>>r&1)===1),o.set(n,c-h,x),r--,r===-1&&(s++,r=7)}if(n+=e,n<0||i<=n){n-=e,e=-e;break}}}function fc(o,t,i){let e=new oc;i.forEach(function(h){e.put(h.mode.bit,4),e.put(h.getLength(),dc.getCharCountIndicator(h.mode,o)),h.write(e)});let n=Li.getSymbolTotalCodewords(o),r=Dn.getTotalCodewordsCount(o,t),s=(n-r)*8;for(e.getLengthInBits()+4<=s&&e.put(0,4);e.getLengthInBits()%8!==0;)e.putBit(0);let c=(s-e.getLengthInBits())/8;for(let h=0;h<c;h++)e.put(h%2?17:236,8);return _c(e,o,t)}function _c(o,t,i){let e=Li.getSymbolTotalCodewords(t),n=Dn.getTotalCodewordsCount(t,i),r=e-n,s=Dn.getBlocksCount(t,i),c=e%s,h=s-c,x=Math.floor(e/s),S=Math.floor(r/s),O=S+1,E=x-S,B=new cc(E),L=0,J=new Array(s),Me=new Array(s),W=0,H=new Uint8Array(o.buffer);for(let xe=0;xe<s;xe++){let ue=xe<h?S:O;J[xe]=H.slice(L,L+ue),Me[xe]=B.encode(J[xe]),L+=ue,W=Math.max(W,ue)}let ce=new Uint8Array(e),qe=0,oe,re;for(oe=0;oe<W;oe++)for(re=0;re<s;re++)oe<J[re].length&&(ce[qe++]=J[re][oe]);for(oe=0;oe<E;oe++)for(re=0;re<s;re++)ce[qe++]=Me[re][oe];return ce}function xc(o,t,i,e){let n;if(Array.isArray(o))n=Bn.fromArray(o);else if(typeof o=="string"){let x=t;if(!x){let S=Bn.rawSplit(o);x=Bi.getBestVersionForData(S,i)}n=Bn.fromString(o,x||40)}else throw new Error("Invalid data");let r=Bi.getBestVersionForData(n,i);if(!r)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=r;else if(t<r)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+r+`.
`);let s=fc(t,i,n),c=Li.getSymbolSize(t),h=new rc(c);return pc(h,t),hc(h),uc(h,t),Ln(h,i,0),t>=7&&mc(h,t),gc(h,s),isNaN(e)&&(e=Nn.getBestMask(h,Ln.bind(null,h,i))),Nn.applyMask(e,h),Ln(h,i,e),{modules:h,version:t,errorCorrectionLevel:i,maskPattern:e,segments:n}}Hr.create=function(t,i){if(typeof t>"u"||t==="")throw new Error("No input text");let e=Vn.M,n,r;return typeof i<"u"&&(e=Vn.from(i.errorCorrectionLevel,Vn.M),n=Bi.from(i.version),r=Nn.from(i.maskPattern),i.toSJISFunc&&Li.setToSJISFunction(i.toSJISFunc)),xc(t,n,e,r)}});var Un=N(rt=>{"use strict";function Yr(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let t=o.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+o);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),t.length===6&&t.push("F","F");let i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+t.slice(0,6).join("")}}rt.getOptions=function(t){t||(t={}),t.color||(t.color={});let i=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,e=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:e,scale:e?4:n,margin:i,color:{dark:Yr(t.color.dark||"#000000ff"),light:Yr(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};rt.getScale=function(t,i){return i.width&&i.width>=t+i.margin*2?i.width/(t+i.margin*2):i.scale};rt.getImageWidth=function(t,i){let e=rt.getScale(t,i);return Math.floor((t+i.margin*2)*e)};rt.qrToImageData=function(t,i,e){let n=i.modules.size,r=i.modules.data,s=rt.getScale(n,e),c=Math.floor((n+e.margin*2)*s),h=e.margin*s,x=[e.color.light,e.color.dark];for(let S=0;S<c;S++)for(let O=0;O<c;O++){let E=(S*c+O)*4,B=e.color.light;if(S>=h&&O>=h&&S<c-h&&O<c-h){let L=Math.floor((S-h)/s),J=Math.floor((O-h)/s);B=x[r[L*n+J]?1:0]}t[E++]=B.r,t[E++]=B.g,t[E++]=B.b,t[E]=B.a}}});var Qr=N(Ni=>{"use strict";var Fn=Un();function vc(o,t,i){o.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}function bc(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}Ni.render=function(t,i,e){let n=e,r=i;typeof n>"u"&&(!i||!i.getContext)&&(n=i,i=void 0),i||(r=bc()),n=Fn.getOptions(n);let s=Fn.getImageWidth(t.modules.size,n),c=r.getContext("2d"),h=c.createImageData(s,s);return Fn.qrToImageData(h.data,t,n),vc(c,r,s),c.putImageData(h,0,0),r};Ni.renderToDataURL=function(t,i,e){let n=e;typeof n>"u"&&(!i||!i.getContext)&&(n=i,i=void 0),n||(n={});let r=Ni.render(t,i,n),s=n.type||"image/png",c=n.rendererOpts||{};return r.toDataURL(s,c.quality)}});var Kr=N(Xr=>{"use strict";var Cc=Un();function Gr(o,t){let i=o.a/255,e=t+'="'+o.hex+'"';return i<1?e+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':e}function qn(o,t,i){let e=o+t;return typeof i<"u"&&(e+=" "+i),e}function yc(o,t,i){let e="",n=0,r=!1,s=0;for(let c=0;c<o.length;c++){let h=Math.floor(c%t),x=Math.floor(c/t);!h&&!r&&(r=!0),o[c]?(s++,c>0&&h>0&&o[c-1]||(e+=r?qn("M",h+i,.5+x+i):qn("m",n,0),n=0,r=!1),h+1<t&&o[c+1]||(e+=qn("h",s),s=0)):n++}return e}Xr.render=function(t,i,e){let n=Cc.getOptions(i),r=t.modules.size,s=t.modules.data,c=r+n.margin*2,h=n.color.light.a?"<path "+Gr(n.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",x="<path "+Gr(n.color.dark,"stroke")+' d="'+yc(s,r,n.margin)+'"/>',S='viewBox="0 0 '+c+" "+c+'"',E='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+S+' shape-rendering="crispEdges">'+h+x+`</svg>
`;return typeof e=="function"&&e(null,E),E}});var Zr=N(Zt=>{"use strict";var wc=Zo(),Wn=jr(),Jr=Qr(),Mc=Kr();function Hn(o,t,i,e,n){let r=[].slice.call(arguments,1),s=r.length,c=typeof r[s-1]=="function";if(!c&&!wc())throw new Error("Callback required as last argument");if(c){if(s<2)throw new Error("Too few arguments provided");s===2?(n=i,i=t,t=e=void 0):s===3&&(t.getContext&&typeof n>"u"?(n=e,e=void 0):(n=e,e=i,i=t,t=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(i=t,t=e=void 0):s===2&&!t.getContext&&(e=i,i=t,t=void 0),new Promise(function(h,x){try{let S=Wn.create(i,e);h(o(S,t,e))}catch(S){x(S)}})}try{let h=Wn.create(i,e);n(null,o(h,t,e))}catch(h){n(h)}}Zt.create=Wn.create;Zt.toCanvas=Hn.bind(null,Jr.render);Zt.toDataURL=Hn.bind(null,Jr.renderToDataURL);Zt.toString=Hn.bind(null,function(o,t,i){return Mc.render(o,i)})});var ts=N((Jp,Fi)=>{"use strict";(function(o,t,i,e){"use strict";var n=["","webkit","Moz","MS","ms","o"],r=t.createElement("div"),s="function",c=Math.round,h=Math.abs,x=Date.now;function S(a,l,u){return setTimeout(H(a,u),l)}function O(a,l,u){return Array.isArray(a)?(E(a,u[l],u),!0):!1}function E(a,l,u){var _;if(a)if(a.forEach)a.forEach(l,u);else if(a.length!==e)for(_=0;_<a.length;)l.call(u,a[_],_,a),_++;else for(_ in a)a.hasOwnProperty(_)&&l.call(u,a[_],_,a)}function B(a,l,u){var _="DEPRECATED METHOD: "+l+`
`+u+` AT 
`;return function(){var C=new Error("get-stack-trace"),P=C&&C.stack?C.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",z=o.console&&(o.console.warn||o.console.log);return z&&z.call(o.console,_,P),a.apply(this,arguments)}}var L;typeof Object.assign!="function"?L=function(l){if(l===e||l===null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(l),_=1;_<arguments.length;_++){var C=arguments[_];if(C!==e&&C!==null)for(var P in C)C.hasOwnProperty(P)&&(u[P]=C[P])}return u}:L=Object.assign;var J=B(function(l,u,_){for(var C=Object.keys(u),P=0;P<C.length;)(!_||_&&l[C[P]]===e)&&(l[C[P]]=u[C[P]]),P++;return l},"extend","Use `assign`."),Me=B(function(l,u){return J(l,u,!0)},"merge","Use `assign`.");function W(a,l,u){var _=l.prototype,C;C=a.prototype=Object.create(_),C.constructor=a,C._super=_,u&&L(C,u)}function H(a,l){return function(){return a.apply(l,arguments)}}function ce(a,l){return typeof a==s?a.apply(l&&l[0]||e,l):a}function qe(a,l){return a===e?l:a}function oe(a,l,u){E(lt(l),function(_){a.addEventListener(_,u,!1)})}function re(a,l,u){E(lt(l),function(_){a.removeEventListener(_,u,!1)})}function xe(a,l){for(;a;){if(a==l)return!0;a=a.parentNode}return!1}function ue(a,l){return a.indexOf(l)>-1}function lt(a){return a.trim().split(/\s+/g)}function We(a,l,u){if(a.indexOf&&!u)return a.indexOf(l);for(var _=0;_<a.length;){if(u&&a[_][u]==l||!u&&a[_]===l)return _;_++}return-1}function He(a){return Array.prototype.slice.call(a,0)}function dt(a,l,u){for(var _=[],C=[],P=0;P<a.length;){var z=l?a[P][l]:a[P];We(C,z)<0&&_.push(a[P]),C[P]=z,P++}return u&&(l?_=_.sort(function(se,he){return se[l]>he[l]}):_=_.sort()),_}function Ve(a,l){for(var u,_,C=l[0].toUpperCase()+l.slice(1),P=0;P<n.length;){if(u=n[P],_=u?u+C:l,_ in a)return _;P++}return e}var pi=1;function an(){return pi++}function hi(a){var l=a.ownerDocument||a;return l.defaultView||l.parentWindow||o}var pt=/mobile|tablet|ip(ad|hone|od)|android/i,At="ontouchstart"in o,je=Ve(o,"PointerEvent")!==e,Ye=At&&pt.test(navigator.userAgent),Rt="touch",ea="pen",cn="mouse",ta="kinect",ia=25,pe=1,$e=2,Z=4,me=8,ui=1,zt=2,Vt=4,Bt=8,Lt=16,Te=zt|Vt,et=Bt|Lt,ro=Te|et,so=["x","y"],mi=["clientX","clientY"];function ve(a,l){var u=this;this.manager=a,this.callback=l,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(_){ce(a.options.enable,[a])&&u.handler(_)},this.init()}ve.prototype={handler:function(){},init:function(){this.evEl&&oe(this.element,this.evEl,this.domHandler),this.evTarget&&oe(this.target,this.evTarget,this.domHandler),this.evWin&&oe(hi(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&re(this.element,this.evEl,this.domHandler),this.evTarget&&re(this.target,this.evTarget,this.domHandler),this.evWin&&re(hi(this.element),this.evWin,this.domHandler)}};function na(a){var l,u=a.options.inputClass;return u?l=u:je?l=dn:Ye?l=_i:At?l=pn:l=fi,new l(a,oa)}function oa(a,l,u){var _=u.pointers.length,C=u.changedPointers.length,P=l&pe&&_-C===0,z=l&(Z|me)&&_-C===0;u.isFirst=!!P,u.isFinal=!!z,P&&(a.session={}),u.eventType=l,ra(a,u),a.emit("hammer.input",u),a.recognize(u),a.session.prevInput=u}function ra(a,l){var u=a.session,_=l.pointers,C=_.length;u.firstInput||(u.firstInput=ao(l)),C>1&&!u.firstMultiple?u.firstMultiple=ao(l):C===1&&(u.firstMultiple=!1);var P=u.firstInput,z=u.firstMultiple,ie=z?z.center:P.center,se=l.center=co(_);l.timeStamp=x(),l.deltaTime=l.timeStamp-P.timeStamp,l.angle=ln(ie,se),l.distance=gi(ie,se),sa(u,l),l.offsetDirection=po(l.deltaX,l.deltaY);var he=lo(l.deltaTime,l.deltaX,l.deltaY);l.overallVelocityX=he.x,l.overallVelocityY=he.y,l.overallVelocity=h(he.x)>h(he.y)?he.x:he.y,l.scale=z?la(z.pointers,_):1,l.rotation=z?ca(z.pointers,_):0,l.maxPointers=u.prevInput?l.pointers.length>u.prevInput.maxPointers?l.pointers.length:u.prevInput.maxPointers:l.pointers.length,aa(u,l);var Ie=a.element;xe(l.srcEvent.target,Ie)&&(Ie=l.srcEvent.target),l.target=Ie}function sa(a,l){var u=l.center,_=a.offsetDelta||{},C=a.prevDelta||{},P=a.prevInput||{};(l.eventType===pe||P.eventType===Z)&&(C=a.prevDelta={x:P.deltaX||0,y:P.deltaY||0},_=a.offsetDelta={x:u.x,y:u.y}),l.deltaX=C.x+(u.x-_.x),l.deltaY=C.y+(u.y-_.y)}function aa(a,l){var u=a.lastInterval||l,_=l.timeStamp-u.timeStamp,C,P,z,ie;if(l.eventType!=me&&(_>ia||u.velocity===e)){var se=l.deltaX-u.deltaX,he=l.deltaY-u.deltaY,Ie=lo(_,se,he);P=Ie.x,z=Ie.y,C=h(Ie.x)>h(Ie.y)?Ie.x:Ie.y,ie=po(se,he),a.lastInterval=l}else C=u.velocity,P=u.velocityX,z=u.velocityY,ie=u.direction;l.velocity=C,l.velocityX=P,l.velocityY=z,l.direction=ie}function ao(a){for(var l=[],u=0;u<a.pointers.length;)l[u]={clientX:c(a.pointers[u].clientX),clientY:c(a.pointers[u].clientY)},u++;return{timeStamp:x(),pointers:l,center:co(l),deltaX:a.deltaX,deltaY:a.deltaY}}function co(a){var l=a.length;if(l===1)return{x:c(a[0].clientX),y:c(a[0].clientY)};for(var u=0,_=0,C=0;C<l;)u+=a[C].clientX,_+=a[C].clientY,C++;return{x:c(u/l),y:c(_/l)}}function lo(a,l,u){return{x:l/a||0,y:u/a||0}}function po(a,l){return a===l?ui:h(a)>=h(l)?a<0?zt:Vt:l<0?Bt:Lt}function gi(a,l,u){u||(u=so);var _=l[u[0]]-a[u[0]],C=l[u[1]]-a[u[1]];return Math.sqrt(_*_+C*C)}function ln(a,l,u){u||(u=so);var _=l[u[0]]-a[u[0]],C=l[u[1]]-a[u[1]];return Math.atan2(C,_)*180/Math.PI}function ca(a,l){return ln(l[1],l[0],mi)+ln(a[1],a[0],mi)}function la(a,l){return gi(l[0],l[1],mi)/gi(a[0],a[1],mi)}var da={mousedown:pe,mousemove:$e,mouseup:Z},pa="mousedown",ha="mousemove mouseup";function fi(){this.evEl=pa,this.evWin=ha,this.pressed=!1,ve.apply(this,arguments)}W(fi,ve,{handler:function(l){var u=da[l.type];u&pe&&l.button===0&&(this.pressed=!0),u&$e&&l.which!==1&&(u=Z),this.pressed&&(u&Z&&(this.pressed=!1),this.callback(this.manager,u,{pointers:[l],changedPointers:[l],pointerType:cn,srcEvent:l}))}});var ua={pointerdown:pe,pointermove:$e,pointerup:Z,pointercancel:me,pointerout:me},ma={2:Rt,3:ea,4:cn,5:ta},ho="pointerdown",uo="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(ho="MSPointerDown",uo="MSPointerMove MSPointerUp MSPointerCancel");function dn(){this.evEl=ho,this.evWin=uo,ve.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}W(dn,ve,{handler:function(l){var u=this.store,_=!1,C=l.type.toLowerCase().replace("ms",""),P=ua[C],z=ma[l.pointerType]||l.pointerType,ie=z==Rt,se=We(u,l.pointerId,"pointerId");P&pe&&(l.button===0||ie)?se<0&&(u.push(l),se=u.length-1):P&(Z|me)&&(_=!0),!(se<0)&&(u[se]=l,this.callback(this.manager,P,{pointers:u,changedPointers:[l],pointerType:z,srcEvent:l}),_&&u.splice(se,1))}});var ga={touchstart:pe,touchmove:$e,touchend:Z,touchcancel:me},fa="touchstart",_a="touchstart touchmove touchend touchcancel";function mo(){this.evTarget=fa,this.evWin=_a,this.started=!1,ve.apply(this,arguments)}W(mo,ve,{handler:function(l){var u=ga[l.type];if(u===pe&&(this.started=!0),!!this.started){var _=xa.call(this,l,u);u&(Z|me)&&_[0].length-_[1].length===0&&(this.started=!1),this.callback(this.manager,u,{pointers:_[0],changedPointers:_[1],pointerType:Rt,srcEvent:l})}}});function xa(a,l){var u=He(a.touches),_=He(a.changedTouches);return l&(Z|me)&&(u=dt(u.concat(_),"identifier",!0)),[u,_]}var va={touchstart:pe,touchmove:$e,touchend:Z,touchcancel:me},ba="touchstart touchmove touchend touchcancel";function _i(){this.evTarget=ba,this.targetIds={},ve.apply(this,arguments)}W(_i,ve,{handler:function(l){var u=va[l.type],_=Ca.call(this,l,u);_&&this.callback(this.manager,u,{pointers:_[0],changedPointers:_[1],pointerType:Rt,srcEvent:l})}});function Ca(a,l){var u=He(a.touches),_=this.targetIds;if(l&(pe|$e)&&u.length===1)return _[u[0].identifier]=!0,[u,u];var C,P,z=He(a.changedTouches),ie=[],se=this.target;if(P=u.filter(function(he){return xe(he.target,se)}),l===pe)for(C=0;C<P.length;)_[P[C].identifier]=!0,C++;for(C=0;C<z.length;)_[z[C].identifier]&&ie.push(z[C]),l&(Z|me)&&delete _[z[C].identifier],C++;if(ie.length)return[dt(P.concat(ie),"identifier",!0),ie]}var ya=2500,go=25;function pn(){ve.apply(this,arguments);var a=H(this.handler,this);this.touch=new _i(this.manager,a),this.mouse=new fi(this.manager,a),this.primaryTouch=null,this.lastTouches=[]}W(pn,ve,{handler:function(l,u,_){var C=_.pointerType==Rt,P=_.pointerType==cn;if(!(P&&_.sourceCapabilities&&_.sourceCapabilities.firesTouchEvents)){if(C)wa.call(this,u,_);else if(P&&Ma.call(this,_))return;this.callback(l,u,_)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function wa(a,l){a&pe?(this.primaryTouch=l.changedPointers[0].identifier,fo.call(this,l)):a&(Z|me)&&fo.call(this,l)}function fo(a){var l=a.changedPointers[0];if(l.identifier===this.primaryTouch){var u={x:l.clientX,y:l.clientY};this.lastTouches.push(u);var _=this.lastTouches,C=function(){var P=_.indexOf(u);P>-1&&_.splice(P,1)};setTimeout(C,ya)}}function Ma(a){for(var l=a.srcEvent.clientX,u=a.srcEvent.clientY,_=0;_<this.lastTouches.length;_++){var C=this.lastTouches[_],P=Math.abs(l-C.x),z=Math.abs(u-C.y);if(P<=go&&z<=go)return!0}return!1}var _o=Ve(r.style,"touchAction"),xo=_o!==e,vo="compute",bo="auto",hn="manipulation",tt="none",Nt="pan-x",Dt="pan-y",xi=Ea();function un(a,l){this.manager=a,this.set(l)}un.prototype={set:function(a){a==vo&&(a=this.compute()),xo&&this.manager.element.style&&xi[a]&&(this.manager.element.style[_o]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return E(this.manager.recognizers,function(l){ce(l.options.enable,[l])&&(a=a.concat(l.getTouchAction()))}),Sa(a.join(" "))},preventDefaults:function(a){var l=a.srcEvent,u=a.offsetDirection;if(this.manager.session.prevented){l.preventDefault();return}var _=this.actions,C=ue(_,tt)&&!xi[tt],P=ue(_,Dt)&&!xi[Dt],z=ue(_,Nt)&&!xi[Nt];if(C){var ie=a.pointers.length===1,se=a.distance<2,he=a.deltaTime<250;if(ie&&se&&he)return}if(!(z&&P)&&(C||P&&u&Te||z&&u&et))return this.preventSrc(l)},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};function Sa(a){if(ue(a,tt))return tt;var l=ue(a,Nt),u=ue(a,Dt);return l&&u?tt:l||u?l?Nt:Dt:ue(a,hn)?hn:bo}function Ea(){if(!xo)return!1;var a={},l=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(u){a[u]=l?o.CSS.supports("touch-action",u):!0}),a}var vi=1,be=2,ht=4,Qe=8,Be=Qe,Ut=16,ke=32;function Le(a){this.options=L({},this.defaults,a||{}),this.id=an(),this.manager=null,this.options.enable=qe(this.options.enable,!0),this.state=vi,this.simultaneous={},this.requireFail=[]}Le.prototype={defaults:{},set:function(a){return L(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(O(a,"recognizeWith",this))return this;var l=this.simultaneous;return a=bi(a,this),l[a.id]||(l[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return O(a,"dropRecognizeWith",this)?this:(a=bi(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(O(a,"requireFailure",this))return this;var l=this.requireFail;return a=bi(a,this),We(l,a)===-1&&(l.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(O(a,"dropRequireFailure",this))return this;a=bi(a,this);var l=We(this.requireFail,a);return l>-1&&this.requireFail.splice(l,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){var l=this,u=this.state;function _(C){l.manager.emit(C,a)}u<Qe&&_(l.options.event+Co(u)),_(l.options.event),a.additionalEvent&&_(a.additionalEvent),u>=Qe&&_(l.options.event+Co(u))},tryEmit:function(a){if(this.canEmit())return this.emit(a);this.state=ke},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(ke|vi)))return!1;a++}return!0},recognize:function(a){var l=L({},a);if(!ce(this.options.enable,[this,l])){this.reset(),this.state=ke;return}this.state&(Be|Ut|ke)&&(this.state=vi),this.state=this.process(l),this.state&(be|ht|Qe|Ut)&&this.tryEmit(l)},process:function(a){},getTouchAction:function(){},reset:function(){}};function Co(a){return a&Ut?"cancel":a&Qe?"end":a&ht?"move":a&be?"start":""}function yo(a){return a==Lt?"down":a==Bt?"up":a==zt?"left":a==Vt?"right":""}function bi(a,l){var u=l.manager;return u?u.get(a):a}function Se(){Le.apply(this,arguments)}W(Se,Le,{defaults:{pointers:1},attrTest:function(a){var l=this.options.pointers;return l===0||a.pointers.length===l},process:function(a){var l=this.state,u=a.eventType,_=l&(be|ht),C=this.attrTest(a);return _&&(u&me||!C)?l|Ut:_||C?u&Z?l|Qe:l&be?l|ht:be:ke}});function Ci(){Se.apply(this,arguments),this.pX=null,this.pY=null}W(Ci,Se,{defaults:{event:"pan",threshold:10,pointers:1,direction:ro},getTouchAction:function(){var a=this.options.direction,l=[];return a&Te&&l.push(Dt),a&et&&l.push(Nt),l},directionTest:function(a){var l=this.options,u=!0,_=a.distance,C=a.direction,P=a.deltaX,z=a.deltaY;return C&l.direction||(l.direction&Te?(C=P===0?ui:P<0?zt:Vt,u=P!=this.pX,_=Math.abs(a.deltaX)):(C=z===0?ui:z<0?Bt:Lt,u=z!=this.pY,_=Math.abs(a.deltaY))),a.direction=C,u&&_>l.threshold&&C&l.direction},attrTest:function(a){return Se.prototype.attrTest.call(this,a)&&(this.state&be||!(this.state&be)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var l=yo(a.direction);l&&(a.additionalEvent=this.options.event+l),this._super.emit.call(this,a)}});function mn(){Se.apply(this,arguments)}W(mn,Se,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&be)},emit:function(a){if(a.scale!==1){var l=a.scale<1?"in":"out";a.additionalEvent=this.options.event+l}this._super.emit.call(this,a)}});function gn(){Le.apply(this,arguments),this._timer=null,this._input=null}W(gn,Le,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bo]},process:function(a){var l=this.options,u=a.pointers.length===l.pointers,_=a.distance<l.threshold,C=a.deltaTime>l.time;if(this._input=a,!_||!u||a.eventType&(Z|me)&&!C)this.reset();else if(a.eventType&pe)this.reset(),this._timer=S(function(){this.state=Be,this.tryEmit()},l.time,this);else if(a.eventType&Z)return Be;return ke},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===Be&&(a&&a.eventType&Z?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=x(),this.manager.emit(this.options.event,this._input)))}});function fn(){Se.apply(this,arguments)}W(fn,Se,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&be)}});function _n(){Se.apply(this,arguments)}W(_n,Se,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Te|et,pointers:1},getTouchAction:function(){return Ci.prototype.getTouchAction.call(this)},attrTest:function(a){var l=this.options.direction,u;return l&(Te|et)?u=a.overallVelocity:l&Te?u=a.overallVelocityX:l&et&&(u=a.overallVelocityY),this._super.attrTest.call(this,a)&&l&a.offsetDirection&&a.distance>this.options.threshold&&a.maxPointers==this.options.pointers&&h(u)>this.options.velocity&&a.eventType&Z},emit:function(a){var l=yo(a.offsetDirection);l&&this.manager.emit(this.options.event+l,a),this.manager.emit(this.options.event,a)}});function yi(){Le.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}W(yi,Le,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[hn]},process:function(a){var l=this.options,u=a.pointers.length===l.pointers,_=a.distance<l.threshold,C=a.deltaTime<l.time;if(this.reset(),a.eventType&pe&&this.count===0)return this.failTimeout();if(_&&C&&u){if(a.eventType!=Z)return this.failTimeout();var P=this.pTime?a.timeStamp-this.pTime<l.interval:!0,z=!this.pCenter||gi(this.pCenter,a.center)<l.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,!z||!P?this.count=1:this.count+=1,this._input=a;var ie=this.count%l.taps;if(ie===0)return this.hasRequireFailures()?(this._timer=S(function(){this.state=Be,this.tryEmit()},l.interval,this),be):Be}return ke},failTimeout:function(){return this._timer=S(function(){this.state=ke},this.options.interval,this),ke},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Be&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ne(a,l){return l=l||{},l.recognizers=qe(l.recognizers,Ne.defaults.preset),new xn(a,l)}Ne.VERSION="2.0.7",Ne.defaults={domEvents:!1,touchAction:vo,enable:!0,inputTarget:null,inputClass:null,preset:[[fn,{enable:!1}],[mn,{enable:!1},["rotate"]],[_n,{direction:Te}],[Ci,{direction:Te},["swipe"]],[yi],[yi,{event:"doubletap",taps:2},["tap"]],[gn]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Oa=1,wo=2;function xn(a,l){this.options=L({},Ne.defaults,l||{}),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=a,this.input=na(this),this.touchAction=new un(this,this.options.touchAction),Mo(this,!0),E(this.options.recognizers,function(u){var _=this.add(new u[0](u[1]));u[2]&&_.recognizeWith(u[2]),u[3]&&_.requireFailure(u[3])},this)}xn.prototype={set:function(a){return L(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?wo:Oa},recognize:function(a){var l=this.session;if(!l.stopped){this.touchAction.preventDefaults(a);var u,_=this.recognizers,C=l.curRecognizer;(!C||C&&C.state&Be)&&(C=l.curRecognizer=null);for(var P=0;P<_.length;)u=_[P],l.stopped!==wo&&(!C||u==C||u.canRecognizeWith(C))?u.recognize(a):u.reset(),!C&&u.state&(be|ht|Qe)&&(C=l.curRecognizer=u),P++}},get:function(a){if(a instanceof Le)return a;for(var l=this.recognizers,u=0;u<l.length;u++)if(l[u].options.event==a)return l[u];return null},add:function(a){if(O(a,"add",this))return this;var l=this.get(a.options.event);return l&&this.remove(l),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(O(a,"remove",this))return this;if(a=this.get(a),a){var l=this.recognizers,u=We(l,a);u!==-1&&(l.splice(u,1),this.touchAction.update())}return this},on:function(a,l){if(a!==e&&l!==e){var u=this.handlers;return E(lt(a),function(_){u[_]=u[_]||[],u[_].push(l)}),this}},off:function(a,l){if(a!==e){var u=this.handlers;return E(lt(a),function(_){l?u[_]&&u[_].splice(We(u[_],l),1):delete u[_]}),this}},emit:function(a,l){this.options.domEvents&&Pa(a,l);var u=this.handlers[a]&&this.handlers[a].slice();if(!(!u||!u.length)){l.type=a,l.preventDefault=function(){l.srcEvent.preventDefault()};for(var _=0;_<u.length;)u[_](l),_++}},destroy:function(){this.element&&Mo(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Mo(a,l){var u=a.element;if(u.style){var _;E(a.options.cssProps,function(C,P){_=Ve(u.style,P),l?(a.oldCssProps[_]=u.style[_],u.style[_]=C):u.style[_]=a.oldCssProps[_]||""}),l||(a.oldCssProps={})}}function Pa(a,l){var u=t.createEvent("Event");u.initEvent(a,!0,!0),u.gesture=l,l.target.dispatchEvent(u)}L(Ne,{INPUT_START:pe,INPUT_MOVE:$e,INPUT_END:Z,INPUT_CANCEL:me,STATE_POSSIBLE:vi,STATE_BEGAN:be,STATE_CHANGED:ht,STATE_ENDED:Qe,STATE_RECOGNIZED:Be,STATE_CANCELLED:Ut,STATE_FAILED:ke,DIRECTION_NONE:ui,DIRECTION_LEFT:zt,DIRECTION_RIGHT:Vt,DIRECTION_UP:Bt,DIRECTION_DOWN:Lt,DIRECTION_HORIZONTAL:Te,DIRECTION_VERTICAL:et,DIRECTION_ALL:ro,Manager:xn,Input:ve,TouchAction:un,TouchInput:_i,MouseInput:fi,PointerEventInput:dn,TouchMouseInput:pn,SingleTouchInput:mo,Recognizer:Le,AttrRecognizer:Se,Tap:yi,Pan:Ci,Swipe:_n,Pinch:mn,Rotate:fn,Press:gn,on:oe,off:re,each:E,merge:Me,extend:J,assign:L,inherit:W,bindFn:H,prefixed:Ve});var Ta=typeof o<"u"?o:typeof self<"u"?self:{};Ta.Hammer=Ne,typeof define=="function"&&define.amd?define(function(){return Ne}):typeof Fi<"u"&&Fi.exports?Fi.exports=Ne:o[i]=Ne})(window,document,"Hammer")});var Pt=wi(Zr(),1);var Sc=["qrcElement"],Di=(()=>{let t=class t{constructor(e,n){this.renderer=e,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new le,this.context=null}ngOnChanges(){return ae(this,null,function*(){yield this.createQRCode()})}isValidQrCodeText(e){return this.allowEmptyString===!1?!(typeof e>"u"||e===""||e==="null"||e===null):!(typeof e>"u")}toDataURL(e){return new Promise((n,r)=>{(0,Pt.toDataURL)(this.qrdata,e,(s,c)=>{s?r(s):n(c)})})}toCanvas(e,n){return new Promise((r,s)=>{(0,Pt.toCanvas)(e,this.qrdata,n,c=>{c?s(c):r("success")})})}toSVG(e){return new Promise((n,r)=>{(0,Pt.toString)(this.qrdata,e,(s,c)=>{s?r(s):n(c)})})}renderElement(e){for(let n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){return ae(this,null,function*(){this.version&&this.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),this.version=40):this.version&&this.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),this.version=1):this.version!==void 0&&isNaN(this.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),this.version=void 0);try{if(!this.isValidQrCodeText(this.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");this.isValidQrCodeText(this.qrdata)&&this.qrdata===""&&(this.qrdata=" ");let e={color:{dark:this.colorDark,light:this.colorLight},errorCorrectionLevel:this.errorCorrectionLevel,margin:this.margin,scale:this.scale,version:this.version,width:this.width},n=this.imageSrc,r=this.imageHeight||40,s=this.imageWidth||40;switch(this.elementType){case"canvas":{let c=this.renderer.createElement("canvas");this.context=c.getContext("2d"),this.toCanvas(c,e).then(()=>{if(this.ariaLabel&&this.renderer.setAttribute(c,"aria-label",`${this.ariaLabel}`),this.title&&this.renderer.setAttribute(c,"title",`${this.title}`),n&&this.context){this.centerImage=new Image(s,r),n!==this.centerImage.src&&(this.centerImage.src=n),r!==this.centerImage.height&&(this.centerImage.height=r),s!==this.centerImage.width&&(this.centerImage.width=s);let h=this.centerImage;h&&(h.onload=()=>{this.context?.drawImage(h,c.width/2-s/2,c.height/2-r/2,s,r)})}this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] canvas error:",h)});break}case"svg":{let c=this.renderer.createElement("div");this.toSVG(e).then(h=>{this.renderer.setProperty(c,"innerHTML",h);let x=c.firstChild;this.renderer.setAttribute(x,"height",`${this.width}`),this.renderer.setAttribute(x,"width",`${this.width}`),this.renderElement(x),this.emitQRCodeURL(x)}).catch(h=>{console.error("[angularx-qrcode] svg error:",h)});break}case"url":case"img":default:{let c=this.renderer.createElement("img");this.toDataURL(e).then(h=>{this.alt&&c.setAttribute("alt",this.alt),this.ariaLabel&&c.setAttribute("aria-label",this.ariaLabel),c.setAttribute("src",h),this.title&&c.setAttribute("title",this.title),this.renderElement(c),this.emitQRCodeURL(c)}).catch(h=>{console.error("[angularx-qrcode] img/url error:",h)})}}}catch(e){console.error("[angularx-qrcode] Error generating QR Code:",e.message)}})}emitQRCodeURL(e){let n=e.constructor.name;if(n===SVGSVGElement.name){let s=e.outerHTML,c=new Blob([s],{type:"image/svg+xml"}),h=URL.createObjectURL(c),x=this.sanitizer.bypassSecurityTrustUrl(h);this.qrCodeURL.emit(x);return}let r="";n===HTMLCanvasElement.name&&(r=e.toDataURL("image/png")),n===HTMLImageElement.name&&(r=e.src),fetch(r).then(s=>s.blob()).then(s=>URL.createObjectURL(s)).then(s=>this.sanitizer.bypassSecurityTrustUrl(s)).then(s=>{this.qrCodeURL.emit(s)}).catch(s=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+s)})}};t.\u0275fac=function(n){return new(n||t)(I(ko),I(bt))},t.\u0275cmp=A({type:t,selectors:[["qrcode"]],viewQuery:function(n,r){if(n&1&&qt(Sc,7),n&2){let s;Wt(s=Ht())&&(r.qrcElement=s.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[ge],decls:2,vars:2,consts:[["qrcElement",""]],template:function(n,r){n&1&&y(0,"div",null,0),n&2&&Ao(r.cssClass)},encapsulation:2,changeDetection:0});let o=t;return o})(),Ui=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gt({type:t}),t.\u0275inj=mt({});let o=t;return o})();var xh=wi(ts());var Ec=["wrapper"],Oc=["sourceImage"];function Pc(o,t){if(o&1){let i=R();d(0,"img",5,1),M("load",function(){v(i);let n=f();return b(n.imageLoadedInView())})("mousedown",function(n){v(i);let r=f();return b(r.startMove(n,r.moveTypes.Drag))})("touchstart",function(n){v(i);let r=f();return b(r.startMove(n,r.moveTypes.Drag))})("error",function(n){v(i);let r=f();return b(r.loadImageError(n))}),p()}if(o&2){let i=f();ft("visibility",i.imageVisible?"visible":"hidden")("transform",i.safeTransformStyle),Mi("ngx-ic-draggable",!i.disabled&&i.allowMoveImage),w("src",i.safeImgDataUrl,j),bn("alt",i.imageAltText)}}function Tc(o,t){if(o&1){let i=R();Ro(0),d(1,"span",9),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"topleft"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"topleft"))}),y(2,"span",10),p(),d(3,"span",11),y(4,"span",10),p(),d(5,"span",12),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"topright"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"topright"))}),y(6,"span",10),p(),d(7,"span",13),y(8,"span",10),p(),d(9,"span",14),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottomright"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottomright"))}),y(10,"span",10),p(),d(11,"span",15),y(12,"span",10),p(),d(13,"span",16),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottomleft"))}),y(14,"span",10),p(),d(15,"span",17),y(16,"span",10),p(),d(17,"span",18),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"top"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"top"))}),p(),d(18,"span",19),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"right"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"right"))}),p(),d(19,"span",20),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottom"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"bottom"))}),p(),d(20,"span",21),M("mousedown",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"left"))})("touchstart",function(n){v(i);let r=f(2);return b(r.startMove(n,r.moveTypes.Resize,"left"))}),p(),zo()}}function kc(o,t){if(o&1){let i=R();d(0,"div",6),M("keydown",function(n){v(i);let r=f();return b(r.keyboardAccess(n))}),d(1,"div",7),M("mousedown",function(n){v(i);let r=f();return b(r.startMove(n,r.moveTypes.Move))})("touchstart",function(n){v(i);let r=f();return b(r.startMove(n,r.moveTypes.Move))}),p(),T(2,Tc,21,0,"ng-container",8),p()}if(o&2){let i=f();ft("top",i.cropper.y1,"px")("left",i.cropper.x1,"px")("width",i.cropper.x2-i.cropper.x1,"px")("height",i.cropper.y2-i.cropper.y1,"px")("margin-left",i.alignImage==="center"?i.marginLeft:null)("visibility",i.imageVisible?"visible":"hidden"),Mi("ngx-ic-round",i.roundCropper),bn("aria-label",i.cropperFrameAriaLabel),m(2),w("ngIf",!i.hideResizeSquares)}}var jn=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(t){Object.keys(t).filter(i=>i in this).forEach(i=>this[i]=t[i]),this.validateOptions()}setOptionsFromChanges(t){Object.keys(t).filter(i=>i in this).forEach(i=>this[i]=t[i].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},we=function(o){return o.Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",o}(we||{});function Ic(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function Ac(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function Rc(o,t){switch(o){case"ArrowUp":return{clientX:0,clientY:t*-1};case"ArrowRight":return{clientX:t,clientY:0};case"ArrowDown":return{clientX:0,clientY:t};case"ArrowLeft":default:return{clientX:t*-1,clientY:0}}}function zc(o,t,i){let e=o.width,n=o.height;t=Math.round(t),i=Math.round(i);let r=e/t,s=n/i,c=Math.ceil(r/2),h=Math.ceil(s/2),x=o.getContext("2d");if(x){let S=x.getImageData(0,0,e,n),O=x.createImageData(t,i),E=S.data,B=O.data;for(let L=0;L<i;L++)for(let J=0;J<t;J++){let Me=(J+L*t)*4,W=L*s,H=0,ce=0,qe=0,oe=0,re=0,xe=0,ue=0,lt=Math.floor(J*r),We=Math.floor(L*s),He=Math.ceil((J+1)*r),dt=Math.ceil((L+1)*s);He=Math.min(He,e),dt=Math.min(dt,n);for(let Ve=We;Ve<dt;Ve++){let pi=Math.abs(W-Ve)/h,an=J*r,hi=pi*pi;for(let pt=lt;pt<He;pt++){let At=Math.abs(an-pt)/c,je=Math.sqrt(hi+At*At);if(je>=1)continue;H=2*je*je*je-3*je*je+1;let Ye=4*(pt+Ve*e);ue+=H*E[Ye+3],qe+=H,E[Ye+3]<255&&(H=H*E[Ye+3]/250),oe+=H*E[Ye],re+=H*E[Ye+1],xe+=H*E[Ye+2],ce+=H}}B[Me]=oe/ce,B[Me+1]=re/ce,B[Me+2]=xe/ce,B[Me+3]=ue/qe}o.width=t,o.height=i,x.putImageData(O,0,0)}}function is(o,t){return o/100*t}var Vc=(()=>{let t=class t{crop(e,n,r,s,c){let h=this.getImagePosition(e,n,r,c),x=h.x2-h.x1,S=h.y2-h.y1,O=document.createElement("canvas");O.width=x,O.height=S;let E=O.getContext("2d");if(!E)return null;r.backgroundColor!=null&&(E.fillStyle=r.backgroundColor,E.fillRect(0,0,x,S));let B=(r.transform.scale||1)*(r.transform.flipH?-1:1),L=(r.transform.scale||1)*(r.transform.flipV?-1:1),{translateH:J,translateV:Me}=this.getCanvasTranslate(e,r,c),W=e.transformed;E.setTransform(B,0,0,L,W.size.width/2+J,W.size.height/2+Me),E.translate(-h.x1/B,-h.y1/L),E.rotate((r.transform.rotate||0)*Math.PI/180),E.drawImage(W.image,-W.size.width/2,-W.size.height/2);let H={width:x,height:S,imagePosition:h,cropperPosition:Ee({},n)};r.containWithinAspectRatio&&(H.offsetImagePosition=this.getOffsetImagePosition(e,n,r,c));let ce=this.getResizeRatio(x,S,r);return ce!==1&&(H.width=Math.round(x*ce),H.height=r.maintainAspectRatio?Math.round(H.width/r.aspectRatio):Math.round(S*ce),zc(O,H.width,H.height)),s==="blob"?this.cropToBlob(H,O,r):(H.base64=O.toDataURL("image/"+r.format,this.getQuality(r)),H)}cropToBlob(e,n,r){return ae(this,null,function*(){return e.blob=yield new Promise(s=>n.toBlob(s,"image/"+r.format,this.getQuality(r))),e.blob&&(e.objectUrl=URL.createObjectURL(e.blob)),e})}getCanvasTranslate(e,n,r){if(n.transform.translateUnit==="px"){let s=this.getRatio(e,r);return{translateH:(n.transform.translateH||0)*s,translateV:(n.transform.translateV||0)*s}}else return{translateH:n.transform.translateH?is(n.transform.translateH,e.transformed.size.width):0,translateV:n.transform.translateV?is(n.transform.translateV,e.transformed.size.height):0}}getRatio(e,n){return e.transformed.size.width/n.width}getImagePosition(e,n,r,s){let c=this.getRatio(e,s),h={x1:Math.round(n.x1*c),y1:Math.round(n.y1*c),x2:Math.round(n.x2*c),y2:Math.round(n.y2*c)};return r.containWithinAspectRatio||(h.x1=Math.max(h.x1,0),h.y1=Math.max(h.y1,0),h.x2=Math.min(h.x2,e.transformed.size.width),h.y2=Math.min(h.y2,e.transformed.size.height)),h}getOffsetImagePosition(e,n,r,s){let c=r.canvasRotation+e.exifTransform.rotate,h=this.getRatio(e,s),x,S;c%2?(x=(e.transformed.size.width-e.original.size.height)/2,S=(e.transformed.size.height-e.original.size.width)/2):(x=(e.transformed.size.width-e.original.size.width)/2,S=(e.transformed.size.height-e.original.size.height)/2);let O={x1:Math.round(n.x1*h)-x,y1:Math.round(n.y1*h)-S,x2:Math.round(n.x2*h)-x,y2:Math.round(n.y2*h)-S};return r.containWithinAspectRatio||(O.x1=Math.max(O.x1,0),O.y1=Math.max(O.y1,0),O.x2=Math.min(O.x2,e.transformed.size.width),O.y2=Math.min(O.y2,e.transformed.size.height)),O}getResizeRatio(e,n,r){let s=r.resizeToWidth/e,c=r.resizeToHeight/n,h=new Array;r.resizeToWidth>0&&h.push(s),r.resizeToHeight>0&&h.push(c);let x=h.length===0?1:Math.min(...h);return x>1&&!r.onlyScaleDown?x:Math.min(x,1)}getQuality(e){return Math.min(1,Math.max(0,e.imageQuality/100))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})(),Bc=(()=>{let t=class t{resetCropperPosition(e,n,r,s){if(e?.nativeElement)if(r.cropperStaticHeight&&r.cropperStaticWidth)n.x1=0,n.x2=s.width>r.cropperStaticWidth?r.cropperStaticWidth:s.width,n.y1=0,n.y2=s.height>r.cropperStaticHeight?r.cropperStaticHeight:s.height;else{let c=Math.min(r.cropperScaledMaxWidth,s.width),h=Math.min(r.cropperScaledMaxHeight,s.height);if(!r.maintainAspectRatio)n.x1=0,n.x2=c,n.y1=0,n.y2=h;else if(s.width/r.aspectRatio<s.height){n.x1=0,n.x2=c;let x=c/r.aspectRatio;n.y1=(s.height-x)/2,n.y2=n.y1+x}else{n.y1=0,n.y2=h;let x=h*r.aspectRatio;n.x1=(s.width-x)/2,n.x2=n.x1+x}}}move(e,n,r){let s=this.getClientX(e)-n.clientX,c=this.getClientY(e)-n.clientY;r.x1=n.x1+s,r.y1=n.y1+c,r.x2=n.x2+s,r.y2=n.y2+c}resize(e,n,r,s,c){let h=this.getClientX(e)-n.clientX,x=this.getClientY(e)-n.clientY;switch(n.position){case"left":r.x1=Math.min(Math.max(n.x1+h,r.x2-c.cropperScaledMaxWidth),r.x2-c.cropperScaledMinWidth);break;case"topleft":r.x1=Math.min(Math.max(n.x1+h,r.x2-c.cropperScaledMaxWidth),r.x2-c.cropperScaledMinWidth),r.y1=Math.min(Math.max(n.y1+x,r.y2-c.cropperScaledMaxHeight),r.y2-c.cropperScaledMinHeight);break;case"top":r.y1=Math.min(Math.max(n.y1+x,r.y2-c.cropperScaledMaxHeight),r.y2-c.cropperScaledMinHeight);break;case"topright":r.x2=Math.max(Math.min(n.x2+h,r.x1+c.cropperScaledMaxWidth),r.x1+c.cropperScaledMinWidth),r.y1=Math.min(Math.max(n.y1+x,r.y2-c.cropperScaledMaxHeight),r.y2-c.cropperScaledMinHeight);break;case"right":r.x2=Math.max(Math.min(n.x2+h,r.x1+c.cropperScaledMaxWidth),r.x1+c.cropperScaledMinWidth);break;case"bottomright":r.x2=Math.max(Math.min(n.x2+h,r.x1+c.cropperScaledMaxWidth),r.x1+c.cropperScaledMinWidth),r.y2=Math.max(Math.min(n.y2+x,r.y1+c.cropperScaledMaxHeight),r.y1+c.cropperScaledMinHeight);break;case"bottom":r.y2=Math.max(Math.min(n.y2+x,r.y1+c.cropperScaledMaxHeight),r.y1+c.cropperScaledMinHeight);break;case"bottomleft":r.x1=Math.min(Math.max(n.x1+h,r.x2-c.cropperScaledMaxWidth),r.x2-c.cropperScaledMinWidth),r.y2=Math.max(Math.min(n.y2+x,r.y1+c.cropperScaledMaxHeight),r.y1+c.cropperScaledMinHeight);break;case"center":let S=e.scale,O=Math.min(Math.max(c.cropperScaledMinWidth,Math.abs(n.x2-n.x1)*S),c.cropperScaledMaxWidth),E=Math.min(Math.max(c.cropperScaledMinHeight,Math.abs(n.y2-n.y1)*S),c.cropperScaledMaxHeight);r.x1=n.clientX-O/2,r.x2=n.clientX+O/2,r.y1=n.clientY-E/2,r.y2=n.clientY+E/2,r.x1<0?(r.x2-=r.x1,r.x1=0):r.x2>s.width&&(r.x1-=r.x2-s.width,r.x2=s.width),r.y1<0?(r.y2-=r.y1,r.y1=0):r.y2>s.height&&(r.y1-=r.y2-s.height,r.y2=s.height);break}c.maintainAspectRatio&&this.checkAspectRatio(n.position,r,s,c)}checkAspectRatio(e,n,r,s){let c=0,h=0;switch(e){case"top":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,c=Math.max(n.x2-r.width,0),h=Math.max(0-n.y1,0),(c>0||h>0)&&(n.x2-=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y1+=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,c=Math.max(n.x2-r.width,0),h=Math.max(n.y2-r.height,0),(c>0||h>0)&&(n.x2-=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y2-=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,c=Math.max(0-n.x1,0),h=Math.max(0-n.y1,0),(c>0||h>0)&&(n.x1+=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y1+=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/s.aspectRatio,c=Math.max(n.x2-r.width,0),h=Math.max(0-n.y1,0),(c>0||h>0)&&(n.x2-=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y1+=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,c=Math.max(n.x2-r.width,0),h=Math.max(n.y2-r.height,0),(c>0||h>0)&&(n.x2-=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y2-=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio,c=Math.max(0-n.x1,0),h=Math.max(n.y2-r.height,0),(c>0||h>0)&&(n.x1+=h*s.aspectRatio>c?h*s.aspectRatio:c,n.y2-=h*s.aspectRatio>c?h:c/s.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*s.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/s.aspectRatio;let x=Math.max(0-n.x1,0),S=Math.max(n.x2-r.width,0),O=Math.max(n.y2-r.height,0),E=Math.max(0-n.y1,0);(x>0||S>0||O>0||E>0)&&(n.x1+=O*s.aspectRatio>x?O*s.aspectRatio:x,n.x2-=E*s.aspectRatio>S?E*s.aspectRatio:S,n.y1+=E*s.aspectRatio>S?E:S/s.aspectRatio,n.y2-=O*s.aspectRatio>x?O:x/s.aspectRatio);break}}getClientX(e){return"touches"in e&&e.touches[0]?e.touches[0].clientX:"clientX"in e?e.clientX:0}getClientY(e){return"touches"in e&&e.touches[0]?e.touches[0].clientY:"clientX"in e?e.clientY:0}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})(),Lc="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function Nc(){return new Promise(o=>{let t=new Image;t.onload=()=>{let i=t.width===1&&t.height===2;o(i)},t.src=Lc})}function Dc(o){switch(typeof o=="object"&&(o=Uc(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function Uc(o){let t=new DataView(o);if(t.getUint16(0,!1)!==65496)return-2;let i=t.byteLength,e=2;for(;e<i;){if(t.getUint16(e+2,!1)<=8)return-1;let n=t.getUint16(e,!1);if(e+=2,n==65505){if(t.getUint32(e+=2,!1)!==1165519206)return-1;let r=t.getUint16(e+=6,!1)==18761;e+=t.getUint32(e+4,r);let s=t.getUint16(e,r);e+=2;for(let c=0;c<s;c++)if(t.getUint16(e+c*12,r)==274)return t.getUint16(e+c*12+8,r)}else{if((n&65280)!==65280)break;e+=t.getUint16(e,!1)}}return-1}var Fc=(()=>{let t=class t{constructor(){this.autoRotateSupported=Nc()}loadImageFile(e,n){return ae(this,null,function*(){let r=yield e.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(r,e.type,n)})}checkImageTypeAndLoadImageFromArrayBuffer(e,n,r){return this.isValidImageType(n)?this.loadImageFromArrayBuffer(e,r,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(e){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(e)}loadImageFromURL(e,n){return ae(this,null,function*(){let s=yield(yield fetch(e)).blob(),c=yield s.arrayBuffer();return yield this.loadImageFromArrayBuffer(c,n,s.type)})}loadBase64Image(e,n){let r=this.base64ToArrayBuffer(e);return this.loadImageFromArrayBuffer(r,n)}base64ToArrayBuffer(e){e=e.replace(/^data:([^;]+);base64,/gmi,"");let n=atob(e),r=n.length,s=new Uint8Array(r);for(let c=0;c<r;c++)s[c]=n.charCodeAt(c);return s.buffer}loadImageFromArrayBuffer(e,n,r){return ae(this,null,function*(){let s=yield new Promise((c,h)=>ae(this,null,function*(){try{let x=new Blob([e],r?{type:r}:void 0),S=URL.createObjectURL(x),O=new Image,B=r==="image/svg+xml"?yield this.getSvgImageSize(x):void 0;O.onload=()=>c({originalImage:O,originalImageSize:B,originalObjectUrl:S,originalArrayBuffer:e}),O.onerror=h,O.src=S}catch(x){h(x)}}));return yield this.transformImageFromArrayBuffer(s,n,s.originalImageSize!=null)})}getSvgImageSize(e){return ae(this,null,function*(){let s=new DOMParser().parseFromString(yield e.text(),"image/svg+xml").querySelector("svg");if(!s)throw Error("Failed to parse SVG image");let c=s.getAttribute("width"),h=s.getAttribute("height");if(c&&h)return null;let x=s.getAttribute("viewBox")||s.getAttribute("viewbox");if(x){let S=x.split(" ");return{width:+S[2],height:+S[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(e,n,r=!1){return ae(this,null,function*(){let s=yield this.autoRotateSupported,c=Dc(s?-1:e.originalArrayBuffer);if(!e.originalImage||!e.originalImage.complete)return Promise.reject(new Error("No image loaded"));let h={original:{objectUrl:e.originalObjectUrl,image:e.originalImage,size:e.originalImageSize??{width:e.originalImage.naturalWidth,height:e.originalImage.naturalHeight}},exifTransform:c};return this.transformLoadedImage(h,n,r)})}transformLoadedImage(e,n,r=!1){return ae(this,null,function*(){let s=n.canvasRotation+e.exifTransform.rotate,c=e.original.size;if(!r&&s===0&&!e.exifTransform.flip&&!n.containWithinAspectRatio)return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:Ee({},c)},transformed:{objectUrl:e.original.objectUrl,image:e.original.image,size:Ee({},c)},exifTransform:e.exifTransform};let h=this.getTransformedSize(c,e.exifTransform,n),x=document.createElement("canvas");x.width=h.width,x.height=h.height;let S=x.getContext("2d");S?.setTransform(e.exifTransform.flip?-1:1,0,0,1,x.width/2,x.height/2),S?.rotate(Math.PI*(s/2)),S?.drawImage(e.original.image,-c.width/2,-c.height/2);let O=yield new Promise(L=>x.toBlob(L,n.format));if(!O)throw new Error("Failed to get Blob for transformed image.");let E=URL.createObjectURL(O),B=yield this.loadImageFromObjectUrl(E);return{original:{objectUrl:e.original.objectUrl,image:e.original.image,size:Ee({},c)},transformed:{objectUrl:E,image:B,size:{width:B.width,height:B.height}},exifTransform:e.exifTransform}})}loadImageFromObjectUrl(e){return new Promise((n,r)=>{let s=new Image;s.onload=()=>n(s),s.onerror=r,s.src=e})}getTransformedSize(e,n,r){let s=r.canvasRotation+n.rotate;if(r.containWithinAspectRatio)if(s%2){let c=e.width*r.aspectRatio,h=e.height/r.aspectRatio;return{width:Math.max(e.height,c),height:Math.max(e.width,h)}}else{let c=e.height*r.aspectRatio,h=e.width/r.aspectRatio;return{width:Math.max(e.width,c),height:Math.max(e.height,h)}}return s%2?{height:e.width,width:e.height}:{width:e.width,height:e.height}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})(),qi=(()=>{let t=class t{constructor(e,n,r,s,c,h,x){this.cropService=e,this.cropperPositionService=n,this.loadImageService=r,this.sanitizer=s,this.cd=c,this.zone=h,this.hammerLoader=x,this.settings=new jn,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=we,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new le,this.startCropImage=new le,this.imageLoaded=new le,this.cropperReady=new le,this.loadImageFailed=new le,this.transformChange=new le,this.reset()}ngOnChanges(e){this.onChangesUpdateSettings(e),this.onChangesInputImage(e),this.loadedImage?.original.image.complete&&(e.containWithinAspectRatio||e.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(e.cropper||e.maintainAspectRatio||e.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(e.maintainAspectRatio||e.aspectRatio)?this.resetCropperPosition():e.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),e.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),e.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(e){this.settings.setOptionsFromChanges(e),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(e){(e.imageChangedEvent||e.imageURL||e.imageBase64||e.imageFile)&&this.reset(),e.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),e.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),e.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),e.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){let e=this.imageChangedEvent?.target?.files;return e instanceof FileList&&e.length>0}setCssTransform(){let e=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${e}, ${this.transform.translateV||0}${e}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(e){this.loadImageService.loadImageFile(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadBase64Image(e){this.loadImageService.loadBase64Image(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}loadImageFromURL(e){this.loadImageService.loadImageFromURL(e,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n))}setLoadedImage(e){this.loadedImage=e,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(e.transformed.objectUrl),this.cd.markForCheck()}loadImageError(e){console.error(e),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Ee({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let e=Ee({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(e),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return ae(this,null,function*(){yield this.hammerLoader?.();let e=window?.Hammer||null;if(e){let n=new e(this.wrapper.nativeElement);n.get("pinch").set({enable:!0}),n.on("pinchmove",this.onPinch.bind(this)),n.on("pinchend",this.pinchStop.bind(this)),n.on("pinchstart",this.startPinch.bind(this))}else Lo()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(e){(e.width!==this.maxSize.width||e.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/e.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/e.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/e.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/e.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(e){this.changeKeyboardStepSize(e),this.keyboardMoveCropper(e)}changeKeyboardStepSize(e){let n=+e.key;n>=1&&n<=9&&(this.settings.stepSize=n)}keyboardMoveCropper(e){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(e.key))return;let r=e.shiftKey?we.Resize:we.Move,s=e.altKey?Ac(e.key):Ic(e.key),c=Rc(e.key,this.settings.stepSize);e.preventDefault(),e.stopPropagation(),this.startMove({clientX:0,clientY:0},r,s),this.handleMouseMove(c),this.handleMouseUp()}startMove(e,n,r=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===we.Pinch||n===we.Drag&&!this.allowMoveImage||("preventDefault"in e&&e.preventDefault(),this.moveStart=Ee({active:!0,type:n,position:r,transform:Ee({},this.transform),clientX:this.cropperPositionService.getClientX(e),clientY:this.cropperPositionService.getClientY(e)},this.cropper),this.initMouseMove())}initMouseMove(){vn(Ft(document,"mousemove"),Ft(document,"touchmove")).pipe(Po(vn(Ft(document,"mouseup"),Ft(document,"touchend")).pipe(Oo()))).subscribe({next:e=>this.zone.run(()=>{this.handleMouseMove(e),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(e){this.safeImgDataUrl&&(e.preventDefault&&e.preventDefault(),this.moveStart=Ee({active:!0,type:we.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(e){if(this.moveStart.active){if("stopPropagation"in e&&e.stopPropagation(),"preventDefault"in e&&e.preventDefault(),this.moveStart.type===we.Move)this.cropperPositionService.move(e,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===we.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===we.Drag){let n=this.cropperPositionService.getClientX(e)-this.moveStart.clientX,r=this.cropperPositionService.getClientY(e)-this.moveStart.clientY;this.transform=So(Ee({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+n,translateV:(this.moveStart.transform?.translateV||0)+r}),this.setCssTransform()}}}onPinch(e){this.moveStart.active&&(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),this.moveStart.type===we.Pinch&&(this.cropperPositionService.resize(e,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let e=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(e.width),this.maxSize.height=parseFloat(e.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let e=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/e:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/e:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(e=!1){this.cropper.x1<0&&(this.cropper.x2-=e?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=e?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=e?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=e?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===we.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(e=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),e==="blob")return this.cropToBlob();if(e==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((e,n)=>this.zone.run(()=>ae(this,null,function*(){let r=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);r?(this.imageCropped.emit(r),e(r)):n("Crop image failed")})))}cropToBase64(){let e=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return e?(this.imageCropped.emit(e),e):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}};t.\u0275fac=function(n){return new(n||t)(I(Vc),I(Bc),I(Fc),I(bt),I(No),I(Io),I(Uo,8))},t.\u0275cmp=A({type:t,selectors:[["image-cropper"]],viewQuery:function(n,r){if(n&1&&(qt(Ec,7),qt(Oc,5)),n&2){let s;Wt(s=Ht())&&(r.wrapper=s.first),Wt(s=Ht())&&(r.sourceImage=s.first)}},hostVars:6,hostBindings:function(n,r){n&1&&M("resize",function(){return r.onResize()},!1,To),n&2&&(ft("text-align",r.alignImage),Mi("disabled",r.disabled)("ngx-ix-hidden",r.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},standalone:!0,features:[ge,Ge],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(n,r){n&1&&(d(0,"div",null,0),T(2,Pc,2,8,"img",2),y(3,"div",3),T(4,kc,3,16,"div",4),p()),n&2&&(ft("background",r.imageVisible&&r.backgroundColor),m(2),w("ngIf",r.safeImgDataUrl),m(),ft("width",r.maxSize.width,"px")("height",r.maxSize.height,"px")("margin-left",r.alignImage==="center"?r.marginLeft:null),m(),w("ngIf",r.imageVisible))},dependencies:[fe],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0});let o=t;return o})();var Wc=o=>({visibility:o}),ns=o=>({circular:o});function Hc(o,t){if(o&1){let i=R();d(0,"image-cropper",7),M("imageCropped",function(n){v(i);let r=f();return b(r.imageCropped(n))})("imageLoaded",function(){v(i);let n=f();return b(n.imageLoaded())})("cropperReady",function(){v(i);let n=f();return b(n.cropperReady())})("loadImageFailed",function(){v(i);let n=f();return b(n.loadImageFailed())}),p()}if(o&2){let i=f();w("imageChangedEvent",i.imageChangedEvent)("maintainAspectRatio",!0)("output","base64")("aspectRatio",i.ratio)}}function jc(o,t){if(o&1&&y(0,"img",11),o&2){let i=f(2);K("src",i.previewUrl,j),w("ngClass",ne(2,ns,i.shape=="circular"))}}function Yc(o,t){if(o&1&&y(0,"img",12),o&2){let i=f(2);w("ngClass",ne(1,ns,i.shape=="circular"))}}function Qc(o,t){if(o&1&&(d(0,"div",8),T(1,jc,1,4,"img",9)(2,Yc,1,3,"img",10),p()),o&2){let i=f();m(),w("ngIf",i.previewUrl),m(),w("ngIf",!i.previewUrl)}}function Gc(o,t){if(o&1){let i=R();d(0,"div",13)(1,"button",14),M("click",function(){v(i);let n=f();return b(n.cancelImageOnAdd())}),g(2,"CANCEL"),p(),d(3,"button",15),M("click",function(){v(i);let n=f();return b(n.setImageOnAdd())}),g(4,"SAVE"),p()()}}var os=(()=>{let t=class t{constructor(e){this.sanitizer=e,this.imageLoadedEvent=new le,this.cropperActiveEvent=new le,this.image_is_preview=!1}ngOnChanges(){this.previewUrlo=this.previewUrl}fileChangeEvent(e){this.imageChangedEvent=e,this.cropperActiveEvent.emit(!0)}imageCropped(e){this.croppedImage=e.base64,this.previewUrl=e.base64,this.image_is_preview=!0}imageLoaded(){}cropperReady(){}loadImageFailed(){}cancelImageOnAdd(){this.imageChangedEvent=void 0,this.previewUrl=this.previewUrlo,this.imageLoadedEvent.emit(this.previewUrl)}setImageOnAdd(){this.previewUrl=this.croppedImage,console.log("this.previewUrl",this.previewUrl),this.imageChangedEvent=void 0,this.imageLoadedEvent.emit(this.previewUrl),this.cropperActiveEvent.emit(!1)}};t.\u0275fac=function(n){return new(n||t)(I(bt))},t.\u0275cmp=A({type:t,selectors:[["app-profile-image-upload"]],inputs:{previewUrl:"previewUrl",ratio:"ratio",shape:"shape"},outputs:{imageLoadedEvent:"imageLoadedEvent",cropperActiveEvent:"cropperActiveEvent"},features:[ge],decls:8,vars:6,consts:[[1,"form-group",2,"margin-bottom","0"],[1,"btn","btn-default","button_secondary",3,"ngStyle"],[1,"fa","fa-image"],["type","file","name","image",2,"display","none",3,"change"],["format","png","class","image_cropper_container",3,"imageChangedEvent","maintainAspectRatio","output","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed",4,"ngIf"],["class","image_container",4,"ngIf"],["class","text-center","style","padding:40px 0;",4,"ngIf"],["format","png",1,"image_cropper_container",3,"imageCropped","imageLoaded","cropperReady","loadImageFailed","imageChangedEvent","maintainAspectRatio","output","aspectRatio"],[1,"image_container"],["class","image_preview_on_edit",3,"src","ngClass",4,"ngIf"],["src","../../../../assets/images/noimage.png","class","image_preview_on_edit",3,"ngClass",4,"ngIf"],[1,"image_preview_on_edit",3,"src","ngClass"],["src","../../../../assets/images/noimage.png",1,"image_preview_on_edit",3,"ngClass"],[1,"text-center",2,"padding","40px 0"],[1,"btn","btn-default","button_secondary",2,"margin","0 5px",3,"click"],[1,"btn","btn-default","button_primary",2,"margin","0 5px",3,"click"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"label",1),y(2,"i",2),g(3,"\xA0Upload image"),d(4,"input",3),M("change",function(c){return r.fileChangeEvent(c)}),p()()(),T(5,Hc,1,4,"image-cropper",4)(6,Qc,3,2,"div",5)(7,Gc,5,0,"div",6)),n&2&&(m(),w("ngStyle",ne(4,Wc,r.imageChangedEvent?"hidden":"visible")),m(4),w("ngIf",r.imageChangedEvent),m(),w("ngIf",!r.imageChangedEvent),m(),w("ngIf",r.imageChangedEvent))},dependencies:[Ae,fe,Si,qi],styles:['.background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative;padding-left:220px}.page_title[_ngcontent-%COMP%]{color:#3cf;padding:20px 0;font-size:38px;font-family:roboto-bold}.contents[_ngcontent-%COMP%]{padding:20px 20px 100px 240px}.button_primary[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_primary[_ngcontent-%COMP%]:hover{background-color:#0086b3}.button_secondary[_ngcontent-%COMP%]{color:#3cf;background-color:#fff;border-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3cf}.button_default[_ngcontent-%COMP%]{background-color:#fff;color:#d3d3d3;min-width:150px;border-color:#d3d3d3}.button_default[_ngcontent-%COMP%]:hover{color:gray;border-color:gray}.button_discrete[_ngcontent-%COMP%]{padding:20px 0;color:gray;border:none;outline:none}.button_discrete[_ngcontent-%COMP%]:hover{border:none;outline:none;text-decoration:underline}.back_button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:16px;outline:none;border:none}.back_button_words[_ngcontent-%COMP%]{cursor:pointer}.back_button_words[_ngcontent-%COMP%]:hover{text-decoration:underline;border:none;outline:none}.search_icon[_ngcontent-%COMP%]{color:gray;border-radius:50%;padding:5px 8px;width:33px;height:33px;position:absolute;top:3px;left:7px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.modal_header[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;height:54px}.modal_body[_ngcontent-%COMP%]{padding:60px 40px 40px;max-height:calc(100vh - 66px);overflow:auto}.modal_footer[_ngcontent-%COMP%]{background-color:#fff}.modal_title[_ngcontent-%COMP%]{color:#7f7f7f;font-size:30px;text-align:center;font-family:roboto-medium}.modal_close_button[_ngcontent-%COMP%]{color:#1e4f7a;position:absolute;top:15px;right:15px}.modal_close_icon[_ngcontent-%COMP%]{font-size:24px}.modal_close_button[_ngcontent-%COMP%]:hover{border:none;outline:none;color:#3cf}.modal_success_text[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:gray;margin:20px 0 0}.labelf[_ngcontent-%COMP%]{margin:20px 0 5px;color:#fff;font-family:roboto-medium}.labelfd[_ngcontent-%COMP%]{margin:20px 0 5px;color:gray;font-family:roboto-medium}.form_alert[_ngcontent-%COMP%]{color:#e2667d;font-style:italic;font-size:15px;text-align:right}.form_title[_ngcontent-%COMP%]{color:gray;font-size:32px;padding:20px 0}.form_label[_ngcontent-%COMP%]{margin:10px 0 0;width:200px}.form_input[_ngcontent-%COMP%]{border-radius:0;font-family:roboto-medium}.search_input_container[_ngcontent-%COMP%]{height:60px;padding-top:12px;padding-left:20px;display:inline-block}.remove_search_icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:80px;color:#d3d3d3;cursor:pointer;background-color:gray;padding:5px 6px 2px 5px;border-radius:50%;color:#f7f8fc}.search_input[_ngcontent-%COMP%]{border:solid 1px lightgrey;padding:5px 0 5px 55px;font-style:italic;color:#5a5b5f;border-radius:24px;width:350px;height:48px;box-shadow:1px 1px 1px #d3d3d3}.search_input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::placeholder{color:#5a5b5f;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#5a5b5f}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#5a5b5f}.invalid_feedback[_ngcontent-%COMP%]{text-align:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;height:24px;width:45px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.checkbox_container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#d3d3d3}.checkbox_container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#3cf}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox_container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.mz[_ngcontent-%COMP%]{margin:0}.pz[_ngcontent-%COMP%]{padding:0}.brz[_ngcontent-%COMP%]{border-radius:0}@media screen and (max-width: 992px){.cc[_ngcontent-%COMP%]{height:calc(100vh - 60px)}.content_container[_ngcontent-%COMP%]{padding:20px 10px}.page_title[_ngcontent-%COMP%]{margin:0;padding:45px 5px 0}}@media screen and (max-width: 768px){.cc[_ngcontent-%COMP%]{padding-bottom:200px}.remove_search_icon[_ngcontent-%COMP%]{top:12px}.background[_ngcontent-%COMP%]{padding:20px}}.image_cropper_container[_ngcontent-%COMP%]{width:250px;margin:auto}.image_preview_on_edit[_ngcontent-%COMP%]{height:125px;width:125px;display:block;margin:auto;object-fit:cover;object-position:center;border:solid 1px lightgrey;border-radius:50%}.image_container[_ngcontent-%COMP%]{padding:20px 0}']});let o=t;return o})();function Zc(o,t){o&1&&(d(0,"div",2)(1,"em"),g(2,"You can edit or modify your account settings here. Your profile image is shown on the leaderboard table, make it a good one!"),p()())}function $c(o,t){o&1&&(d(0,"div",2)(1,"em"),g(2,"You can edit or modify your account settings here."),p()())}function el(o,t){if(o&1){let i=R();d(0,"i",37),M("click",function(){v(i);let n=f(3);return b(n.editProfileImage())}),p()}}function tl(o,t){if(o&1&&(d(0,"div",28),y(1,"img",35),T(2,el,1,0,"i",36),p()),o&2){let i=f(2);m(),K("src",i.user.image,j),m(),w("ngIf",i.user)}}function il(o,t){o&1&&(d(0,"span"),y(1,"i",38),p())}function nl(o,t){o&1&&(d(0,"span"),y(1,"i",39),p())}function ol(o,t){if(o&1){let i=R();d(0,"div",26)(1,"div",27),T(2,tl,3,2,"div",28),d(3,"ul",29)(4,"li",30),g(5),d(6,"span")(7,"button",31),M("click",function(){v(i);let n=f();return b(n.showEditName())}),g(8,"Edit"),p()()(),d(9,"li",30),g(10),T(11,il,2,0,"span",32)(12,nl,2,0,"span",32),d(13,"span")(14,"button",31),M("click",function(){v(i);let n=f();return b(n.showEditEmail())}),g(15),p()()(),d(16,"li",30),g(17,"Password "),d(18,"span")(19,"button",31),M("click",function(){v(i);let n=f();return b(n.showEditPassword())}),g(20,"Edit"),p()()(),d(21,"li",33),M("click",function(){v(i);let n=f();return b(n.logout())}),g(22,"Logout "),p(),d(23,"li",34),M("click",function(){v(i);let n=f();return b(n.confirmDelete())}),g(24,"Delete Account "),p()()()()}if(o&2){let i=f();m(2),U(2,i.user.account_type=="player"?2:-1),m(3),ee("",i.user.username," "),m(5),ee("",i.user.email," \xA0 "),m(),w("ngIf",i.user.email_has_been_verified==!0),m(),w("ngIf",i.user.email_has_been_verified!=!0),m(3),ee(" ",i.user.email_has_been_verified==!0?"Edit":"Verify"," ")}}function rl(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(2);m(),k(i.invalid_user_name)}}function sl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("editNameModal"))}),y(2,"i",19),p(),d(3,"h1",40),g(4,"Edit Username"),p(),d(5,"div",41)(6,"input",23),G("ngModelChange",function(n){v(i);let r=f();return Q(r.user_name,n)||(r.user_name=n),b(n)}),M("ngModelChange",function(){v(i);let n=f();return b(n.clearAlerts())}),p()(),T(7,rl,2,1,"div",42),d(8,"div",24)(9,"button",43),M("click",function(){v(i);let n=f();return b(n.saveName())}),g(10,"SAVE"),p()()()}if(o&2){let i=f();m(6),Y("ngModel",i.user_name),m(),w("ngIf",i.invalid_user_name)}}function al(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(3);m(),k(i.invalid_user_email)}}function cl(o,t){if(o&1){let i=R();d(0,"div",48)(1,"h1",40),g(2,"Edit Email"),p(),d(3,"div",49)(4,"input",23),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.user_email,n)||(r.user_email=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.clearAlerts())}),p()(),T(5,al,2,1,"div",42),d(6,"p",50),y(7,"i",51),g(8,"\xA0Editing will require verification"),p()()}if(o&2){let i=f(2);m(4),Y("ngModel",i.user_email),m(),w("ngIf",i.invalid_user_email)}}function ll(o,t){o&1&&(d(0,"div",44),g(1,"Code is incorrect"),p())}function dl(o,t){if(o&1){let i=R();d(0,"div",52)(1,"p"),g(2,"Please enter the verification code that was sent to "),d(3,"em"),g(4),p()(),d(5,"div",53)(6,"input",54),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_1e,n)||(r.digit_1e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(1))}),p(),d(7,"input",55),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_2e,n)||(r.digit_2e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(2))}),p(),d(8,"input",56),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_3e,n)||(r.digit_3e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(3))}),p(),d(9,"input",57),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_4e,n)||(r.digit_4e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(4))}),p(),d(10,"input",58),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_5e,n)||(r.digit_5e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(5))}),p(),d(11,"input",59),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_6e,n)||(r.digit_6e=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodeEmail(6))}),p()(),d(12,"div",60)(13,"input",23),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digits,n)||(r.digits=n),b(n)}),p()(),T(14,ll,2,0,"div",42),p()}if(o&2){let i=f(2);m(4),k(i.user.email),m(2),Y("ngModel",i.digit_1e),m(),Y("ngModel",i.digit_2e),m(),Y("ngModel",i.digit_3e),m(),Y("ngModel",i.digit_4e),m(),Y("ngModel",i.digit_5e),m(),Y("ngModel",i.digit_6e),m(2),Y("ngModel",i.digits),m(),w("ngIf",i.email_verification_code_failed==!0)}}function pl(o,t){if(o&1){let i=R();d(0,"button",43),M("click",function(){v(i);let n=f(2);return b(n.verifyEmail())}),g(1,"VERIFY"),p()}}function hl(o,t){if(o&1){let i=R();d(0,"button",43),M("click",function(){v(i);let n=f(2);return b(n.submitEmailVerificationCode())}),g(1,"SUBMIT"),p()}}function ul(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("editEmailModal"))}),y(2,"i",19),p(),T(3,cl,9,2,"div",45)(4,dl,15,9,"div",46),d(5,"div",24),T(6,pl,2,0,"button",47)(7,hl,2,0,"button",47),p()()}if(o&2){let i=f();m(3),w("ngIf",i.email_change_step==1),m(),w("ngIf",i.email_change_step==2),m(2),w("ngIf",i.email_change_step==1),m(),w("ngIf",i.email_change_step==2)}}function ml(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(3);m(),k(i.invalid_user_phone)}}function gl(o,t){if(o&1){let i=R();d(0,"div",48)(1,"h1",40),g(2,"Phone Verification"),p(),d(3,"p"),g(4,"Add a phone number to your account to receive notifications. "),p(),d(5,"div",49)(6,"label"),g(7,"Mobile number"),p(),y(8,"br"),d(9,"input",23),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.user_phone,n)||(r.user_phone=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.clearAlerts())}),p(),T(10,ml,2,1,"div",42),p()()}if(o&2){let i=f(2);m(9),Y("ngModel",i.user_phone),m(),w("ngIf",i.invalid_user_phone)}}function fl(o,t){if(o&1){let i=R();d(0,"div",52)(1,"p"),g(2,"Please enter the verification code that was sent to "),d(3,"em"),g(4),p()(),d(5,"div",53)(6,"input",63),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_1p,n)||(r.digit_1p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(1))}),p(),d(7,"input",64),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_2p,n)||(r.digit_2p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(2))}),p(),d(8,"input",65),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_3p,n)||(r.digit_3p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(3))}),p(),d(9,"input",66),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_4p,n)||(r.digit_4p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(4))}),p(),d(10,"input",67),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_5p,n)||(r.digit_5p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(5))}),p(),d(11,"input",68),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digit_6p,n)||(r.digit_6p=n),b(n)}),M("ngModelChange",function(){v(i);let n=f(2);return b(n.evalAccessCodePhone(6))}),p()(),d(12,"div",60)(13,"input",23),G("ngModelChange",function(n){v(i);let r=f(2);return Q(r.digits,n)||(r.digits=n),b(n)}),p()()()}if(o&2){let i=f(2);m(4),k(i.user_phone),m(2),Y("ngModel",i.digit_1p),m(),Y("ngModel",i.digit_2p),m(),Y("ngModel",i.digit_3p),m(),Y("ngModel",i.digit_4p),m(),Y("ngModel",i.digit_5p),m(),Y("ngModel",i.digit_6p),m(2),Y("ngModel",i.digits)}}function _l(o,t){if(o&1){let i=R();d(0,"button",69),M("click",function(){v(i);let n=f(2);return b(n.sendPhoneCode())}),g(1,"SEND CODE"),p()}}function xl(o,t){if(o&1){let i=R();d(0,"button",69),M("click",function(){v(i);let n=f(2);return b(n.confirmPhoneCode())}),g(1,"CONFIRM"),p()}}function vl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("editPhoneModal"))}),y(2,"i",19),p(),T(3,gl,11,2,"div",45)(4,fl,14,8,"div",46),d(5,"div",24)(6,"button",61),M("click",function(){v(i);let n=f();return b(n.closeModal("editPhoneModal"))}),g(7,"CANCEL"),p(),T(8,_l,2,0,"button",62)(9,xl,2,0,"button",62),p()()}if(o&2){let i=f();m(3),w("ngIf",i.phone_change_step==1),m(),w("ngIf",i.phone_change_step==2),m(4),w("ngIf",i.phone_change_step==1),m(),w("ngIf",i.phone_change_step==2)}}function bl(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(2);m(),k(i.invalid_user_zipcode)}}function Cl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("editLocationModal"))}),y(2,"i",19),p(),d(3,"h1",40),g(4,"Set Location"),p(),d(5,"p"),g(6,"Set your location so we can personalize your experience showing you distance to certain classes"),p(),d(7,"div",70)(8,"label"),g(9,"Zip Code"),p(),y(10,"br"),d(11,"input",71),G("ngModelChange",function(n){v(i);let r=f();return Q(r.user_zipcode,n)||(r.user_zipcode=n),b(n)}),M("ngModelChange",function(){v(i);let n=f();return n.evalZipCode(),b(n.clearAlerts())}),p(),T(12,bl,2,1,"div",42),d(13,"p",72),g(14),p()(),d(15,"div",24)(16,"button",69),M("click",function(){v(i);let n=f();return b(n.saveZipCode())}),g(17,"SAVE"),p()()()}if(o&2){let i=f();m(11),Y("ngModel",i.user_zipcode),m(),w("ngIf",i.invalid_user_zipcode),m(2),Oe("",i.location.city,", ",i.location.state,"")}}function yl(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(2);m(),k(i.invalid_password_current)}}function wl(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(2);m(),k(i.invalid_password_new)}}function Ml(o,t){if(o&1&&(d(0,"div",44),g(1),p()),o&2){let i=f(2);m(),ee("",i.invalid_password_new_confirm," ")}}function Sl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("editPasswordModal"))}),y(2,"i",19),p(),d(3,"h1",40),g(4,"Reset Password"),p(),d(5,"div",73)(6,"label"),g(7,"Current Password"),p(),y(8,"br"),d(9,"input",74),G("ngModelChange",function(n){v(i);let r=f();return Q(r.password_current,n)||(r.password_current=n),b(n)}),M("ngModelChange",function(){v(i);let n=f();return b(n.clearAlerts())}),p()(),T(10,yl,2,1,"div",42),d(11,"div",49)(12,"label"),g(13,"New Password"),p(),y(14,"br"),d(15,"input",74),G("ngModelChange",function(n){v(i);let r=f();return Q(r.password_new,n)||(r.password_new=n),b(n)}),M("ngModelChange",function(){v(i);let n=f();return b(n.clearAlerts())}),p(),T(16,wl,2,1,"div",42),d(17,"label"),g(18,"Confirm Password"),p(),y(19,"br"),d(20,"input",74),G("ngModelChange",function(n){v(i);let r=f();return Q(r.password_new_confirm,n)||(r.password_new_confirm=n),b(n)}),M("ngModelChange",function(){v(i);let n=f();return b(n.clearAlerts())}),p(),T(21,Ml,2,1,"div",42),p(),d(22,"div",24)(23,"button",69),M("click",function(){v(i);let n=f();return b(n.savePassword())}),g(24,"SUBMIT"),p()()()}if(o&2){let i=f();m(9),Y("ngModel",i.password_current),m(),w("ngIf",i.invalid_password_current),m(5),Y("ngModel",i.password_new),m(),w("ngIf",i.invalid_password_new),m(4),Y("ngModel",i.password_new_confirm),m(),w("ngIf",i.invalid_password_new_confirm)}}function El(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("emailVerificationSuccessModal"))}),y(2,"i",19),p(),d(3,"p",75),g(4,"Thank you! Your email has been verified successfully."),p(),d(5,"div",24)(6,"button",69),M("click",function(){v(i);let n=f();return b(n.closeModal("emailVerificationSuccessModal"))}),g(7,"OK"),p()()()}}function Ol(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("phoneVerificationSuccessModal"))}),y(2,"i",19),p(),d(3,"p",75),g(4,"Thank you! Your phone has been verified successfully."),p(),d(5,"div",24)(6,"button",69),M("click",function(){v(i);let n=f();return b(n.closeModal("phoneVerificationSuccessModal"))}),g(7,"OK"),p()()()}}function Pl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("changePasswordSuccessModal"))}),y(2,"i",19),p(),d(3,"p",75),g(4,"Your password has been changed."),p(),d(5,"div",24)(6,"button",69),M("click",function(){v(i);let n=f();return b(n.closeModal("changePasswordSuccessModal"))}),g(7,"OK"),p()()()}}function Tl(o,t){if(o&1){let i=R();d(0,"div",24)(1,"button",69),M("click",function(){v(i);let n=f(2);return b(n.closeModal("profileImageModal"))}),g(2,"OK"),p()()}}function kl(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("profileImageModal"))}),y(2,"i",19),p(),d(3,"app-profile-image-upload",76),M("imageLoadedEvent",function(n){v(i);let r=f();return b(r.saveProfileImage(n))})("cropperActiveEvent",function(n){v(i);let r=f();return b(r.setCropperActive(n))}),p(),T(4,Tl,3,0,"div",77),p()}if(o&2){let i=f();m(3),w("previewUrl",i.user.image)("ratio",1/1)("shape","rectangular"),m(),w("ngIf",i.cropper_active!=!0)}}function Il(o,t){if(o&1){let i=R();d(0,"div",24)(1,"button",69),M("click",function(){v(i);let n=f(2);return b(n.closeModal("profileImageModal"))}),g(2,"OK"),p()()}}function Al(o,t){if(o&1){let i=R();d(0,"div",17)(1,"button",18),M("click",function(){v(i);let n=f();return b(n.closeModal("profileImageModal"))}),y(2,"i",19),p(),d(3,"app-profile-image-upload",76),M("imageLoadedEvent",function(n){v(i);let r=f();return b(r.saveProfileImage(n))})("cropperActiveEvent",function(n){v(i);let r=f();return b(r.setCropperActive(n))}),p(),T(4,Il,3,0,"div",77),p()}if(o&2){let i=f();m(3),w("previewUrl",i.user.image)("ratio",1/1)("shape","rectangular"),m(),w("ngIf",i.cropper_active!=!0)}}var ss=(()=>{let t=class t{constructor(e,n,r,s,c,h){this.userService=e,this.tablesService=n,this.commonService=r,this.myblobService=s,this.router=c,this.document=h,this.user_name="",this.user_email="",this.user_zipcode="",this.user_phone="",this.password_current="",this.password_new="",this.password_new_confirm="",this.invalid_user_name="",this.invalid_user_email="",this.invalid_user_phone="",this.invalid_user_zipcode="",this.invalid_password_current="",this.invalid_password_new="",this.invalid_password_new_confirm="",this.email_verification_code_failed=!1,this.email_change_step=0,this.phone_change_step=0,this.digit_1e="",this.digit_2e="",this.digit_3e="",this.digit_4e="",this.digit_5e="",this.digit_6e="",this.digit_1p="",this.digit_2p="",this.digit_3p="",this.digit_4p="",this.digit_5p="",this.digit_6p="",this.digits="",this.location={},this.profile_image_filename="",this.cropper_active=!1,this.delete_confirm="",this.image_is_preview=!1}ngOnInit(){this.userService._getUser.subscribe(e=>{this.user=e,console.log("this.user",this.user),this.user&&(this.user.sign_up_date&&(this.user.sign_up_date_humanized=this.commonService.getDate(this.user.sign_up_date)),this.notify_via_sms=this.user.notify_by_sms,this.user_zipcode=this.user.location_zipcode,this.location={city:this.user.location_city,state:this.user.location_state})}),this.myblobService._profileImageUploaded.subscribe(e=>{e&&(console.log("filename----",e),this.user.image="https://sportzbattle.blob.core.windows.net/users/"+e,this.saveUserObjectInMemory())})}showEditName(){this.user_name=this.user.username,$("#editNameModal").modal("show")}showEditEmail(){this.clearDigits(),this.email_change_step=1,this.user_email=this.user.email,$("#editEmailModal").modal("show")}showEditPhone(){this.clearDigits(),this.phone_change_step=1,this.user_phone="",$("#editPhoneModal").modal("show")}showEditLocation(){console.log("this.user",this.user),this.user_zipcode=this.user.location_zipcode,this.location.city=this.user.location_city,this.location.state=this.user.location_state,$("#editLocationModal").modal("show")}showEditPassword(){$("#editPasswordModal").modal("show")}saveName(){if(console.log("save name"),!this.user_name){this.invalid_user_name="Please enter a valid name";return}var e={user_id:this.user.user_id,username:this.user_name};this.tablesService.UpdateItem("users","user_id",e).subscribe(()=>{this.user.username=this.user_name,$("#editNameModal").modal("hide"),this.saveUserObjectInMemory()})}clearAlerts(){this.invalid_user_name="",this.invalid_user_email="",this.invalid_user_phone="",this.invalid_user_zipcode="",this.invalid_password_current="",this.invalid_password_new="",this.invalid_password_new_confirm=""}saveUserObjectInMemory(){localStorage.setItem("user",JSON.stringify(this.user))}verifyEmail(){if(!this.user_email)this.invalid_user_email="Please enter a valid email";else{var e=this.user_email.match(/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/);e||(this.invalid_user_email="Please enter a valid email")}this.invalid_user_email||(this.email_change_step=2)}evalAccessCodeEmail(e){if(e==1){if(this.digit_1e.length==1){var n=this.document.getElementById("digit_2e");n&&n.focus()}}else if(e==2){if(this.digit_2e.length==1){var n=this.document.getElementById("digit_3e");n&&n.focus()}}else if(e==3){if(this.digit_3e.length==1){var n=this.document.getElementById("digit_4e");n&&n.focus()}}else if(e==4){if(this.digit_4e.length==1){var n=this.document.getElementById("digit_5e");n&&n.focus()}}else if(e==5){if(this.digit_5e.length==1){var n=this.document.getElementById("digit_6e");n&&n.focus()}}else e==6;this.email_verification_code_failed=!1}submitEmailVerificationCode(){}emailVerificationSuccess(){}sendPhoneCode(){}evalAccessCodePhone(e){if(e==1){if(this.digit_1p.length==1){var n=this.document.getElementById("digit_2p");n&&n.focus()}}else if(e==2){if(this.digit_2p.length==1){var n=this.document.getElementById("digit_3p");n&&n.focus()}}else if(e==3){if(this.digit_3p.length==1){var n=this.document.getElementById("digit_4p");n&&n.focus()}}else if(e==4){if(this.digit_4p.length==1){var n=this.document.getElementById("digit_5p");n&&n.focus()}}else if(e==5){if(this.digit_5p.length==1){var n=this.document.getElementById("digit_6p");n&&n.focus()}}else e==6;this.email_verification_code_failed=!1}confirmPhoneCode(){}phoneVerificationSuccess(){}evalZipCode(){}saveZipCode(){if(!this.user_zipcode)this.invalid_user_zipcode="Please enter a valid zip code";else{var e=this.user_zipcode.match(/^\d{5}/);e||(this.invalid_user_zipcode="Please enter a valid zip code")}if(!this.invalid_user_zipcode&&this.location){var n={user_id:this.user.user_id,location_zipcode:this.user_zipcode,location_city:this.location.city,location_state:this.location.state,location_lat:this.location.lat,location_lng:this.location.lng};this.user.location_zipcode=this.user_zipcode,this.tablesService.UpdateItem("users","user_id",n).subscribe(()=>{$("#editLocationModal").modal("hide")})}}savePassword(){}editProfileImage(){console.log("------------------------"),$("#profileImageModal").modal("show")}saveProfileImage(e){console.log("save profile image"),this.profile_image_filename=this.commonService.generateImageName()+".jpeg";var n=this;this.commonService.resizeImage(e,200,.75,this.profile_image_filename).then(function(r){n.user.image=r.base64,n.image_is_preview=!0,n.myblobService.uploadProfileImageBlob(r.base64,n.user.user_id+"/"+r.filename);var s={user_id:n.user.user_id,image:"https://sportzbattle.blob.core.windows.net/users/"+n.user.user_id+"/"+n.profile_image_filename};n.tablesService.UpdateItem("users","user_id",s).subscribe(c=>{})})}clearDigits(){this.digit_1e="",this.digit_2e="",this.digit_3e="",this.digit_4e="",this.digit_5e="",this.digit_6e="",this.digit_1p="",this.digit_2p="",this.digit_3p="",this.digit_4p="",this.digit_5p="",this.digit_6p=""}setCropperActive(e){this.cropper_active=e}goBack(){}logout(){this.userService.logoutUser()}closeModal(e){$("#"+e).modal("hide")}confirmDelete(){$("#confirmDeleteModal").modal("show")}deleteAccount(){}goto(e){this.router.navigate([e])}notifyViaSMS(){setTimeout(()=>{var e={user_id:this.user.user_id,notify_by_sms:this.notify_via_sms};this.user.notify_by_sms=this.notify_via_sms,this.tablesService.UpdateItem("users","user_id",e).subscribe()},200)}};t.\u0275fac=function(n){return new(n||t)(I(ze),I(Ei),I(Re),I(Oi),I(Ce),I(Do))},t.\u0275cmp=A({type:t,selectors:[["app-settings"]],decls:67,vars:13,consts:[[1,"background","backgroundx"],[1,"page_title"],[1,"text-start",2,"padding","30px 0"],["class","content_container","style","max-width:450px;",4,"ngIf"],["id","editNameModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],["class","modal-body modal_body",4,"ngIf"],["id","editEmailModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","editPhoneModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","editLocationModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","editPasswordModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","emailVerificationSuccessModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","phoneVerificationSuccessModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","changePasswordSuccessModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","profileImageModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["id","confirmDeleteModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],[1,"modal-body","modal_body"],["data-dismiss","modal",1,"btn","btn-default","modal_close_button",3,"click"],[1,"fa","fa-times","modal_close_icon"],[1,"delete_account_title"],[2,"padding-top","26px","text-align","left"],[1,"text-left"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center",2,"padding","25px 0"],["type","button",1,"btn","btn-danger",2,"min-width","150px",3,"click"],[1,"content_container",2,"max-width","450px"],[1,"settings_container"],[2,"position","relative","width","fit-content","display","block","margin","auto"],[2,"list-style-type","none","max-width","400px","padding","0"],[1,"list_itemx"],[1,"btn","btn-default","settings_edit_button",3,"click"],[4,"ngIf"],[1,"list_itemx","logout_button",3,"click"],[1,"list_itemx","delete_account_button",3,"click"],[1,"profile_image",3,"src"],["class","fa fa-pencil edit_image_icon",3,"click",4,"ngIf"],[1,"fa","fa-pencil","edit_image_icon",3,"click"],[1,"fa","fa-check","verified_icon"],[1,"fa","fa-minus","not_verified_icon"],[1,"modal_title"],[2,"padding","30px 0 10px 0"],["class","alert_message",4,"ngIf"],["type","button",1,"btn","btn-default","button_primary",3,"click"],[1,"alert_message"],["class","form-group col-12",4,"ngIf"],["class","form-group col-12","style","padding-top: 30px;",4,"ngIf"],["type","button","class","btn btn-default button_primary",3,"click",4,"ngIf"],[1,"form-group","col-12"],[2,"padding","30px 0"],[2,"padding-left","10px","color","grey"],[1,"fa","fa-lock"],[1,"form-group","col-12",2,"padding-top","30px"],[1,"d-none","d-md-block","text-center"],["id","digit_1e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_2e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_3e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_4e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_5e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_6e","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],[1,"d-block","d-md-none","text-center"],["type","button",1,"btn","btn-default","button_secondary",2,"margin","0 7px",3,"click"],["type","button","class","btn btn-default button_primary","style","min-width:150px",3,"click",4,"ngIf"],["id","digit_1p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_2p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_3p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_4p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_5p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["id","digit_6p","type","text","maxlength","1",1,"form-control","digit_input",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-default","button_primary",2,"min-width","150px",3,"click"],[2,"padding","30px 0","max-width","225px","margin","auto"],["type","text",1,"form-control",2,"text-align","center",3,"ngModelChange","ngModel"],[1,"location_text"],[2,"padding-top","30px"],["type","password",1,"form-control",3,"ngModelChange","ngModel"],[2,"padding-top","40px","text-align","center"],[3,"imageLoadedEvent","cropperActiveEvent","previewUrl","ratio","shape"],["class","text-center","style","padding: 25px 0;",4,"ngIf"]],template:function(n,r){n&1&&(y(0,"app-user-sidemenu"),d(1,"div",0)(2,"div",1),g(3,"Account"),p(),T(4,Zc,3,0,"div",2)(5,$c,3,0)(6,ol,25,6,"div",3),p(),d(7,"div",4)(8,"div",5)(9,"div",6),T(10,sl,11,2,"div",7),p()()(),d(11,"div",8)(12,"div",5)(13,"div",6),T(14,ul,8,4,"div",7),p()()(),d(15,"div",9)(16,"div",5)(17,"div",6),T(18,vl,10,4,"div",7),p()()(),d(19,"div",10)(20,"div",5)(21,"div",6),T(22,Cl,18,4,"div",7),p()()(),d(23,"div",11)(24,"div",5)(25,"div",6),T(26,Sl,25,6,"div",7),p()()(),d(27,"div",12)(28,"div",5)(29,"div",6),T(30,El,8,0,"div",7),p()()(),d(31,"div",13)(32,"div",5)(33,"div",6),T(34,Ol,8,0,"div",7),p()()(),d(35,"div",14)(36,"div",5)(37,"div",6),T(38,Pl,8,0,"div",7),p()()(),d(39,"div",15)(40,"div",5)(41,"div",6),T(42,kl,5,4,"div",7),p()()(),d(43,"div",16)(44,"div",5)(45,"div",6)(46,"div",17)(47,"button",18),M("click",function(){return r.closeModal("confirmDeleteModal")}),y(48,"i",19),p(),d(49,"p",20)(50,"strong"),g(51,"Delete Account"),p()(),d(52,"p",21),g(53,"Please confirm you wish to delete your account. This can not be undone. Your account will be permanently deleted."),p(),d(54,"div",22),g(55," To confirm delete, please type "),d(56,"em"),g(57,"DELETE"),p(),g(58," and click confirm. "),d(59,"input",23),G("ngModelChange",function(c){return Q(r.delete_confirm,c)||(r.delete_confirm=c),c}),p()(),d(60,"div",24)(61,"button",25),M("click",function(){return r.deleteAccount()}),g(62,"Confirm delete"),p()()()()()(),d(63,"div",15)(64,"div",5)(65,"div",6),T(66,Al,5,4,"div",7),p()()()),n&2&&(m(4),U(4,r.user.account_type=="player"?4:5),m(2),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(4),w("ngIf",r.user),m(17),Y("ngModel",r.delete_confirm),m(7),w("ngIf",r.user))},dependencies:[fe,Ho,jo,Qo,Yo,Ct,os],styles:['.background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative;padding-left:220px}.page_title[_ngcontent-%COMP%]{color:#3cf;padding:20px 0;font-size:38px;font-family:roboto-bold}.contents[_ngcontent-%COMP%]{padding:20px 20px 100px 240px}.button_primary[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_primary[_ngcontent-%COMP%]:hover{background-color:#0086b3}.button_secondary[_ngcontent-%COMP%]{color:#3cf;background-color:#fff;border-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3cf}.button_default[_ngcontent-%COMP%]{background-color:#fff;color:#d3d3d3;min-width:150px;border-color:#d3d3d3}.button_default[_ngcontent-%COMP%]:hover{color:gray;border-color:gray}.button_discrete[_ngcontent-%COMP%]{padding:20px 0;color:gray;border:none;outline:none}.button_discrete[_ngcontent-%COMP%]:hover{border:none;outline:none;text-decoration:underline}.back_button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:16px;outline:none;border:none}.back_button_words[_ngcontent-%COMP%]{cursor:pointer}.back_button_words[_ngcontent-%COMP%]:hover{text-decoration:underline;border:none;outline:none}.search_icon[_ngcontent-%COMP%]{color:gray;border-radius:50%;padding:5px 8px;width:33px;height:33px;position:absolute;top:3px;left:7px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.modal_header[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;height:54px}.modal_body[_ngcontent-%COMP%]{padding:60px 40px 40px;max-height:calc(100vh - 66px);overflow:auto}.modal_footer[_ngcontent-%COMP%]{background-color:#fff}.modal_title[_ngcontent-%COMP%]{color:#7f7f7f;font-size:30px;text-align:center;font-family:roboto-medium}.modal_close_button[_ngcontent-%COMP%]{color:#1e4f7a;position:absolute;top:15px;right:15px}.modal_close_icon[_ngcontent-%COMP%]{font-size:24px}.modal_close_button[_ngcontent-%COMP%]:hover{border:none;outline:none;color:#3cf}.modal_success_text[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:gray;margin:20px 0 0}.labelf[_ngcontent-%COMP%]{margin:20px 0 5px;color:#fff;font-family:roboto-medium}.labelfd[_ngcontent-%COMP%]{margin:20px 0 5px;color:gray;font-family:roboto-medium}.form_alert[_ngcontent-%COMP%]{color:#e2667d;font-style:italic;font-size:15px;text-align:right}.form_title[_ngcontent-%COMP%]{color:gray;font-size:32px;padding:20px 0}.form_label[_ngcontent-%COMP%]{margin:10px 0 0;width:200px}.form_input[_ngcontent-%COMP%]{border-radius:0;font-family:roboto-medium}.search_input_container[_ngcontent-%COMP%]{height:60px;padding-top:12px;padding-left:20px;display:inline-block}.remove_search_icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:80px;color:#d3d3d3;cursor:pointer;background-color:gray;padding:5px 6px 2px 5px;border-radius:50%;color:#f7f8fc}.search_input[_ngcontent-%COMP%]{border:solid 1px lightgrey;padding:5px 0 5px 55px;font-style:italic;color:#5a5b5f;border-radius:24px;width:350px;height:48px;box-shadow:1px 1px 1px #d3d3d3}.search_input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::placeholder{color:#5a5b5f;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#5a5b5f}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#5a5b5f}.invalid_feedback[_ngcontent-%COMP%]{text-align:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;height:24px;width:45px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.checkbox_container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#d3d3d3}.checkbox_container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#3cf}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox_container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.mz[_ngcontent-%COMP%]{margin:0}.pz[_ngcontent-%COMP%]{padding:0}.brz[_ngcontent-%COMP%]{border-radius:0}@media screen and (max-width: 992px){.cc[_ngcontent-%COMP%]{height:calc(100vh - 60px)}.content_container[_ngcontent-%COMP%]{padding:20px 10px}.page_title[_ngcontent-%COMP%]{margin:0;padding:45px 5px 0}}@media screen and (max-width: 768px){.cc[_ngcontent-%COMP%]{padding-bottom:200px}.remove_search_icon[_ngcontent-%COMP%]{top:12px}.background[_ngcontent-%COMP%]{padding:20px}}.backgroundx[_ngcontent-%COMP%]{padding-left:260px;color:#fff;padding-right:40px}.content_container[_ngcontent-%COMP%]{max-width:450px;display:block;margin:auto}.profile_image[_ngcontent-%COMP%]{width:125px;height:125px;border:solid 1px lightgrey;border-radius:50%}.stats_button[_ngcontent-%COMP%]{width:100px;font-size:18px}.ccx[_ngcontent-%COMP%]{padding-top:0}.no_items_image[_ngcontent-%COMP%]{width:275px;margin:auto;display:block}.no_items_label[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:18px;padding:30px 0}.profile_name_container[_ngcontent-%COMP%]{display:block;padding:15px 0}.list_itemx[_ngcontent-%COMP%]{border-bottom:solid 1px lightgrey;padding:15px 0}.settings_edit_button[_ngcontent-%COMP%]{float:right;color:#3cf}.digit_input[_ngcontent-%COMP%]{width:35px;display:inline-block;margin:0 3px}.location_text[_ngcontent-%COMP%]{text-align:center;padding:5px;margin:0;font-style:italic;color:gray}.edit_image_icon[_ngcontent-%COMP%]{position:absolute;border:solid 1px lightgrey;border-radius:50%;padding:7px;color:gray;background-color:#fff;right:calc(50% - 70px);cursor:pointer}.edit_image_icon[_ngcontent-%COMP%]:hover{background-color:#3cf;color:#fff;border-color:#3cf}.verified_icon[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;padding:6px;border-radius:50%}.not_verified_icon[_ngcontent-%COMP%]{color:#fff;background-color:#d3d3d3;padding:6px;border-radius:50%}.delete_account_title[_ngcontent-%COMP%]{color:#ff4500;margin:0;font-size:26px}.delete_account_button[_ngcontent-%COMP%]{color:gray;text-align:right;border-bottom:none;cursor:pointer}.profile_button[_ngcontent-%COMP%]{cursor:pointer;font-size:18px;color:gray}.profile_button[_ngcontent-%COMP%]:hover{text-decoration:underline}.logout_button[_ngcontent-%COMP%]{cursor:pointer}.logout_button[_ngcontent-%COMP%]:hover{text-decoration:underline}.not_verified_message[_ngcontent-%COMP%]{background-color:#ff0;color:#000;width:100%;padding:15px 30px}@media only screen and (max-width: 768px){.ccx[_ngcontent-%COMP%]{padding-top:0;top:0}.backgroundx[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}']});let o=t;return o})();var Rl=(o,t)=>t.user_id,Yn=o=>({selected:o});function zl(o,t){if(o&1&&(d(0,"tr")(1,"td",8),y(2,"img",9),p(),d(3,"td",8),g(4),p(),d(5,"td",8),g(6),p(),d(7,"td",8),g(8),p()()),o&2){let i=t.$implicit,e=f(2);m(2),K("src",i.image,j),m(2),k(i.username),m(2),k(i.games),m(2),k(e.tab=="daily"?i.max_score:i.points)}}function Vl(o,t){if(o&1&&(d(0,"table",7)(1,"thead")(2,"tr"),y(3,"th",8),d(4,"th",8),g(5,"Username"),p(),d(6,"th",8),g(7,"Games"),p(),d(8,"th",8),g(9),p()()(),d(10,"tbody"),_t(11,zl,9,4,"tr",null,Rl),p()()),o&2){let i=f();m(9),k(i.tab=="daily"?"High Score":"Total Points"),m(2),xt(i.players)}}function Bl(o,t){o&1&&(d(0,"div",10),g(1,"There are no players to show"),p())}var as=(()=>{let t=class t{constructor(e,n,r){this.userService=e,this.commonService=n,this.router=r,this.players=[],this.data=[],this.games=[],this.tab="all-time",this.data_ready=!1,this.daily_start_time=this.commonService.getEpochTimeForTodayAtMidnight(),this.monthly_start_time=this.commonService.getFirstDayOfMonthEpoch()}ngOnInit(){this.userServiceSubscription=this.userService._getUser.subscribe(e=>{if(!e){this.router.navigate(["login"]);return}this.user=e,this.loadData()})}ngOnDestroy(){this.userServiceSubscription&&this.userServiceSubscription.unsubscribe()}loadData(){this.userService.getAllGames().subscribe(e=>{this.games=e,this.filterPlayers()})}filterPlayers(){this.data_ready=!1;var e=[];this.tab=="all-time"?e=this.games:this.tab=="monthly"?e=this.games.filter(n=>n.timestamp>=this.monthly_start_time):this.tab=="daily"&&(e=this.games.filter(n=>n.timestamp>=this.daily_start_time)),this.players=[],e.forEach(n=>{var r=this.players.find(s=>s.user_id==n.user_id);r||this.players.push({user_id:n.user_id,username:n.username,image:n.user_image})}),this.players.forEach(n=>{var r=e.filter(h=>h.user_id==n.user_id);n.games=r.length;var s=0,c=0;r.forEach(h=>{s+=h.score?h.score:0,h.score>c&&(c=h.score)}),n.points=s,n.max_score=c}),this.players=this.players.sort((n,r)=>r.points-n.points),this.data_ready=!0}};t.\u0275fac=function(n){return new(n||t)(I(ze),I(Re),I(Ce))},t.\u0275cmp=A({type:t,selectors:[["app-leaderboard"]],decls:17,vars:10,consts:[[1,"background","backgroundx"],[1,"contentsx"],[1,"page_title"],[1,"submenu_container"],[1,"submenu_item",3,"click","ngClass"],[1,"table_container"],[1,"graph_title"],[1,"table","tablex"],[1,"tc"],[1,"player_image",3,"src"],[1,"note"]],template:function(n,r){n&1&&(y(0,"app-user-sidemenu"),d(1,"div",0)(2,"div",1)(3,"div",2),g(4,"Leaderboard"),p(),d(5,"div",3)(6,"div",4),M("click",function(){return r.tab="daily",r.filterPlayers()}),g(7,"Daily"),p(),d(8,"div",4),M("click",function(){return r.tab="monthly",r.filterPlayers()}),g(9,"Monthly"),p(),d(10,"div",4),M("click",function(){return r.tab="all-time",r.filterPlayers()}),g(11,"All-Time"),p()(),d(12,"div",5)(13,"div",6),g(14,"Top Players"),p(),T(15,Vl,13,1,"table",7)(16,Bl,2,0),p()()()),n&2&&(m(6),w("ngClass",ne(4,Yn,r.tab=="daily")),m(2),w("ngClass",ne(6,Yn,r.tab=="monthly")),m(2),w("ngClass",ne(8,Yn,r.tab=="all-time")),m(5),U(15,r.players.length>0?15:16))},dependencies:[Ae,Ct],styles:['.background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative;padding-left:220px}.page_title[_ngcontent-%COMP%]{color:#3cf;padding:20px 0;font-size:38px;font-family:roboto-bold}.contents[_ngcontent-%COMP%]{padding:20px 20px 100px 240px}.button_primary[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_primary[_ngcontent-%COMP%]:hover{background-color:#0086b3}.button_secondary[_ngcontent-%COMP%]{color:#3cf;background-color:#fff;border-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3cf}.button_default[_ngcontent-%COMP%]{background-color:#fff;color:#d3d3d3;min-width:150px;border-color:#d3d3d3}.button_default[_ngcontent-%COMP%]:hover{color:gray;border-color:gray}.button_discrete[_ngcontent-%COMP%]{padding:20px 0;color:gray;border:none;outline:none}.button_discrete[_ngcontent-%COMP%]:hover{border:none;outline:none;text-decoration:underline}.back_button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:16px;outline:none;border:none}.back_button_words[_ngcontent-%COMP%]{cursor:pointer}.back_button_words[_ngcontent-%COMP%]:hover{text-decoration:underline;border:none;outline:none}.search_icon[_ngcontent-%COMP%]{color:gray;border-radius:50%;padding:5px 8px;width:33px;height:33px;position:absolute;top:3px;left:7px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.modal_header[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;height:54px}.modal_body[_ngcontent-%COMP%]{padding:60px 40px 40px;max-height:calc(100vh - 66px);overflow:auto}.modal_footer[_ngcontent-%COMP%]{background-color:#fff}.modal_title[_ngcontent-%COMP%]{color:#7f7f7f;font-size:30px;text-align:center;font-family:roboto-medium}.modal_close_button[_ngcontent-%COMP%]{color:#1e4f7a;position:absolute;top:15px;right:15px}.modal_close_icon[_ngcontent-%COMP%]{font-size:24px}.modal_close_button[_ngcontent-%COMP%]:hover{border:none;outline:none;color:#3cf}.modal_success_text[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:gray;margin:20px 0 0}.labelf[_ngcontent-%COMP%]{margin:20px 0 5px;color:#fff;font-family:roboto-medium}.labelfd[_ngcontent-%COMP%]{margin:20px 0 5px;color:gray;font-family:roboto-medium}.form_alert[_ngcontent-%COMP%]{color:#e2667d;font-style:italic;font-size:15px;text-align:right}.form_title[_ngcontent-%COMP%]{color:gray;font-size:32px;padding:20px 0}.form_label[_ngcontent-%COMP%]{margin:10px 0 0;width:200px}.form_input[_ngcontent-%COMP%]{border-radius:0;font-family:roboto-medium}.search_input_container[_ngcontent-%COMP%]{height:60px;padding-top:12px;padding-left:20px;display:inline-block}.remove_search_icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:80px;color:#d3d3d3;cursor:pointer;background-color:gray;padding:5px 6px 2px 5px;border-radius:50%;color:#f7f8fc}.search_input[_ngcontent-%COMP%]{border:solid 1px lightgrey;padding:5px 0 5px 55px;font-style:italic;color:#5a5b5f;border-radius:24px;width:350px;height:48px;box-shadow:1px 1px 1px #d3d3d3}.search_input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::placeholder{color:#5a5b5f;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#5a5b5f}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#5a5b5f}.invalid_feedback[_ngcontent-%COMP%]{text-align:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;height:24px;width:45px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.checkbox_container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#d3d3d3}.checkbox_container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#3cf}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox_container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.mz[_ngcontent-%COMP%]{margin:0}.pz[_ngcontent-%COMP%]{padding:0}.brz[_ngcontent-%COMP%]{border-radius:0}@media screen and (max-width: 992px){.cc[_ngcontent-%COMP%]{height:calc(100vh - 60px)}.content_container[_ngcontent-%COMP%]{padding:20px 10px}.page_title[_ngcontent-%COMP%]{margin:0;padding:45px 5px 0}}@media screen and (max-width: 768px){.cc[_ngcontent-%COMP%]{padding-bottom:200px}.remove_search_icon[_ngcontent-%COMP%]{top:12px}.background[_ngcontent-%COMP%]{padding:20px}}.submenu_container[_ngcontent-%COMP%]{padding:20px 0}.submenu_item[_ngcontent-%COMP%]{font-size:20px;display:inline-block;padding:0 15px;color:#fff;font-family:orbitron-medium;cursor:pointer}.tc[_ngcontent-%COMP%]{background-color:transparent;color:#fff;text-align:center;font-weight:600}.table_container[_ngcontent-%COMP%]{padding:30px 0}.graph_title[_ngcontent-%COMP%]{font-family:orbitron-bold;font-size:28px;color:#fff;text-align:center;padding:0 0 20px}.tablex[_ngcontent-%COMP%]{width:100%;max-width:500px;margin:auto}.player_image[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%}.selected[_ngcontent-%COMP%]{border-bottom:solid 2px white}.contentsx[_ngcontent-%COMP%]{padding:50px}.note[_ngcontent-%COMP%]{padding:30px 0;font-style:italic;color:#fff;font-size:20px;text-align:center}@media screen and (max-width: 768px){.contentsx[_ngcontent-%COMP%]{padding:20px}}']});let o=t;return o})();var Pe=Object.create(null);Pe.open="0";Pe.close="1";Pe.ping="2";Pe.pong="3";Pe.message="4";Pe.upgrade="5";Pe.noop="6";var ei=Object.create(null);Object.keys(Pe).forEach(o=>{ei[Pe[o]]=o});var ti={type:"error",data:"parser error"};var ds=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ps=typeof ArrayBuffer=="function",hs=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer,ii=({type:o,data:t},i,e)=>ds&&t instanceof Blob?i?e(t):cs(t,e):ps&&(t instanceof ArrayBuffer||hs(t))?i?e(t):cs(new Blob([t]),e):e(Pe[o]+(t||"")),cs=(o,t)=>{let i=new FileReader;return i.onload=function(){let e=i.result.split(",")[1];t("b"+(e||""))},i.readAsDataURL(o)};function ls(o){return o instanceof Uint8Array?o:o instanceof ArrayBuffer?new Uint8Array(o):new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}var Qn;function us(o,t){if(ds&&o.data instanceof Blob)return o.data.arrayBuffer().then(ls).then(t);if(ps&&(o.data instanceof ArrayBuffer||hs(o.data)))return t(ls(o.data));ii(o,!1,i=>{Qn||(Qn=new TextEncoder),t(Qn.encode(i))})}var ms="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ni=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let o=0;o<ms.length;o++)ni[ms.charCodeAt(o)]=o;var gs=o=>{let t=o.length*.75,i=o.length,e,n=0,r,s,c,h;o[o.length-1]==="="&&(t--,o[o.length-2]==="="&&t--);let x=new ArrayBuffer(t),S=new Uint8Array(x);for(e=0;e<i;e+=4)r=ni[o.charCodeAt(e)],s=ni[o.charCodeAt(e+1)],c=ni[o.charCodeAt(e+2)],h=ni[o.charCodeAt(e+3)],S[n++]=r<<2|s>>4,S[n++]=(s&15)<<4|c>>2,S[n++]=(c&3)<<6|h&63;return x};var Ll=typeof ArrayBuffer=="function",oi=(o,t)=>{if(typeof o!="string")return{type:"message",data:fs(o,t)};let i=o.charAt(0);return i==="b"?{type:"message",data:Nl(o.substring(1),t)}:ei[i]?o.length>1?{type:ei[i],data:o.substring(1)}:{type:ei[i]}:ti},Nl=(o,t)=>{if(Ll){let i=gs(o);return fs(i,t)}else return{base64:!0,data:o}},fs=(o,t)=>{switch(t){case"blob":return o instanceof Blob?o:new Blob([o]);case"arraybuffer":default:return o instanceof ArrayBuffer?o:o.buffer}};var _s="",xs=(o,t)=>{let i=o.length,e=new Array(i),n=0;o.forEach((r,s)=>{ii(r,!1,c=>{e[s]=c,++n===i&&t(e.join(_s))})})},vs=(o,t)=>{let i=o.split(_s),e=[];for(let n=0;n<i.length;n++){let r=oi(i[n],t);if(e.push(r),r.type==="error")break}return e};function bs(){return new TransformStream({transform(o,t){us(o,i=>{let e=i.length,n;if(e<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,e);else if(e<65536){n=new Uint8Array(3);let r=new DataView(n.buffer);r.setUint8(0,126),r.setUint16(1,e)}else{n=new Uint8Array(9);let r=new DataView(n.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(e))}o.data&&typeof o.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(i)})}})}var Gn;function ji(o){return o.reduce((t,i)=>t+i.length,0)}function Yi(o,t){if(o[0].length===t)return o.shift();let i=new Uint8Array(t),e=0;for(let n=0;n<t;n++)i[n]=o[0][e++],e===o[0].length&&(o.shift(),e=0);return o.length&&e<o[0].length&&(o[0]=o[0].slice(e)),i}function Cs(o,t){Gn||(Gn=new TextDecoder);let i=[],e=0,n=-1,r=!1;return new TransformStream({transform(s,c){for(i.push(s);;){if(e===0){if(ji(i)<1)break;let h=Yi(i,1);r=(h[0]&128)===128,n=h[0]&127,n<126?e=3:n===126?e=1:e=2}else if(e===1){if(ji(i)<2)break;let h=Yi(i,2);n=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),e=3}else if(e===2){if(ji(i)<8)break;let h=Yi(i,8),x=new DataView(h.buffer,h.byteOffset,h.length),S=x.getUint32(0);if(S>Math.pow(2,21)-1){c.enqueue(ti);break}n=S*Math.pow(2,32)+x.getUint32(4),e=3}else{if(ji(i)<n)break;let h=Yi(i,n);c.enqueue(oi(r?h:Gn.decode(h),t)),e=0}if(n===0||n>o){c.enqueue(ti);break}}}})}var Xn=4;function q(o){if(o)return Dl(o)}function Dl(o){for(var t in q.prototype)o[t]=q.prototype[t];return o}q.prototype.on=q.prototype.addEventListener=function(o,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(t),this};q.prototype.once=function(o,t){function i(){this.off(o,i),t.apply(this,arguments)}return i.fn=t,this.on(o,i),this};q.prototype.off=q.prototype.removeListener=q.prototype.removeAllListeners=q.prototype.removeEventListener=function(o,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+o];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+o],this;for(var e,n=0;n<i.length;n++)if(e=i[n],e===t||e.fn===t){i.splice(n,1);break}return i.length===0&&delete this._callbacks["$"+o],this};q.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+o],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(i){i=i.slice(0);for(var e=0,n=i.length;e<n;++e)i[e].apply(this,t)}return this};q.prototype.emitReserved=q.prototype.emit;q.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]};q.prototype.hasListeners=function(o){return!!this.listeners(o).length};var de=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function Qi(o,...t){return t.reduce((i,e)=>(o.hasOwnProperty(e)&&(i[e]=o[e]),i),{})}var Ul=de.setTimeout,Fl=de.clearTimeout;function Ue(o,t){t.useNativeTimers?(o.setTimeoutFn=Ul.bind(de),o.clearTimeoutFn=Fl.bind(de)):(o.setTimeoutFn=de.setTimeout.bind(de),o.clearTimeoutFn=de.clearTimeout.bind(de))}var ql=1.33;function ys(o){return typeof o=="string"?Wl(o):Math.ceil((o.byteLength||o.size)*ql)}function Wl(o){let t=0,i=0;for(let e=0,n=o.length;e<n;e++)t=o.charCodeAt(e),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(e++,i+=4);return i}function ws(o){let t="";for(let i in o)o.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(o[i]));return t}function Ms(o){let t={},i=o.split("&");for(let e=0,n=i.length;e<n;e++){let r=i[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}var Gi=class extends Error{constructor(t,i,e){super(t),this.description=i,this.context=e,this.type="TransportError"}},Fe=class extends q{constructor(t){super(),this.writable=!1,Ue(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,i,e){return super.emitReserved("error",new Gi(t,i,e)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){let i=oi(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,i={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){let t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){let i=ws(t);return i.length?"?"+i:""}};var Ps="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Kn=64,Hl={},Ss=0,Xi=0,Es;function Os(o){let t="";do t=Ps[o%Kn]+t,o=Math.floor(o/Kn);while(o>0);return t}function Ki(){let o=Os(+new Date);return o!==Es?(Ss=0,Es=o):o+"."+Os(Ss++)}for(;Xi<Kn;Xi++)Hl[Ps[Xi]]=Xi;var Ts=!1;try{Ts=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}var ks=Ts;function Jn(o){let t=o.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ks))return new XMLHttpRequest}catch{}if(!t)try{return new de[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function jl(){}var Yl=function(){return new Jn({xdomain:!1}).responseType!=null}(),Zi=class extends Fe{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){let e=location.protocol==="https:",n=location.port;n||(n=e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}let i=t&&t.forceBase64;this.supportsBinary=Yl&&!i,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";let i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",function(){--e||i()})),this.writable||(e++,this.once("drain",function(){--e||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){let i=e=>{if(this.readyState==="opening"&&e.type==="open"&&this.onOpen(),e.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};vs(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){let t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,xs(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let t=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=Ki()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(t,i)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ji(this.uri(),t)}doWrite(t,i){let e=this.request({method:"POST",data:t});e.on("success",i),e.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){let t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,e)=>{this.onError("xhr poll error",i,e)}),this.pollXhr=t}},Ji=(()=>{class o extends q{constructor(i,e){super(),Ue(this,e),this.opts=e,this.method=e.method||"GET",this.uri=i,this.data=e.data!==void 0?e.data:null,this.create()}create(){var i;let e=Qi(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;let n=this.xhr=new Jn(e);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(i=this.opts.cookieJar)===null||i===void 0||i.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var r;n.readyState===3&&((r=this.opts.cookieJar)===null||r===void 0||r.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document<"u"&&(this.index=o.requestsCount++,o.requests[this.index]=this)}onError(i){this.emitReserved("error",i,this.xhr),this.cleanup(!0)}cleanup(i){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=jl,i)try{this.xhr.abort()}catch{}typeof document<"u"&&delete o.requests[this.index],this.xhr=null}}onLoad(){let i=this.xhr.responseText;i!==null&&(this.emitReserved("data",i),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return o.requestsCount=0,o.requests={},o})();if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Is);else if(typeof addEventListener=="function"){let o="onpagehide"in de?"pagehide":"unload";addEventListener(o,Is,!1)}}function Is(){for(let o in Ji.requests)Ji.requests.hasOwnProperty(o)&&Ji.requests[o].abort()}var at=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0),ri=de.WebSocket||de.MozWebSocket,$i=!0,As="arraybuffer";var Rs=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",en=class extends Fe{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let t=this.uri(),i=this.opts.protocols,e=Rs?{}:Qi(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(e.headers=this.opts.extraHeaders);try{this.ws=$i&&!Rs?i?new ri(t,i):new ri(t):new ri(t,i,e)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){let e=t[i],n=i===t.length-1;ii(e,this.supportsBinary,r=>{let s={};$i||(e.options&&(s.compress=e.options.compress),this.opts.perMessageDeflate&&(typeof r=="string"?Buffer.byteLength(r):r.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1));try{$i?this.ws.send(r):this.ws.send(r,s)}catch{}n&&at(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let t=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=Ki()),this.supportsBinary||(i.b64=1),this.createUri(t,i)}check(){return!!ri}};var tn=class extends Fe{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{let i=Cs(Number.MAX_SAFE_INTEGER,this.socket.binaryType),e=t.readable.pipeThrough(i).getReader(),n=bs();n.readable.pipeTo(t.writable),this.writer=n.writable.getWriter();let r=()=>{e.read().then(({done:c,value:h})=>{c||(this.onPacket(h),r())}).catch(c=>{})};r();let s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this.writer.write(s).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let i=0;i<t.length;i++){let e=t[i],n=i===t.length-1;this.writer.write(e).then(()=>{n&&at(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}};var Zn={websocket:en,webtransport:tn,polling:Zi};var Ql=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gl=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Tt(o){if(o.length>2e3)throw"URI too long";let t=o,i=o.indexOf("["),e=o.indexOf("]");i!=-1&&e!=-1&&(o=o.substring(0,i)+o.substring(i,e).replace(/:/g,";")+o.substring(e,o.length));let n=Ql.exec(o||""),r={},s=14;for(;s--;)r[Gl[s]]=n[s]||"";return i!=-1&&e!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Xl(r,r.path),r.queryKey=Kl(r,r.query),r}function Xl(o,t){let i=/\/{2,9}/g,e=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&e.splice(0,1),t.slice(-1)=="/"&&e.splice(e.length-1,1),e}function Kl(o,t){let i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,n,r){n&&(i[n]=r)}),i}var nn=(()=>{class o extends q{constructor(i,e={}){super(),this.binaryType=As,this.writeBuffer=[],i&&typeof i=="object"&&(e=i,i=null),i?(i=Tt(i),e.hostname=i.host,e.secure=i.protocol==="https"||i.protocol==="wss",e.port=i.port,i.query&&(e.query=i.query)):e.host&&(e.hostname=Tt(e.host).host),Ue(this,e),this.secure=e.secure!=null?e.secure:typeof location<"u"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=e.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ms(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(i){let e=Object.assign({},this.opts.query);e.EIO=Xn,e.transport=i,this.id&&(e.sid=this.id);let n=Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[i]);return new Zn[i](n)}open(){let i;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)i="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else i=this.transports[0];this.readyState="opening";try{i=this.createTransport(i)}catch{this.transports.shift(),this.open();return}i.open(),this.setTransport(i)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(i){let e=this.createTransport(i),n=!1;o.priorWebsocketSuccess=!1;let r=()=>{n||(e.send([{type:"ping",data:"probe"}]),e.once("packet",E=>{if(!n)if(E.type==="pong"&&E.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;o.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(O(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{let B=new Error("probe error");B.transport=e.name,this.emitReserved("upgradeError",B)}}))};function s(){n||(n=!0,O(),e.close(),e=null)}let c=E=>{let B=new Error("probe error: "+E);B.transport=e.name,s(),this.emitReserved("upgradeError",B)};function h(){c("transport closed")}function x(){c("socket closed")}function S(E){e&&E.name!==e.name&&s()}let O=()=>{e.removeListener("open",r),e.removeListener("error",c),e.removeListener("close",h),this.off("close",x),this.off("upgrading",S)};e.once("open",r),e.once("error",c),e.once("close",h),this.once("close",x),this.once("upgrading",S),this.upgrades.indexOf("webtransport")!==-1&&i!=="webtransport"?this.setTimeoutFn(()=>{n||e.open()},200):e.open()}onOpen(){if(this.readyState="open",o.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let i=0,e=this.upgrades.length;for(;i<e;i++)this.probe(this.upgrades[i])}}onPacket(i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),this.resetPingTimeout(),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let e=new Error("server error");e.code=i.data,this.onError(e);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data);break}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this.upgrades=this.filterUpgrades(i.upgrades),this.pingInterval=i.pingInterval,this.pingTimeout=i.pingTimeout,this.maxPayload=i.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let i=this.getWritablePackets();this.transport.send(i),this.prevBufferLen=i.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){let r=this.writeBuffer[n].data;if(r&&(e+=ys(r)),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}write(i,e,n){return this.sendPacket("message",i,e,n),this}send(i,e,n){return this.sendPacket("message",i,e,n),this}sendPacket(i,e,n,r){if(typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;let s={type:i,data:e,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),r&&this.once("flush",r),this.flush()}close(){let i=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),i()},n=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():i()}):this.upgrading?n():i()),this}onError(i){o.priorWebsocketSuccess=!1,this.emitReserved("error",i),this.onClose("transport error",i)}onClose(i,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",i,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(i){let e=[],n=0,r=i.length;for(;n<r;n++)~this.transports.indexOf(i[n])&&e.push(i[n]);return e}}return o.protocol=Xn,o})();var ku=nn.protocol;function zs(o,t="",i){let e=o;i=i||typeof location<"u"&&location,o==null&&(o=i.protocol+"//"+i.host),typeof o=="string"&&(o.charAt(0)==="/"&&(o.charAt(1)==="/"?o=i.protocol+o:o=i.host+o),/^(https?|wss?):\/\//.test(o)||(typeof i<"u"?o=i.protocol+"//"+o:o="https://"+o),e=Tt(o)),e.port||(/^(http|ws)$/.test(e.protocol)?e.port="80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443")),e.path=e.path||"/";let r=e.host.indexOf(":")!==-1?"["+e.host+"]":e.host;return e.id=e.protocol+"://"+r+":"+e.port+t,e.href=e.protocol+"://"+r+(i&&i.port===e.port?"":":"+e.port),e}var oo={};ka(oo,{Decoder:()=>io,Encoder:()=>to,PacketType:()=>V,protocol:()=>Ds});var Jl=typeof ArrayBuffer=="function",Zl=o=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer,Vs=Object.prototype.toString,$l=typeof Blob=="function"||typeof Blob<"u"&&Vs.call(Blob)==="[object BlobConstructor]",ed=typeof File=="function"||typeof File<"u"&&Vs.call(File)==="[object FileConstructor]";function ai(o){return Jl&&(o instanceof ArrayBuffer||Zl(o))||$l&&o instanceof Blob||ed&&o instanceof File}function si(o,t){if(!o||typeof o!="object")return!1;if(Array.isArray(o)){for(let i=0,e=o.length;i<e;i++)if(si(o[i]))return!0;return!1}if(ai(o))return!0;if(o.toJSON&&typeof o.toJSON=="function"&&arguments.length===1)return si(o.toJSON(),!0);for(let i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&si(o[i]))return!0;return!1}function Bs(o){let t=[],i=o.data,e=o;return e.data=$n(i,t),e.attachments=t.length,{packet:e,buffers:t}}function $n(o,t){if(!o)return o;if(ai(o)){let i={_placeholder:!0,num:t.length};return t.push(o),i}else if(Array.isArray(o)){let i=new Array(o.length);for(let e=0;e<o.length;e++)i[e]=$n(o[e],t);return i}else if(typeof o=="object"&&!(o instanceof Date)){let i={};for(let e in o)Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=$n(o[e],t));return i}return o}function Ls(o,t){return o.data=eo(o.data,t),delete o.attachments,o}function eo(o,t){if(!o)return o;if(o&&o._placeholder===!0){if(typeof o.num=="number"&&o.num>=0&&o.num<t.length)return t[o.num];throw new Error("illegal attachments")}else if(Array.isArray(o))for(let i=0;i<o.length;i++)o[i]=eo(o[i],t);else if(typeof o=="object")for(let i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=eo(o[i],t));return o}var td=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ds=5,V=function(o){return o[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK",o}(V||{}),to=class{constructor(t){this.replacer=t}encode(t){return(t.type===V.EVENT||t.type===V.ACK)&&si(t)?this.encodeAsBinary({type:t.type===V.EVENT?V.BINARY_EVENT:V.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===V.BINARY_EVENT||t.type===V.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){let i=Bs(t),e=this.encodeAsString(i.packet),n=i.buffers;return n.unshift(e),n}};function Ns(o){return Object.prototype.toString.call(o)==="[object Object]"}var io=class o extends q{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);let e=i.type===V.BINARY_EVENT;e||i.type===V.BINARY_ACK?(i.type=e?V.EVENT:V.ACK,this.reconstructor=new no(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(ai(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0,e={type:Number(t.charAt(0))};if(V[e.type]===void 0)throw new Error("unknown packet type "+e.type);if(e.type===V.BINARY_EVENT||e.type===V.BINARY_ACK){let r=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);let s=t.substring(r,i);if(s!=Number(s)||t.charAt(i)!=="-")throw new Error("Illegal attachments");e.attachments=Number(s)}if(t.charAt(i+1)==="/"){let r=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););e.nsp=t.substring(r,i)}else e.nsp="/";let n=t.charAt(i+1);if(n!==""&&Number(n)==n){let r=i+1;for(;++i;){let s=t.charAt(i);if(s==null||Number(s)!=s){--i;break}if(i===t.length)break}e.id=Number(t.substring(r,i+1))}if(t.charAt(++i)){let r=this.tryParse(t.substr(i));if(o.isPayloadValid(e.type,r))e.data=r;else throw new Error("invalid payload")}return e}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case V.CONNECT:return Ns(i);case V.DISCONNECT:return i===void 0;case V.CONNECT_ERROR:return typeof i=="string"||Ns(i);case V.EVENT:case V.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&td.indexOf(i[0])===-1);case V.ACK:case V.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},no=class{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){let i=Ls(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function _e(o,t,i){return o.on(t,i),function(){o.off(t,i)}}var id=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),kt=class extends q{constructor(t,i,e){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,e&&e.auth&&(this.auth=e.auth),this._opts=Object.assign({},e),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let t=this.io;this.subs=[_e(t,"open",this.onopen.bind(this)),_e(t,"packet",this.onpacket.bind(this)),_e(t,"error",this.onerror.bind(this)),_e(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(id.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;let e={type:V.EVENT,data:i};if(e.options={},e.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){let s=this.ids++,c=i.pop();this._registerAckCallback(s,c),e.id=s}let n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={},this}_registerAckCallback(t,i){var e;let n=(e=this.flags.timeout)!==null&&e!==void 0?e:this._opts.ackTimeout;if(n===void 0){this.acks[t]=i;return}let r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);i.call(this,new Error("operation has timed out"))},n),s=(...c)=>{this.io.clearTimeoutFn(r),i.apply(this,c)};s.withError=!0,this.acks[t]=s}emitWithAck(t,...i){return new Promise((e,n)=>{let r=(s,c)=>s?n(s):e(c);r.withError=!0,i.push(r),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());let e={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...r)=>e!==this._queue[0]?void 0:(n!==null?e.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(n)):(this._queue.shift(),i&&i(null,...r)),e.pending=!1,this._drainQueue())),this._queue.push(e),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;let i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:V.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(e=>String(e.id)===t)){let e=this.acks[t];delete this.acks[t],e.withError&&e.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case V.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case V.EVENT:case V.BINARY_EVENT:this.onevent(t);break;case V.ACK:case V.BINARY_ACK:this.onack(t);break;case V.DISCONNECT:this.ondisconnect();break;case V.CONNECT_ERROR:this.destroy();let e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e);break}}onevent(t){let i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){let i=this._anyListeners.slice();for(let e of i)e.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){let i=this,e=!1;return function(...n){e||(e=!0,i.packet({type:V.ACK,id:t,data:n}))}}onack(t){let i=this.acks[t.id];typeof i=="function"&&(delete this.acks[t.id],i.withError&&t.data.unshift(null),i.apply(this,t.data))}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:V.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){let i=this._anyListeners;for(let e=0;e<i.length;e++)if(t===i[e])return i.splice(e,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){let i=this._anyOutgoingListeners;for(let e=0;e<i.length;e++)if(t===i[e])return i.splice(e,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let i=this._anyOutgoingListeners.slice();for(let e of i)e.apply(this,t.data)}}};function ct(o){o=o||{},this.ms=o.min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}ct.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*o);o=Math.floor(t*10)&1?o+i:o-i}return Math.min(o,this.max)|0};ct.prototype.reset=function(){this.attempts=0};ct.prototype.setMin=function(o){this.ms=o};ct.prototype.setMax=function(o){this.max=o};ct.prototype.setJitter=function(o){this.jitter=o};var It=class extends q{constructor(t,i){var e;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,Ue(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((e=i.randomizationFactor)!==null&&e!==void 0?e:.5),this.backoff=new ct({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;let n=i.parser||oo;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new nn(this.uri,this.opts);let i=this.engine,e=this;this._readyState="opening",this.skipReconnect=!1;let n=_e(i,"open",function(){e.onopen(),t&&t()}),r=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},s=_e(i,"error",r);if(this._timeout!==!1){let c=this._timeout,h=this.setTimeoutFn(()=>{n(),r(new Error("timeout")),i.close()},c);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(n),this.subs.push(s),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let t=this.engine;this.subs.push(_e(t,"ping",this.onping.bind(this)),_e(t,"data",this.ondata.bind(this)),_e(t,"error",this.onerror.bind(this)),_e(t,"close",this.onclose.bind(this)),_e(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){at(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let e=this.nsps[t];return e?this._autoConnect&&!e.active&&e.connect():(e=new kt(this,t,i),this.nsps[t]=e),e}_destroy(t){let i=Object.keys(this.nsps);for(let e of i)if(this.nsps[e].active)return;this._close()}_packet(t){let i=this.encoder.encode(t);for(let e=0;e<i.length;e++)this.engine.write(i[e],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let i=this.backoff.duration();this._reconnecting=!0;let e=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},i);this.opts.autoUnref&&e.unref(),this.subs.push(()=>{this.clearTimeoutFn(e)})}}onreconnect(){let t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}};var ci={};function li(o,t){typeof o=="object"&&(t=o,o=void 0),t=t||{};let i=zs(o,t.path||"/socket.io"),e=i.source,n=i.id,r=i.path,s=ci[n]&&r in ci[n].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||s,h;return c?h=new It(e,t):(ci[n]||(ci[n]=new It(e,t)),h=ci[n]),i.query&&!t.query&&(t.query=i.queryKey),h.socket(i.path,t)}Object.assign(li,{Manager:It,Socket:kt,io:li,connect:li});var Us=(()=>{let t=class t{constructor(){this._getMessage=new Eo(void 0),this.connect()}connect(){this.socket=li(Fo.baseurl),this.socket.on("connect",()=>{console.log("Connected to the server")}),this.socket.on("disconnect",()=>{console.log("Disconnected from the server")}),this.socket.on("message",e=>{this._getMessage.next(e),this._getMessage.next(void 0)})}sendMessage(e){this.socket.emit("message",e)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var od=o=>({"animated-circle":o}),on=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-timer"]],inputs:{time:"time"},standalone:!0,features:[Ge],decls:2,vars:4,consts:[[1,"timer",3,"ngClass"]],template:function(n,r){n&1&&(d(0,"div",0),g(1),p()),n&2&&(w("ngClass",ne(2,od,r.time<4&&r.time>0)),m(),ee(" ",r.time,`
`))},dependencies:[vt,Ae],styles:[".timer[_ngcontent-%COMP%]{width:80px;height:80px;background-color:transparent;border-radius:50%;position:absolute;top:0;right:1%;font-size:3em;padding:0 .4em;color:#fff;border:solid 3px;font-family:orbitron-medium}.animated-circle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_colorChange 1s infinite}@media screen and (max-width: 768px){.timer[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2em;padding:.2em .5em;font-family:orbitron-medium;margin-top:5px}}@media screen and (min-width: 768px){.animated-circle[_ngcontent-%COMP%]{animation:none}}@keyframes _ngcontent-%COMP%_colorChange{0%,to{background-color:transparent}50%{background-color:red}}@media screen and (max-height: 500px){.timer[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2em;padding:.2em .5em;font-family:orbitron-medium;margin-top:5px}}"]});let o=t;return o})();var di=o=>({green:o});function sd(o,t){if(o&1&&(y(0,"div",9)(1,"div",9)(2,"div",9)(3,"div",9)(4,"div",9),g(5," \xA0 ")),o&2){let i=f(2);w("ngClass",ne(5,di,i.user.lives>=1)),m(),w("ngClass",ne(7,di,i.user.lives>=2)),m(),w("ngClass",ne(9,di,i.user.lives>=3)),m(),w("ngClass",ne(11,di,i.user.lives>=4)),m(),w("ngClass",ne(13,di,i.user.lives==5))}}function ad(o,t){if(o&1){let i=R();d(0,"div",0),y(1,"img",5),g(2,"\xA0 "),y(3,"i",6),g(4),T(5,sd,6,15),y(6,"i",7),g(7),d(8,"button",8),M("click",function(){v(i);let n=f();return b(n.confirmExit())}),g(9,"Exit"),p()()}if(o&2){let i=f();m(),K("src",i.user.image,j),m(3),Oe("\xA0",i.user.points," | ",i.user.daily_high?i.user.daily_high:i.user.points," \xA0 "),m(),U(5,i.show_lives?5:-1),m(2),ee("\xA0",i.active_players," ")}}function cd(o,t){if(o&1){let i=R();d(0,"div",10)(1,"em"),y(2,"i",7),g(3),p(),d(4,"button",8),M("click",function(){v(i);let n=f();return b(n.confirmExit())}),g(5,"Exit"),p()()}if(o&2){let i=f();m(3),ee("\xA0\xA0Total Daily Plays: ",i.active_players,"")}}function ld(o,t){if(o&1){let i=R();d(0,"div",11)(1,"button",12),M("click",function(){v(i);let n=f();return b(n.closeModal("confirmExitModal"))}),y(2,"i",13),p(),d(3,"h1",14),g(4,"Are you sure you want to exit the game?"),p(),d(5,"div",15)(6,"button",16),M("click",function(){v(i);let n=f();return b(n.exitGame())}),g(7,"YES"),p(),y(8,"br")(9,"br"),d(10,"button",16),M("click",function(){v(i);let n=f();return b(n.closeModal("confirmExitModal"))}),g(11,"NO"),p()()()}}var rn=(()=>{let t=class t{constructor(e){this.router=e}ngOnChanges(e){this.number_of_users=10+Math.round(Math.random()*10)}confirmExit(){$("#confirmExitModal").modal("show")}exitGame(){$("#confirmExitModal").modal("hide"),this.user.account_type=="player"?this.router.navigate(["user/user-dashboard"]):this.router.navigate(["business/business-dashboard"])}closeModal(e){$("#"+e).modal("hide")}};t.\u0275fac=function(n){return new(n||t)(I(Ce))},t.\u0275cmp=A({type:t,selectors:[["app-user-stats"]],inputs:{user:"user",counter:"counter",active_players:"active_players",show_lives:"show_lives",on_fire:"on_fire"},standalone:!0,features:[ge,Ge],decls:6,vars:2,consts:[[1,"user_stats"],["id","confirmExitModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"hidden"],["role","document",1,"modal-dialog"],[1,"modal-content"],["class","modal-body modal_body",4,"ngIf"],[1,"user_image",3,"src"],[1,"fa-solid","fa-arrow-trend-up","trend_icon"],[1,"fa-solid","fa-user","user_icon"],[1,"btn","btn-default","button_primary","button_exit",3,"click"],[1,"life_circle",3,"ngClass"],[1,"game_stats"],[1,"modal-body","modal_body"],["data-dismiss","modal",1,"btn","btn-default","modal_close_button",3,"click"],[1,"fa","fa-times","modal_close_icon"],[1,"modal_title"],[1,"text-center",2,"padding","25px 0"],["type","button",1,"btn","btn-default","button_primary",3,"click"]],template:function(n,r){n&1&&(T(0,ad,10,5,"div",0)(1,cd,6,1),d(2,"div",1)(3,"div",2)(4,"div",3),T(5,ld,12,0,"div",4),p()()()),n&2&&(U(0,r.user.account_type=="player"?0:1),m(5),w("ngIf",r.user))},dependencies:[vt,Ae,fe],styles:['.background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative;padding-left:220px}.page_title[_ngcontent-%COMP%]{color:#3cf;padding:20px 0;font-size:38px;font-family:roboto-bold}.contents[_ngcontent-%COMP%]{padding:20px 20px 100px 240px}.button_primary[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_primary[_ngcontent-%COMP%]:hover{background-color:#0086b3}.button_secondary[_ngcontent-%COMP%]{color:#3cf;background-color:#fff;border-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3cf}.button_default[_ngcontent-%COMP%]{background-color:#fff;color:#d3d3d3;min-width:150px;border-color:#d3d3d3}.button_default[_ngcontent-%COMP%]:hover{color:gray;border-color:gray}.button_discrete[_ngcontent-%COMP%]{padding:20px 0;color:gray;border:none;outline:none}.button_discrete[_ngcontent-%COMP%]:hover{border:none;outline:none;text-decoration:underline}.back_button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:16px;outline:none;border:none}.back_button_words[_ngcontent-%COMP%]{cursor:pointer}.back_button_words[_ngcontent-%COMP%]:hover{text-decoration:underline;border:none;outline:none}.search_icon[_ngcontent-%COMP%]{color:gray;border-radius:50%;padding:5px 8px;width:33px;height:33px;position:absolute;top:3px;left:7px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.modal_header[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;height:54px}.modal_body[_ngcontent-%COMP%]{padding:60px 40px 40px;max-height:calc(100vh - 66px);overflow:auto}.modal_footer[_ngcontent-%COMP%]{background-color:#fff}.modal_title[_ngcontent-%COMP%]{color:#7f7f7f;font-size:30px;text-align:center;font-family:roboto-medium}.modal_close_button[_ngcontent-%COMP%]{color:#1e4f7a;position:absolute;top:15px;right:15px}.modal_close_icon[_ngcontent-%COMP%]{font-size:24px}.modal_close_button[_ngcontent-%COMP%]:hover{border:none;outline:none;color:#3cf}.modal_success_text[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:gray;margin:20px 0 0}.labelf[_ngcontent-%COMP%]{margin:20px 0 5px;color:#fff;font-family:roboto-medium}.labelfd[_ngcontent-%COMP%]{margin:20px 0 5px;color:gray;font-family:roboto-medium}.form_alert[_ngcontent-%COMP%]{color:#e2667d;font-style:italic;font-size:15px;text-align:right}.form_title[_ngcontent-%COMP%]{color:gray;font-size:32px;padding:20px 0}.form_label[_ngcontent-%COMP%]{margin:10px 0 0;width:200px}.form_input[_ngcontent-%COMP%]{border-radius:0;font-family:roboto-medium}.search_input_container[_ngcontent-%COMP%]{height:60px;padding-top:12px;padding-left:20px;display:inline-block}.remove_search_icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:80px;color:#d3d3d3;cursor:pointer;background-color:gray;padding:5px 6px 2px 5px;border-radius:50%;color:#f7f8fc}.search_input[_ngcontent-%COMP%]{border:solid 1px lightgrey;padding:5px 0 5px 55px;font-style:italic;color:#5a5b5f;border-radius:24px;width:350px;height:48px;box-shadow:1px 1px 1px #d3d3d3}.search_input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::placeholder{color:#5a5b5f;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#5a5b5f}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#5a5b5f}.invalid_feedback[_ngcontent-%COMP%]{text-align:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;height:24px;width:45px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.checkbox_container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#d3d3d3}.checkbox_container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#3cf}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox_container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.mz[_ngcontent-%COMP%]{margin:0}.pz[_ngcontent-%COMP%]{padding:0}.brz[_ngcontent-%COMP%]{border-radius:0}@media screen and (max-width: 992px){.cc[_ngcontent-%COMP%]{height:calc(100vh - 60px)}.content_container[_ngcontent-%COMP%]{padding:20px 10px}.page_title[_ngcontent-%COMP%]{margin:0;padding:45px 5px 0}}@media screen and (max-width: 768px){.cc[_ngcontent-%COMP%]{padding-bottom:200px}.remove_search_icon[_ngcontent-%COMP%]{top:12px}.background[_ngcontent-%COMP%]{padding:20px}}.user_stats[_ngcontent-%COMP%]{color:#fff;font-size:1.2em;padding:0 10px 20px}.life_circle[_ngcontent-%COMP%]{width:12px;height:12px;display:inline-block;border-radius:50%;background-color:red;margin:0 1px;vertical-align:middle}.green[_ngcontent-%COMP%]{background-color:#adff2f!important}.red[_ngcontent-%COMP%]{background-color:red!important}.trend_icon[_ngcontent-%COMP%]{color:#adff2f;font-size:18px}.game_stats[_ngcontent-%COMP%]{color:#fff;font-size:1.5em;padding:1% 0 0 1%}.user_icon[_ngcontent-%COMP%]{color:#3cf;font-size:20px}.user_image[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;border-radius:50%;display:inline-block}.button_exit[_ngcontent-%COMP%]{font-size:16px;padding:0 10px;min-width:auto;display:inline-block;margin:0 7px}.user_on_fire[_ngcontent-%COMP%]{width:50px;position:absolute;left:10px}@media screen and (max-height: 500px){.game_stats[_ngcontent-%COMP%]{font-size:1em}}']});let o=t;return o})();var sn=(()=>{let t=class t{ngOnChanges(e){var n=Math.floor(Math.random()*this.banners.length);n==this.banners.length&&(n-=1),this.banner="https://sportzbattle.blob.core.windows.net/advertisements/"+this.banners[n]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-question-footer4"]],inputs:{counter:"counter",venue_id:"venue_id",banners:"banners"},standalone:!0,features:[ge,Ge],decls:11,vars:6,consts:[[1,"banner",3,"src"],[1,"row","join_container"],[1,"col-12","col-md-6","qrcode_container"],[1,"join_text"],[1,"text-center"],[3,"qrdata","width","margin","errorCorrectionLevel"],[1,"join_url"],[1,"col-12","col-md-6","logo_container"],["src","../../../assets/images/logo.png",1,"logo_with_words"]],template:function(n,r){n&1&&(y(0,"img",0),d(1,"div",1)(2,"div",2)(3,"div",3),g(4,"Join the battle and win money. Its FREE!!!"),p(),d(5,"div",4),y(6,"qrcode",5),p(),d(7,"div",6),g(8),p()(),d(9,"div",7),y(10,"img",8),p()()),n&2&&(K("src",r.banner,j),m(6),w("qrdata","sptzba.com/join/"+r.venue_id)("width",175)("margin",2)("errorCorrectionLevel","M"),m(2),k("sptzba.com/join/"+r.venue_id))},dependencies:[Ui,Di],styles:[".join_container[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;margin:3% 0;padding-bottom:2%;width:100%;height:20vh}.join_text[_ngcontent-%COMP%]{font-size:1.2em;color:#fff;text-align:center;padding:0 0 1.5%;font-family:orbitron-medium}.join_url[_ngcontent-%COMP%]{color:#ff0;font-size:1.5em;font-family:roboto-bold;text-align:center;padding-top:1.5%}.logo_with_words[_ngcontent-%COMP%]{height:100%;margin:auto;display:block;object-fit:contain}.qrcode_container[_ngcontent-%COMP%]{height:100%}.qr_code[_ngcontent-%COMP%]{height:60%;margin:auto;display:block}.logo_container[_ngcontent-%COMP%]{height:100%}.logo_words_container[_ngcontent-%COMP%]{display:none}.logo_words[_ngcontent-%COMP%]{width:80%;margin:auto;display:block}.button_invite_friend[_ngcontent-%COMP%]{background-color:#b30000;color:#fff;font-family:orbitron-medium;font-size:20px}.invite_friend_container[_ngcontent-%COMP%]{display:none}.banner[_ngcontent-%COMP%]{height:8%;margin:1% auto;display:block}@media screen and (max-width: 768px){.logo_with_words[_ngcontent-%COMP%]{display:none}.join_text[_ngcontent-%COMP%]{padding-top:0}.join_url[_ngcontent-%COMP%]{font-size:1em}.logo_words_container[_ngcontent-%COMP%]{display:block}.qrcode_container[_ngcontent-%COMP%], .logo_container[_ngcontent-%COMP%]{display:none}.join_container[_ngcontent-%COMP%]{height:auto}.invite_friend_container[_ngcontent-%COMP%]{display:block}.banner[_ngcontent-%COMP%]{width:100%;height:auto;margin:3% auto}}@media screen and (max-height: 750px){.question_container[_ngcontent-%COMP%]{padding-top:3%}.join_container[_ngcontent-%COMP%]{margin:2% 0}}@media screen and (max-height: 500px){.join_text[_ngcontent-%COMP%], .join_url[_ngcontent-%COMP%]{font-size:.75em}}"]});let o=t;return o})();var Fs=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-splash"]],decls:9,vars:0,consts:[["src","../../../assets/images/logo.png",1,"logo"],["src","../../../assets/images/logo_words.png",1,"logo_words"],[2,"position","relative"],[1,"hero_text"],[1,"loading"],[1,"est"]],template:function(n,r){n&1&&(y(0,"img",0)(1,"img",1),d(2,"div",2)(3,"p",3),g(4,"Battle On"),p(),d(5,"div",4),g(6,"Loading..."),p(),d(7,"div",5),g(8,"Est. 2024"),p()())},styles:[".logo[_ngcontent-%COMP%]{width:100%;max-height:50%;margin:auto;display:block;object-fit:contain;padding-top:5%;animation:_ngcontent-%COMP%_blurToClear 3s ease-out forwards}@keyframes _ngcontent-%COMP%_blurToClear{0%{filter:blur(15px)}to{filter:blur(0px)}}.logo_words[_ngcontent-%COMP%]{margin:auto;display:block;padding:30px 0;width:100%;max-width:760px}.hero_text[_ngcontent-%COMP%]{color:#fff;font-size:2em;text-align:center;font-family:orbitron-bold;padding:0 10px}.loading[_ngcontent-%COMP%]{font-family:orbitron-regular;font-size:1.2em;text-align:center;color:#fff}@media screen and (max-width: 768px){.logo[_ngcontent-%COMP%]{width:90%;padding-top:35px}.logo_words[_ngcontent-%COMP%]{width:90%}.hero_text[_ngcontent-%COMP%]{font-size:1.6em}}.est[_ngcontent-%COMP%]{position:fixed;bottom:30px;left:calc(50% - 45px);color:#fff;font-family:orbitron-bold}@media screen and (max-height: 500px){.logo[_ngcontent-%COMP%]{max-height:45%;width:auto;padding-top:35px}.logo_words[_ngcontent-%COMP%]{width:70%}.hero_text[_ngcontent-%COMP%]{font-size:1.2em}}"]});let o=t;return o})();var ud=(o,t)=>t.user_id;function md(o,t){if(o&1&&(d(0,"div",6),g(1),p()),o&2){let i=f();m(),k(i.countdown)}}function gd(o,t){o&1&&(d(0,"div"),g(1,"$50"),p())}function fd(o,t){o&1&&(d(0,"div"),g(1,"$25"),p())}function _d(o,t){o&1&&(d(0,"div"),g(1,"$15"),p())}function xd(o,t){o&1&&(d(0,"div"),g(1,"$10"),p())}function vd(o,t){o&1&&(d(0,"div"),g(1,"$0"),p())}function bd(o,t){if(o&1&&(d(0,"tr")(1,"td",3),g(2),p(),d(3,"td",4),y(4,"img",7),g(5),p(),d(6,"td",3),g(7),p(),d(8,"td",3),T(9,gd,2,0,"div",8)(10,fd,2,0,"div",8)(11,_d,2,0,"div",8)(12,xd,2,0,"div",8)(13,vd,2,0,"div",8),p()()),o&2){let i=t.$implicit;m(2),k(i.position),m(2),K("src",i.image,j),m(),ee("\xA0\xA0\xA0",i.username," "),m(2),k(i.max_score),m(2),w("ngIf",i.position==1),m(),w("ngIf",i.position==2),m(),w("ngIf",i.position==3),m(),w("ngIf",i.position==4),m(),w("ngIf",i.position>4)}}var qs=(()=>{let t=class t{constructor(e,n){this.userService=e,this.commonService=n,this.is_mobile=window.innerWidth<768,this.users_o=[],this.games=[],this.players=[],this.data_ready=!1,this.daily_start_time=this.commonService.getEpochTimeForTodayAtMidnight()}ngOnInit(){this.userServiceSubscription=this.userService._getUser.subscribe(n=>{this.user=n,this.loadData()}),this.position_label=this.is_mobile?"Pos.":"Position",this.points_label=this.is_mobile?"Pts.":"Points",this.winnings_label=this.is_mobile?"PW":"Potential Winnings",this.users=this.users_o.slice(0,5),setTimeout(()=>{this.users=this.users_o.slice(5,10)},7e3),this.countdown_interval=setInterval(()=>{this.countdown=this.timeUntil3AMET()},1e3);var e=Math.floor(Math.random()*this.banners.length);e==this.banners.length&&(e-=1),this.banner="https://sportzbattle.blob.core.windows.net/advertisements/"+this.banners[e]}ngOnDestroy(){clearInterval(this.countdown_interval)}loadData(){this.userService.getAllGames().subscribe(e=>{this.games=e.filter(n=>n.timestamp>=this.daily_start_time),this.filterPlayers()})}filterPlayers(){this.data_ready=!1,this.players=[],this.games.forEach(e=>{var n=this.players.find(r=>r.user_id==e.user_id);n||this.players.push({user_id:e.user_id,username:e.username,image:e.user_image})}),this.players.forEach(e=>{var n=this.games.filter(c=>c.user_id==e.user_id);e.games=n.length;var r=0,s=0;n.forEach(c=>{r+=c.score?c.score:0}),n.forEach(c=>{c.score>s&&(s=c.score)}),e.points=r,e.max_score=s}),this.players=this.players.sort((e,n)=>e.score-n.score),this.players.forEach((e,n)=>{e.position=n+1}),this.data_ready=!0}timeUntil3AMET(){let e=new Date,n=4;var r=new Date(e.getTime()+n*60*60*1e3),s=new Date(r);s.setHours(3,0,0,0),r.getHours()>=3&&s.setDate(s.getDate()+1);var c=s-r,h=Math.floor(c/(1e3*60*60)),x=Math.floor(c%(1e3*60*60)/(1e3*60)),S=Math.floor(c%(1e3*60)/1e3),O,E;return O=x<10?"0"+x:x,E=S<10?"0"+S:S,this.is_mobile==!0?`${h}:${O}::${E}`:`${h} hrs, ${x} min, ${S} sec`}};t.\u0275fac=function(n){return new(n||t)(I(ze),I(Re))},t.\u0275cmp=A({type:t,selectors:[["app-leaderboard-table"]],inputs:{banners:"banners"},decls:18,vars:5,consts:[["class","countdown",4,"ngIf"],[1,"title"],[1,"table","leaderboard_table"],[1,"tc",2,"text-align","center"],[1,"tc"],[1,"banner",3,"src"],[1,"countdown"],[1,"user_image",3,"src"],[4,"ngIf"]],template:function(n,r){n&1&&(T(0,md,2,1,"div",0),d(1,"div",1),g(2,"Daily Leaderboard"),p(),d(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),g(7),p(),d(8,"th",4),g(9,"Player"),p(),d(10,"th",3),g(11),p(),d(12,"th",3),g(13),p()()(),d(14,"tbody"),_t(15,bd,14,9,"tr",null,ud),p()(),y(17,"img",5)),n&2&&(w("ngIf",r.countdown),m(7),k(r.position_label),m(4),k(r.points_label),m(2),k(r.winnings_label),m(2),xt(r.players),m(2),K("src",r.banner,j))},dependencies:[fe],styles:[".tc[_ngcontent-%COMP%]{color:#fff;background-color:transparent;font-size:1.2em;font-family:orbitron-medium}.leaderboard_table[_ngcontent-%COMP%]{width:80%;margin:auto}.title[_ngcontent-%COMP%]{font-family:orbitron-bold;font-size:4em;color:#fff;text-align:center;padding:2% 0}.user_image[_ngcontent-%COMP%]{width:2.5em;border-radius:50%;height:2.5em;object-fit:cover}.countdown[_ngcontent-%COMP%]{text-align:right;font-size:1.5em;color:#fff;font-style:italic;padding:.5% 1.5%;position:absolute;top:1%;right:1%;background-color:red;font-family:orbitron-medium}.banner[_ngcontent-%COMP%]{width:80%;margin:2% auto;display:block}@media screen and (max-width: 768px){.tc[_ngcontent-%COMP%]{color:#fff;background-color:transparent;font-size:.8em}.title[_ngcontent-%COMP%]{font-size:2em}.leaderboard_table[_ngcontent-%COMP%]{width:100%;font-size:1.2em}.countdown[_ngcontent-%COMP%]{font-size:1em}.banner[_ngcontent-%COMP%]{width:100%;max-width:none}}@media screen and (max-height: 500px){.title[_ngcontent-%COMP%]{font-size:2em}.tc[_ngcontent-%COMP%]{color:#fff;background-color:transparent;font-size:.8em}}"]});let o=t;return o})();var Ws=(()=>{let t=class t{ngOnInit(){var e=Math.floor(Math.random()*this.ads.length);e==this.ads.length&&(e-=1),this.advertisement="https://sportzbattle.blob.core.windows.net/advertisements/"+this.ads[e]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-advertisement-page"]],inputs:{ads:"ads"},decls:1,vars:1,consts:[[1,"hero_image",3,"src"]],template:function(n,r){n&1&&y(0,"img",0),n&2&&K("src",r.advertisement,j)},styles:[".hero_image[_ngcontent-%COMP%]{width:100%;height:100vh;object-fit:cover}"]});let o=t;return o})();function wd(o,t){if(o&1){let i=R();d(0,"button",6),M("click",function(){v(i);let n=f();return b(n.makeDouble())}),g(1,"Double or Nothing"),p()}}function Md(o,t){o&1&&(d(0,"button",1),g(1,"Double or Nothing"),p())}var Hs=(()=>{let t=class t{constructor(){this.make_double=new le,this.option_selected=!1,this.countdown_timer=4}ngOnInit(){this.timerInterval=setInterval(()=>{this.countdown_timer-=1,this.countdown_timer<0&&(this.countdown_timer=0)},1e3);var e=Math.floor(Math.random()*this.banners.length);e==this.banners.length&&(e-=1),this.banner="https://sportzbattle.blob.core.windows.net/advertisements/"+this.banners[e]}ngOnDestroy(){clearInterval(this.timerInterval)}makeDouble(){this.option_selected=!0,this.make_double.emit()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-prepare-screen"]],inputs:{banners:"banners",double_option_has_been_used:"double_option_has_been_used"},outputs:{make_double:"make_double"},decls:7,vars:4,consts:[[1,"btn","btn-default","button_primary","double_or_nothing"],["disabled","",1,"btn","btn-default","button_primary","double_or_nothing_selected"],[1,"countdown_timer"],["src","../../../assets/images/logo.png",1,"logo_prepare"],["src","../../../assets/images/logo_words.png",1,"logo_words_prepare"],[1,"banner",3,"src"],[1,"btn","btn-default","button_primary","double_or_nothing",3,"click"]],template:function(n,r){n&1&&(T(0,wd,2,0,"button",0)(1,Md,2,0,"button",1),d(2,"h1",2),g(3),p(),y(4,"img",3)(5,"img",4)(6,"img",5)),n&2&&(U(0,r.double_option_has_been_used==!1?0:-1),m(),U(1,r.option_selected?1:-1),m(2),k(r.countdown_timer),m(3),K("src",r.banner,j))},styles:[".countdown_timer[_ngcontent-%COMP%]{font-size:12em;color:#fff;font-family:roboto-bold;text-align:center;padding:1% 0}.logo_prepare[_ngcontent-%COMP%]{height:20%;margin:auto;display:block;object-fit:contain}.logo_words_prepare[_ngcontent-%COMP%]{margin:auto;display:block;padding:30px 0;width:30%;max-width:760px}.banner[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:3% auto;display:block}.double_or_nothing[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:#3cf;border-radius:0;color:#fff;font-weight:600;font-size:16px}.double_or_nothing_selected[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#3cf;background-color:transparent;border-radius:0;font-weight:600;font-size:16px;border:none}@media screen and (max-width: 768px){.countdown_timer[_ngcontent-%COMP%]{font-size:10em;padding:2% 0}.logo_prepare[_ngcontent-%COMP%], .logo_words_prepare[_ngcontent-%COMP%]{width:80%}}@media screen and (max-height: 500px){.countdown_timer[_ngcontent-%COMP%]{font-size:5em;padding:2% 0}}"]});let o=t;return o})();var js=(()=>{let t=class t{constructor(e){this.router=e,this.playAgain=new le}startAgain(){this.playAgain.emit()}gotoDashboard(){this.router.navigate(["user/user-dashboard"])}};t.\u0275fac=function(n){return new(n||t)(I(Ce))},t.\u0275cmp=A({type:t,selectors:[["app-game-over"]],outputs:{playAgain:"playAgain"},decls:11,vars:0,consts:[["src","../../../assets/images/logo.png",1,"logo",2,"padding-top","50px"],["src","../../../assets/images/logo_words.png",1,"logo_words"],[1,"game_over"],[1,"text-center",2,"padding","30px 0"],[1,"btn","btn-default","play_again_button",3,"click"],[1,"btn","btn-default","dashboard_button",3,"click"]],template:function(n,r){n&1&&(y(0,"img",0)(1,"img",1),d(2,"div",2),g(3,"Game Over"),p(),y(4,"br"),d(5,"div",3)(6,"button",4),M("click",function(){return r.startAgain()}),g(7,"Play Again"),p(),y(8,"br"),d(9,"button",5),M("click",function(){return r.gotoDashboard()}),g(10,"Go to Dashboard"),p()())},styles:[".logo[_ngcontent-%COMP%]{height:20%;margin:auto;display:block;object-fit:contain}.logo_words[_ngcontent-%COMP%]{margin:auto;display:block;padding:30px 0;width:30%;max-width:760px}.game_over[_ngcontent-%COMP%]{color:#fff;font-size:2em;font-family:orbitron-bold;text-align:center}.play_again_button[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;font-size:1.5em;font-family:orbitron-medium;padding:10px 30px}.dashboard_button[_ngcontent-%COMP%]{color:#fff;font-family:orbitron-medium;font-size:18px;padding:20px 0}@media screen and (max-width: 768px){.logo[_ngcontent-%COMP%], .logo_words[_ngcontent-%COMP%]{width:80%}}"]});let o=t;return o})();var Ys=(()=>{let t=class t{constructor(){this.message=window.innerWidth>=768?"Scan here and play for free. You just may win some money!":"Share with a friend!"}ngOnInit(){this.width=window.innerWidth/2>350?350:window.innerWidth/2,this.getBanner()}ngOnChanges(e){this.getBanner()}getBanner(){var e=Math.floor(Math.random()*this.banners.length);e==this.banners.length&&(e-=1),this.banner="https://sportzbattle.blob.core.windows.net/advertisements/"+this.banners[e]}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-qrcode"]],inputs:{banners:"banners",venue_id:"venue_id"},features:[ge],decls:8,vars:7,consts:[["src","../../../assets/images/logo.png",1,"logo"],[1,"join_text"],[1,"text-center",2,"padding","40px 0"],[3,"qrdata","width","margin","errorCorrectionLevel"],[1,"join_url"],[1,"banner",3,"src"]],template:function(n,r){n&1&&(y(0,"img",0),d(1,"div",1),g(2),p(),d(3,"div",2),y(4,"qrcode",3),p(),d(5,"div",4),g(6),p(),y(7,"img",5)),n&2&&(m(2),k(r.message),m(2),w("qrdata","sptzba.com/join/"+r.venue_id)("width",r.width)("margin",2)("errorCorrectionLevel","M"),m(2),k("sptzba.com/join/"+r.venue_id),m(),K("src",r.banner,j))},dependencies:[Di],styles:[".join_container[_ngcontent-%COMP%]{font-size:1.5em;color:#fff;margin:3% 0;padding-bottom:2%;width:100%;height:20vh}.join_text[_ngcontent-%COMP%]{font-size:2em;color:#fff;text-align:center;padding:40px 0 1.5%;font-family:orbitron-medium}.join_url[_ngcontent-%COMP%]{color:#ff0;font-size:2em;font-family:roboto-bold;text-align:center;padding:20px 0}.banner[_ngcontent-%COMP%]{height:8%;margin:1% auto;display:block}.qrcode[_ngcontent-%COMP%]{padding:40px 0}.logo[_ngcontent-%COMP%]{width:320px;margin:auto;display:block;padding:20px 0}@media screen and (max-width: 768px){.banner[_ngcontent-%COMP%]{width:100%;height:auto;margin:3% auto}.join_text[_ngcontent-%COMP%], .join_url[_ngcontent-%COMP%]{font-size:2em}.logo[_ngcontent-%COMP%]{width:220px}}"]});let o=t;return o})();var Qs=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-on-fire-popup"]],decls:6,vars:0,consts:[[1,"on_fire_animation"],["src","../../../assets/images/fire-flame.gif",1,"user_on_fire",2,"margin","auto","display","block"]],template:function(n,r){n&1&&(d(0,"div",0),y(1,"img",1),g(2," You are on fire!"),y(3,"br"),d(4,"strong"),g(5,"2X Points!"),p()())},styles:[".on_fire_animation[_ngcontent-%COMP%]{position:absolute;width:200px;background:linear-gradient(45deg,red,orange);color:#fff;top:100px;left:50%;font-size:24px;padding:10px 4px;transform:translate(-50%);opacity:1;animation:flash 3s ease-in-out forwards;border-radius:10px;text-align:center;z-index:1000}.user_on_fire[_ngcontent-%COMP%]{width:40px;display:inline-block}"]});let o=t;return o})();var Gs=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-double-or-nothing-popup"]],decls:5,vars:0,consts:[[1,"double_or_nothing_animation"]],template:function(n,r){n&1&&(d(0,"div",0),g(1," Double Challenge Won!!"),y(2,"br"),d(3,"strong"),g(4,"2X Overall Points!"),p()())},styles:[".double_or_nothing_animation[_ngcontent-%COMP%]{position:absolute;width:fit-content;background:linear-gradient(45deg,#3cf,#3cf);color:#fff;top:100px;left:50%;font-size:24px;padding:10px 4px;transform:translate(-50%);opacity:1;animation:flash 3s ease-in-out forwards;border-radius:10px;text-align:center}"]});let o=t;return o})();var Xs=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-double-or-nothing-failed-popup"]],decls:5,vars:0,consts:[[1,"double_or_nothing_failed_animation"]],template:function(n,r){n&1&&(d(0,"div",0),g(1," Double Challenge Failed"),y(2,"br"),d(3,"strong"),g(4,"Points lost!"),p()())},styles:[".double_or_nothing_failed_animation[_ngcontent-%COMP%]{position:absolute;width:fit-content;background:linear-gradient(45deg,gray,red);color:#fff;top:100px;left:50%;font-size:24px;padding:10px 4px;transform:translate(-50%);opacity:1;animation:flash 3s ease-in-out forwards;border-radius:10px;text-align:center}"]});let o=t;return o})();var Id=(o,t)=>t.text,Ad=o=>({invisible:o}),Rd=(o,t)=>({"font-size":o,"padding-top":t}),zd=(o,t,i)=>({greenyellow:o,red:t,invisible:i});function Vd(o,t){if(o&1&&(d(0,"div",11),g(1),p()),o&2){let i=f(3);w("ngStyle",Vo(2,Rd,i.points_value>99?"40px":"48px",i.value_points>99?"30px":"10px")),m(),ee("+",i.user_on_fire?2*i.value_points:i.value_points,"")}}function Bd(o,t){o&1&&y(0,"app-on-fire-popup")}function Ld(o,t){o&1&&y(0,"app-double-or-nothing-popup")}function Nd(o,t){o&1&&y(0,"app-double-or-nothing-failed-popup")}function Dd(o,t){if(o&1&&y(0,"app-timer",12),o&2){let i=f(3);w("time",i.time)}}function Ud(o,t){o&1&&y(0,"img",6)}function Fd(o,t){if(o&1){let i=R();d(0,"div",9)(1,"div",13),M("click",function(){let n=v(i).$implicit,r=f(3);return b(r.answerSelected(n))}),g(2),p()()}if(o&2){let i=t.$implicit,e=f(3);m(),w("ngClass",Bo(2,zd,i.show_green,i.show_red,e.time_is_up==!0&&i.is_right_answer==!1||i.hide)),m(),ee(" ",i.text,"")}}function qd(o,t){if(o&1&&y(0,"app-question-footer4",10),o&2){let i=f(3);w("counter",i.counter)("venue_id",i.user.venue_id)("banners",i.banners)}}function Wd(o,t){if(o&1&&(y(0,"app-user-stats",1),T(1,Vd,2,5,"div",2)(2,Bd,1,0,"app-on-fire-popup")(3,Ld,1,0,"app-double-or-nothing-popup")(4,Nd,1,0,"app-double-or-nothing-failed-popup")(5,Dd,1,1,"app-timer",3),d(6,"div",4)(7,"div",5),g(8),p(),T(9,Ud,1,0,"img",6),d(10,"div",7)(11,"em"),g(12),p()(),d(13,"div",8),_t(14,Fd,3,6,"div",9,Id),p()(),T(16,qd,1,3,"app-question-footer4",10)),o&2){let i=f(2);w("user",i.user)("counter",i.counter)("show_lives",!0)("active_players",i.active_players)("on_fire",i.user_on_fire),m(),w("ngIf",i.show_point_animation),m(),U(2,i.show_on_fire_animation?2:-1),m(),U(3,i.show_double_or_nothing_animation?3:-1),m(),U(4,i.show_double_or_nothing_failed_animation?4:-1),m(),w("ngIf",i.show_timer),m(3),k(i.message.question),m(),U(9,i.user_on_fire&&i.question_active?9:-1),m(),w("ngClass",ne(15,Ad,i.question_active==!1)),m(2),k(i.value_points>0?i.value_points:0),m(2),xt(i.options),m(2),U(16,i.banners?16:-1)}}function Hd(o,t){if(o&1&&y(0,"app-user-stats",14)(1,"app-leaderboard-table",15),o&2){let i=f(2);w("user",i.user)("show_lives",!1)("active_players",i.active_players),m(),w("banners",i.banners)}}function jd(o,t){if(o&1&&y(0,"app-advertisement-page",16),o&2){let i=f(2);w("ads",i.ads)}}function Yd(o,t){if(o&1&&y(0,"app-qrcode",17),o&2){let i=f(2);w("banners",i.banners)("venue_id",i.user.venue_id)}}function Qd(o,t){if(o&1){let i=R();d(0,"app-prepare-screen",18),M("make_double",function(){v(i);let n=f(2);return b(n.makeDouble())}),p()}if(o&2){let i=f(2);w("banners",i.banners)("double_option_has_been_used",i.double_option_has_been_used)}}function Gd(o,t){if(o&1){let i=R();d(0,"app-game-over",19),M("playAgain",function(){v(i);let n=f(2);return b(n.playAgain())}),p()}}function Xd(o,t){if(o&1&&T(0,Wd,17,17)(1,Hd,2,4)(2,jd,1,1)(3,Yd,1,2)(4,Qd,1,2)(5,Gd,1,0),o&2){let i=f();U(0,i.page=="game"?0:i.page=="leaderboard"?1:i.page=="advertisement"&&i.ads?2:i.page=="qrcode"?3:i.page=="prepare_screen"?4:i.page=="game_over"?5:-1)}}function Kd(o,t){o&1&&y(0,"app-splash")}var Ks=(()=>{let t=class t{constructor(e,n,r,s,c,h){this.socketioService=e,this.commonService=n,this.userService=r,this.tablesService=s,this.myblobService=c,this.router=h,this.options=[],this.has_joined=!1,this.page="game",this.debug=!1,this.show_timer=!1,this.time_is_up=!1,this.ads=[],this.show_point_animation=!1,this.show_on_fire_animation=!1,this.show_double_or_nothing_animation=!1,this.show_double_or_nothing_failed_animation=!1,this.points_value=0,this.screen_width=window.innerWidth,this.question_active=!1,this.users=[],this.start_timestamp=Date.now(),this.counter=0,this.cycle_counter=1,this.game_is_active=!1,this.user_on_fire=!1,this.correct_answers_in_a_row=0,this.is_double_or_nothing=!1,this.double_option_has_been_used=!1}ngOnInit(){this.userServiceSubscription=this.userService._getUser.subscribe(e=>{if(!e){this.router.navigate(["login"]);return}this.user=e,this.user.lives=5,this.user.points=0,this.user.rank=3,this.user.account_type=="player"?(this.createGame(),this.getUserDailyHighScore()):this.user.account_type=="business"&&this.loadScreens(),this.loadAdvertisements()}),this.subscribeToSocket()}loadScreens(){this.tablesService.GetFiltered("screens","venue_id",this.user.venue_id).subscribe(e=>{var n=e,r=window.innerWidth+" x "+window.innerHeight,s=n.find(h=>h.dimensions==r);if(!s){var c={venue_id:this.user.venue_id,dimensions:r};this.tablesService.AddItem("screens",c).subscribe()}})}ngOnDestroy(){this.messagesSubscription&&this.messagesSubscription.unsubscribe(),this.userServiceSubscription&&this.userServiceSubscription.unsubscribe()}subscribeToSocket(){this.messagesSubscription=this.socketioService._getMessage.subscribe(e=>{if(!document.hidden){var n=Date.now()-this.start_timestamp;if(e&&n>5e3){if(clearInterval(this.timerInterval),clearInterval(this.timer2Interval),this.user.lives<=0){this.gameOver();return}this.message=e,console.log("this.message",this.message),this.has_joined=!0,this.message.message=="leaderboard"?this.page="leaderboard":this.message.message=="advertisement"?(this.page="advertisement",this.cycle_counter+=1):this.message.message=="qrcode"?this.page="qrcode":this.message.message=="question"&&(this.counter+=1,this.page="prepare_screen",this.is_double_or_nothing=!1,this.question_notification=this.message.value_points+" Pts",setTimeout(()=>{this.page="game",this.time_is_up=!1,this.has_joined=!0,this.question_active=!0,this.message.question=this.commonService.decrypt("sb",e.question),this.right_answer=this.commonService.decrypt("sb",e.key),this.hiding_order=JSON.parse(this.commonService.decrypt("sb",e.hiding_order)),console.log("this.hiding_order",this.hiding_order),this.options=[],this.message.answers.forEach(s=>{this.options.push({text:s,is_right_answer:s==this.right_answer})}),this.time=10,this.show_timer=!0;var r=0;this.question_start_time=Date.now(),this.timerInterval&&clearInterval(this.timerInterval),this.timer2Interval&&clearInterval(this.timer2Interval),this.timer2Interval=setInterval(()=>{this.value_points=100-Math.round((Date.now()-this.question_start_time)/100)},200),this.timerInterval=setInterval(()=>{if(this.time-=1,r+=1,this.time<0&&(this.time=0,this.time_is_up=!0,this.question_active==!0&&this.answerSelected(void 0)),r==4&&(this.options[this.hiding_order[0]].hide=!0),r==7&&(this.options[this.hiding_order[1]].hide=!0),r==12&&this.tablesService.GetFiltered("user_activity","question_id",this.message.question_id).subscribe(s=>{var c=Date.now()-11e3,h=s.filter(O=>O.timestamp_question>c),x=0;h.forEach(O=>{O.got_it_right==1&&x++});var S={message:"results",percent:Math.round(100*x/h.length),got_right:x,total_players:h.length};h.length>0&&(this.question_notification=S.percent+"% answered correctly"),this.active_players=S.total_players}),r==14&&this.user.lives<=0){this.gameOver();return}},1e3)},4e3))}}})}answerSelected(e){return ae(this,null,function*(){this.user.account_type=="business"||this.question_active==!1||(this.question_active=!1,this.timer2Interval&&clearInterval(this.timer2Interval),e?.text==this.right_answer?(e.show_green=!0,this.user.points+=this.user_on_fire?2*this.value_points:this.value_points,this.points_value=this.user_on_fire?2*this.value_points:this.value_points,this.show_point_animation=!0,this.updateGameRecord(),this.storeAnswer(!0),this.correct_answers_in_a_row+=1,yield this.delay(1500),this.show_point_animation=!1,this.correct_answers_in_a_row==3&&(this.show_on_fire_animation=!0,this.user_on_fire=!0,yield this.delay(3e3),this.show_on_fire_animation=!1),this.is_double_or_nothing&&(this.user.points+=this.user.points,this.show_double_or_nothing_animation=!0,yield this.delay(3e3),this.show_double_or_nothing_animation=!1)):(e&&(e.show_red=!0),this.storeAnswer(!1),this.user.lives-=1,this.user_on_fire=!1,this.correct_answers_in_a_row=0,this.is_double_or_nothing&&(this.user.points=0,this.show_double_or_nothing_failed_animation=!0,yield this.delay(3e3),this.show_double_or_nothing_failed_animation=!1)),this.stopTimer())})}delay(e){return ae(this,null,function*(){return new Promise(n=>setTimeout(n,e))})}gameOver(){this.page="game_over",this.game_is_active=!1,clearInterval(this.timerInterval),clearInterval(this.timer2Interval),this.messagesSubscription&&this.messagesSubscription.unsubscribe()}updateGameRecord(){var e={game_id:this.game_id,score:this.user.points};this.tablesService.UpdateItem("games","game_id",e).subscribe()}stopTimer(){this.show_timer=!1}playAgain(){this.user.lives=5,this.has_joined=!1,this.page="game",this.getUserDailyHighScore(),this.subscribeToSocket()}storeAnswer(e){if(this.game_is_active==!0){var n={user_id:this.user.user_id,got_it_right:e,game_id:this.game_id,question_id:this.message.question_id};this.tablesService.StoreUserActivity(n).subscribe()}}createGame(){var e={user_id:this.user.user_id,venue_id:1,timestamp:Date.now(),score:0,dimensions:window.innerWidth+" x "+window.innerHeight};this.tablesService.AddItem("games",e).subscribe(n=>{this.game_id=n.id,this.game_is_active=!0}),this.user_on_fire=!1}getUserDailyHighScore(){this.userService.getUserDailyHighScore(this.user.user_id).subscribe(e=>{var n=e[0];n&&(this.user.daily_high=n.score)})}loadAdvertisements(){this.myblobService.getActiveFiles().subscribe(e=>{this.screen_width<540?this.ads=e.filter(n=>n.indexOf("/mobile/")>-1):this.ads=e.filter(n=>n.indexOf("/desktop/")>-1),this.banners=e.filter(n=>n.indexOf("/banner/")>-1)})}makeDouble(){this.is_double_or_nothing=!0,this.double_option_has_been_used=!0}};t.\u0275fac=function(n){return new(n||t)(I(Us),I(Re),I(ze),I(Ei),I(Oi),I(Ce))},t.\u0275cmp=A({type:t,selectors:[["app-game-screen"]],decls:3,vars:1,consts:[[1,"game_screen"],[3,"user","counter","show_lives","active_players","on_fire"],["class","points_animation",3,"ngStyle",4,"ngIf"],[3,"time",4,"ngIf"],[1,"question_container"],[1,"question"],["src","../../../assets/images/fire-flame.gif",1,"user_on_fire"],[1,"question_value",3,"ngClass"],[1,"row"],[1,"col-12","col-md-6"],[3,"counter","venue_id","banners"],[1,"points_animation",3,"ngStyle"],[3,"time"],[1,"option","op1",3,"click","ngClass"],[3,"user","show_lives","active_players"],[3,"banners"],[3,"ads"],[3,"banners","venue_id"],[3,"make_double","banners","double_option_has_been_used"],[3,"playAgain"]],template:function(n,r){n&1&&(d(0,"div",0),T(1,Xd,6,1)(2,Kd,1,0),p()),n&2&&(m(),U(1,r.has_joined?1:2))},dependencies:[Ae,fe,Si,on,rn,sn,Fs,qs,Ws,Hs,js,Ys,Qs,Gs,Xs],styles:[".game_screen[_ngcontent-%COMP%]{width:100%;height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative}.hero[_ngcontent-%COMP%]{height:calc(100vh - 100px);position:absolute;bottom:0;right:0}.message[_ngcontent-%COMP%]{position:absolute;top:50px;color:#fff}.question_value[_ngcontent-%COMP%]{text-align:center;padding:10px 25px;font-family:orbitron-medium;font-size:1.2em;color:#fff;width:fit-content;margin:1.5% auto;display:inline-block;border-radius:10px;background-color:transparent;border:solid 2px gold;width:150px}.pts100[_ngcontent-%COMP%]{font-size:.8em}.green[_ngcontent-%COMP%]{background-color:green!important}.greenyellow[_ngcontent-%COMP%]{background-color:#adff2f!important}.red[_ngcontent-%COMP%]{background-color:red!important}.blue[_ngcontent-%COMP%]{background-color:#3cf!important}.orange[_ngcontent-%COMP%]{background-color:orange!important}.question_container[_ngcontent-%COMP%]{width:100%;display:block;padding:0% 5% 0;text-align:center;margin:0}.question[_ngcontent-%COMP%]{color:#fff;font-size:3.5em;margin:0 0 0%;min-height:150px}.option[_ngcontent-%COMP%]{background-color:#fff;color:#000;font-size:2.5em;margin:15px 0;border-radius:100px;box-shadow:5px 8px #d3d3d3;z-index:100}.advertisement_text[_ngcontent-%COMP%]{position:absolute;color:#fff;font-family:roboto-bold;font-size:4em;top:20%;right:20px;width:50%;text-align:center}.invisible[_ngcontent-%COMP%]{visibility:hidden}.points_animation[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;background:linear-gradient(45deg,#3cf,#000);color:#fff;top:27px;left:calc(50% + -0px);border-radius:50%;font-size:48px;padding:10px 4px;transform:translate(-50%);opacity:0;animation:_ngcontent-%COMP%_flash 1s ease-in-out forwards}.user_on_fire[_ngcontent-%COMP%]{width:40px;display:inline-block}.question[_ngcontent-%COMP%]{font-size:2.7em}.option[_ngcontent-%COMP%]{font-size:2.2em}@keyframes _ngcontent-%COMP%_flash{0%{opacity:1;transform:translate(-50%,-20px) scale(1.5)}50%{opacity:1;transform:translate(-50%) scale(1)}to{opacity:0;transform:translate(-50%,20px) scale(.5)}}@media screen and (max-width: 768px){.option[_ngcontent-%COMP%]{font-size:2em;margin:15px 0;border-radius:100px;box-shadow:5px 8px #d3d3d3}.question[_ngcontent-%COMP%]{color:#fff;font-size:1.5em;margin:0 0 2%;min-height:0px}.question_container[_ngcontent-%COMP%]{padding-top:10px}}@media screen and (max-height: 750px){.question_container[_ngcontent-%COMP%]{padding-top:0%}.option[_ngcontent-%COMP%]{font-size:2em}}@media screen and (max-height: 500px){.question[_ngcontent-%COMP%]{font-size:1.7em}.option[_ngcontent-%COMP%]{font-size:1.25em;margin:15px 0}}"]});let o=t;return o})();var Jd=wi(qo());function Zd(o,t){if(o&1&&y(0,"plotly-plot",3),o&2){let i=f();w("data",i.graph.data)("layout",i.graph.layout)("config",i.graph.config)}}yt.plotlyjs=Jd;var Js=(()=>{let t=class t{constructor(){this.graph_data=[],this.ready=!1,this.graph={layout:{width:document.getElementById("myrow")?.offsetWidth,height:300,plot_bgcolor:"rgba(0,0,0,0)",paper_bgcolor:"rgba(0,0,0,0)",title:{text:"",font:{color:"white"}},xaxis:{title:{font:{color:"white"}},tickfont:{color:"white"}},yaxis:{title:{text:"High Score",font:{color:"white"}},tickfont:{color:"white"}}},config:{displayModeBar:!1,responsive:!0,editable:!1}}}ngOnChanges(){this.graph_data=[],this.graph.data=[{x:this.games.map(r=>r.date),y:this.games.map(r=>r.score),type:"bar",marker:{color:"33ccff"}}];var e=document.getElementById("myrow");if(e){var n=e.offsetWidth;this.graph.layout.width=n}this.ready=!0}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=A({type:t,selectors:[["app-user-dashboard-graph"]],inputs:{games:"games"},features:[ge],decls:4,vars:1,consts:[[1,"graph_container"],[1,"graph_title"],[3,"data","layout","config",4,"ngIf"],[3,"data","layout","config"]],template:function(n,r){n&1&&(d(0,"div",0)(1,"div",1),g(2,"Games History"),p(),T(3,Zd,1,3,"plotly-plot",2),p()),n&2&&(m(3),w("ngIf",r.ready))},dependencies:[fe,Wo],styles:[".graph_container[_ngcontent-%COMP%]{position:relative}.graph_title[_ngcontent-%COMP%]{font-family:orbitron-bold;font-size:20px;color:#fff;text-align:center;position:absolute;top:50px;left:calc(50% - 82px)}"]});let o=t;return o})();function ep(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.all_time_points_rank_suffix," out of ",i.stats.all_time_points_number_players,"")}}function tp(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}function ip(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.high_points_today_rank_suffix," out of ",i.stats.high_points_today_number_players,"")}}function np(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}function op(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.monthly_points_rank_suffix," out of ",i.stats.monthly_points_number_players,"")}}function rp(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}function sp(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.top_score_all_time_rank_suffix," out of ",i.stats.top_score_all_time_number_players,"")}}function ap(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}function cp(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.games_today_rank_suffix," out of ",i.stats.games_today_number_players,"")}}function lp(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}function dp(o,t){if(o&1&&(d(0,"div",12),g(1),p()),o&2){let i=f();m(),Oe("",i.stats.number_of_games_rank_suffix," out of ",i.stats.number_of_games_number_players,"")}}function pp(o,t){o&1&&(d(0,"div",12),g(1,"-"),p())}var Zs=(()=>{let t=class t{constructor(e,n,r){this.userService=e,this.commonService=n,this.router=r,this.games=[],this.activity=[],this.stats={}}ngOnInit(){this.userServiceSubscription=this.userService._getUser.subscribe(e=>{if(!e){this.router.navigate(["login"]);return}this.user=e,this.getData()})}ngOnDestroy(){this.userServiceSubscription&&this.userServiceSubscription.unsubscribe()}getData(){this.userService.getUserStats(this.user.user_id).subscribe(e=>{this.stats=e}),this.userService.getUserActivity(this.user.user_id).subscribe(e=>{var n=e;this.activity=n,this.games=[],n.forEach(r=>{var s=this.games.find(h=>h.game_id==r.game_id);if(!s){var c={game_id:r.game_id,timestamp:r.timestamp,score:r.score};this.games.push(c)}}),this.games.forEach(r=>{r.date=this.commonService.getDateString(r.timestamp)})})}goPlay(){this.router.navigate(["user/play"])}};t.\u0275fac=function(n){return new(n||t)(I(ze),I(Re),I(Ce))},t.\u0275cmp=A({type:t,selectors:[["app-user-dashboard"]],decls:114,vars:31,consts:[[1,"background","backgroundx"],[1,"dashboard_contents"],[1,"user_details"],[1,"user_image",3,"src"],[1,"user_name"],[1,"text-end"],[1,"btn","btn-default","button_primary","play_now_button",3,"click"],[3,"games"],["id","myrow",1,"row","rowx"],[1,"col-6"],[1,"box_title"],[1,"box_number"],[1,"box_rank"],[1,"table_container"],[1,"table"],[1,"tc"]],template:function(n,r){n&1&&(y(0,"app-user-sidemenu"),d(1,"div",0)(2,"div",1)(3,"div",2),y(4,"img",3),d(5,"div",4),g(6),p(),d(7,"div",5)(8,"button",6),M("click",function(){return r.goPlay()}),g(9,"Play Now"),p()()(),y(10,"app-user-dashboard-graph",7),d(11,"div",8)(12,"div",9)(13,"div",10),g(14,"Total Points"),p(),d(15,"div",11),g(16),p(),T(17,ep,2,2,"div",12)(18,tp,2,0),p(),d(19,"div",9)(20,"div",10),g(21,"Daily High Points"),p(),d(22,"div",11),g(23),p(),T(24,ip,2,2,"div",12)(25,np,2,0),p()(),d(26,"div",8)(27,"div",9)(28,"div",10),g(29,"Monthly Points"),p(),d(30,"div",11),g(31),p(),T(32,op,2,2,"div",12)(33,rp,2,0),p(),d(34,"div",9)(35,"div",10),g(36,"All-time Top Score"),p(),d(37,"div",11),g(38),p(),T(39,sp,2,2,"div",12)(40,ap,2,0),p()(),d(41,"div",8)(42,"div",9)(43,"div",10),g(44,"Today Games"),p(),d(45,"div",11),g(46),p(),T(47,cp,2,2,"div",12)(48,lp,2,0),p(),d(49,"div",9)(50,"div",10),g(51,"Total Games"),p(),d(52,"div",11),g(53),p(),T(54,dp,2,2,"div",12)(55,pp,2,0),p()(),d(56,"div",13)(57,"table",14)(58,"thead")(59,"tr"),y(60,"th",15),d(61,"th",15),g(62,"Questions"),p(),d(63,"th",15),g(64,"Correct"),p(),d(65,"th",15),g(66,"Pct %"),p(),d(67,"th",15),g(68,"Ranking"),p()()(),d(69,"tbody")(70,"tr")(71,"td",15),g(72,"All"),p(),d(73,"td",15),g(74),p(),d(75,"td",15),g(76),p(),d(77,"td",15),g(78),p(),d(79,"td",15),g(80),p()(),d(81,"tr")(82,"td",15),g(83,"Basketball"),p(),d(84,"td",15),g(85),p(),d(86,"td",15),g(87),p(),d(88,"td",15),g(89),p(),d(90,"td",15),g(91),p()(),d(92,"tr")(93,"td",15),g(94,"Football"),p(),d(95,"td",15),g(96),p(),d(97,"td",15),g(98),p(),d(99,"td",15),g(100),p(),d(101,"td",15),g(102),p()(),d(103,"tr")(104,"td",15),g(105,"Baseball"),p(),d(106,"td",15),g(107),p(),d(108,"td",15),g(109),p(),d(110,"td",15),g(111),p(),d(112,"td",15),g(113),p()()()()()()()),n&2&&(m(4),K("src",r.user.image,j),m(2),k(r.user.name),m(4),w("games",r.games),m(6),k(r.stats.all_time_points),m(),U(17,r.stats.all_time_points_number_players>0&&r.stats.number_of_games>0?17:18),m(6),k(r.stats.high_points_today),m(),U(24,r.stats.high_points_today_number_players>0&&r.stats.games_today>0?24:25),m(7),k(r.stats.monthly_points),m(),U(32,r.stats.monthly_points_number_players>0&&r.stats.number_of_games>0?32:33),m(6),k(r.stats.top_score_all_time),m(),U(39,r.stats.top_score_all_time_number_players>0&&r.stats.number_of_games>0?39:40),m(7),k(r.stats.games_today),m(),U(47,r.stats.games_today_number_players>0&&r.stats.games_today>0?47:48),m(6),k(r.stats.number_of_games),m(),U(54,r.stats.number_of_games_number_players>0&&r.stats.number_of_games>0?54:55),m(20),k(r.stats.all_questions),m(2),k(r.stats.all_correct),m(2),ee("",r.stats.all_pct,"%"),m(2),k(r.stats.all_pct_rank_suffix),m(5),k(r.stats.all_nba),m(2),k(r.stats.nba_correct),m(2),ee("",r.stats.nba_pct,"%"),m(2),k(r.stats.nba_pct_rank_suffix),m(5),k(r.stats.all_nfl),m(2),k(r.stats.nfl_correct),m(2),ee("",r.stats.nfl_pct,"%"),m(2),k(r.stats.nfl_pct_rank_suffix),m(5),k(r.stats.all_mlb),m(2),k(r.stats.mlb_correct),m(2),ee("",r.stats.mlb_pct,"%"),m(2),k(r.stats.mlb_pct_rank_suffix))},dependencies:[Ct,Js],styles:['.background[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:linear-gradient(45deg,#3cf,#000,#000);position:relative;padding-left:220px}.page_title[_ngcontent-%COMP%]{color:#3cf;padding:20px 0;font-size:38px;font-family:roboto-bold}.contents[_ngcontent-%COMP%]{padding:20px 20px 100px 240px}.button_primary[_ngcontent-%COMP%]{color:#fff;background-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_primary[_ngcontent-%COMP%]:hover{background-color:#0086b3}.button_secondary[_ngcontent-%COMP%]{color:#3cf;background-color:#fff;border-color:#3cf;min-width:150px;border-radius:0;font-family:roboto-bold}.button_secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3cf}.button_default[_ngcontent-%COMP%]{background-color:#fff;color:#d3d3d3;min-width:150px;border-color:#d3d3d3}.button_default[_ngcontent-%COMP%]:hover{color:gray;border-color:gray}.button_discrete[_ngcontent-%COMP%]{padding:20px 0;color:gray;border:none;outline:none}.button_discrete[_ngcontent-%COMP%]:hover{border:none;outline:none;text-decoration:underline}.back_button[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;font-size:16px;outline:none;border:none}.back_button_words[_ngcontent-%COMP%]{cursor:pointer}.back_button_words[_ngcontent-%COMP%]:hover{text-decoration:underline;border:none;outline:none}.search_icon[_ngcontent-%COMP%]{color:gray;border-radius:50%;padding:5px 8px;width:33px;height:33px;position:absolute;top:3px;left:7px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.modal_header[_ngcontent-%COMP%]{background-color:#3cf;color:#fff;height:54px}.modal_body[_ngcontent-%COMP%]{padding:60px 40px 40px;max-height:calc(100vh - 66px);overflow:auto}.modal_footer[_ngcontent-%COMP%]{background-color:#fff}.modal_title[_ngcontent-%COMP%]{color:#7f7f7f;font-size:30px;text-align:center;font-family:roboto-medium}.modal_close_button[_ngcontent-%COMP%]{color:#1e4f7a;position:absolute;top:15px;right:15px}.modal_close_icon[_ngcontent-%COMP%]{font-size:24px}.modal_close_button[_ngcontent-%COMP%]:hover{border:none;outline:none;color:#3cf}.modal_success_text[_ngcontent-%COMP%]{text-align:center;font-size:20px;color:gray;margin:20px 0 0}.labelf[_ngcontent-%COMP%]{margin:20px 0 5px;color:#fff;font-family:roboto-medium}.labelfd[_ngcontent-%COMP%]{margin:20px 0 5px;color:gray;font-family:roboto-medium}.form_alert[_ngcontent-%COMP%]{color:#e2667d;font-style:italic;font-size:15px;text-align:right}.form_title[_ngcontent-%COMP%]{color:gray;font-size:32px;padding:20px 0}.form_label[_ngcontent-%COMP%]{margin:10px 0 0;width:200px}.form_input[_ngcontent-%COMP%]{border-radius:0;font-family:roboto-medium}.search_input_container[_ngcontent-%COMP%]{height:60px;padding-top:12px;padding-left:20px;display:inline-block}.remove_search_icon[_ngcontent-%COMP%]{position:absolute;top:6px;right:80px;color:#d3d3d3;cursor:pointer;background-color:gray;padding:5px 6px 2px 5px;border-radius:50%;color:#f7f8fc}.search_input[_ngcontent-%COMP%]{border:solid 1px lightgrey;padding:5px 0 5px 55px;font-style:italic;color:#5a5b5f;border-radius:24px;width:350px;height:48px;box-shadow:1px 1px 1px #d3d3d3}.search_input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::placeholder{color:#5a5b5f;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#5a5b5f}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#5a5b5f}.invalid_feedback[_ngcontent-%COMP%]{text-align:right}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;height:24px;width:45px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.checkbox_container[_ngcontent-%COMP%]{display:block;position:relative;padding-left:35px;margin-bottom:12px;cursor:pointer;font-size:16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:25px;width:25px;background-color:#d3d3d3}.checkbox_container[_ngcontent-%COMP%]:hover   input[_ngcontent-%COMP%] ~ .checkmark[_ngcontent-%COMP%]{background-color:#ccc}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:#3cf}.checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.checkbox_container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.checkbox_container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:9px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.mz[_ngcontent-%COMP%]{margin:0}.pz[_ngcontent-%COMP%]{padding:0}.brz[_ngcontent-%COMP%]{border-radius:0}@media screen and (max-width: 992px){.cc[_ngcontent-%COMP%]{height:calc(100vh - 60px)}.content_container[_ngcontent-%COMP%]{padding:20px 10px}.page_title[_ngcontent-%COMP%]{margin:0;padding:45px 5px 0}}@media screen and (max-width: 768px){.cc[_ngcontent-%COMP%]{padding-bottom:200px}.remove_search_icon[_ngcontent-%COMP%]{top:12px}.background[_ngcontent-%COMP%]{padding:20px}}.user_details[_ngcontent-%COMP%]{padding:60px 40px 0;position:relative;margin:auto;display:block}.dashboard_contents[_ngcontent-%COMP%]{width:100%;max-width:1000px;margin:auto;display:block;padding-bottom:100px}.user_image[_ngcontent-%COMP%]{border-radius:50%;width:80px;height:80px;display:inline-block}.user_name[_ngcontent-%COMP%]{font-size:20px;font-family:orbitron-bold;display:inline-block;vertical-align:middle;padding-left:20px;color:#fff}.box_title[_ngcontent-%COMP%]{color:#fff;font-family:orbitron-bold;font-size:24px;text-align:center;padding:7px 0;margin:auto}.box_number[_ngcontent-%COMP%]{color:#fff;font-family:orbitron-bold;font-size:20px;text-align:center;background-color:#3cf;padding:25px 0;border-radius:50%;width:80px;height:80px;margin:auto}.box_rank[_ngcontent-%COMP%]{font-style:italic;font-size:18px;color:#fff;text-align:center}.rowx[_ngcontent-%COMP%]{margin:0;border-bottom:solid 1px white;padding-bottom:10px;padding-top:10px;border-top:solid 1px white}.play_now_button[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.tc[_ngcontent-%COMP%]{background-color:transparent;color:#fff;text-align:center;font-weight:600}.table_container[_ngcontent-%COMP%]{padding:30px 0}@media screen and (max-width: 768px){.backgroundx[_ngcontent-%COMP%]{padding:0}.box_title[_ngcontent-%COMP%]{max-width:166px}}']});let o=t;return o})();var hp=[{path:"settings",component:ss},{path:"leaderboard",component:as},{path:"play",component:Ks},{path:"user-dashboard",component:Zs}],$s=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gt({type:t}),t.\u0275inj=mt({imports:[Cn.forChild(hp),Cn]});let o=t;return o})();var up=wi(qo());yt.plotlyjs=up;var gg=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=gt({type:t}),t.\u0275inj=mt({imports:[vt,$s,Go,Xo,Ui,yt,Ko,qi,on,rn,sn]});let o=t;return o})();export{gg as UserModule};
